/**
 * compiled: 2017-11-14 14:44:10
 * version: 1.1.0
 * commit: d100c82bd2d3ade940cabfd167757d6cd5ca2222
 */

!function(){"use strict";function e(e,t){return t={exports:{}},e(t,t.exports),t.exports}function t(){}function n(e,n){var i=ui,o=void 0,r=void 0,a=void 0,s=void 0;for(s=arguments.length;s-- >2;)li.push(arguments[s]);for(n&&null!=n.children&&(li.length||li.push(n.children),delete n.children);li.length;)if((r=li.pop())&&void 0!==r.pop)for(s=r.length;s--;)li.push(r[s]);else!0!==r&&!1!==r||(r=null),(a="function"!=typeof e)&&(null==r?r="":"number"==typeof r?r=String(r):"string"!=typeof r&&(a=!1)),a&&o?i[i.length-1]+=r:i===ui?i=[r]:i.push(r),o=a;var c=new t;return c.nodeName=e,c.children=i,c.attributes=null==n?void 0:n,c.key=null==n?void 0:n.key,void 0!==di.vnode&&di.vnode(c),c}function i(e,t){for(var n in t)e[n]=t[n];return e}function o(e){!e._dirty&&(e._dirty=!0)&&1==wi.push(e)&&(di.debounceRendering||setTimeout)(r)}function r(){var e=void 0,t=wi;for(wi=[];e=t.pop();)e._dirty&&S(e)}function a(e,t,n){return"string"==typeof t||"number"==typeof t?void 0!==e.splitText:"string"==typeof t.nodeName?!e._componentConstructor&&s(e,t.nodeName):n||e._componentConstructor===t.nodeName}function s(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function c(e){var t=i({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var o in n)void 0===t[o]&&(t[o]=n[o]);return t}function d(e,t){var n=t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return n.normalizedNodeName=e,n}function l(e){e.parentNode&&e.parentNode.removeChild(e)}function u(e,t,n,i,o){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)n&&n(null),i&&i(e);else if("class"!==t||o)if("style"===t){if(i&&"string"!=typeof i&&"string"!=typeof n||(e.style.cssText=i||""),i&&"object"===(void 0===i?"undefined":Dt(i))){if("string"!=typeof n)for(var r in n)r in i||(e.style[r]="");for(var a in i)e.style[a]="number"==typeof i[a]&&!1===gi.test(a)?i[a]+"px":i[a]}}else if("dangerouslySetInnerHTML"===t)i&&(e.innerHTML=i.__html||"");else if("o"==t[0]&&"n"==t[1]){var s=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),i?n||e.addEventListener(t,f,s):e.removeEventListener(t,f,s),(e._listeners||(e._listeners={}))[t]=i}else if("list"!==t&&"type"!==t&&!o&&t in e)p(e,t,null==i?"":i),null!=i&&!1!==i||e.removeAttribute(t);else{var c=o&&t!==(t=t.replace(/^xlink\:?/,""));null==i||!1===i?c?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof i&&(c?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),i):e.setAttribute(t,i))}else e.className=i||""}function p(e,t,n){try{e[t]=n}catch(e){}}function f(e){return this._listeners[e.type](di.event&&di.event(e)||e)}function h(){for(var e=void 0;e=vi.pop();)di.afterMount&&di.afterMount(e),e.componentDidMount&&e.componentDidMount()}function m(e,t,n,i,o,r){yi++||(xi=null!=o&&void 0!==o.ownerSVGElement,_i=null!=e&&!(bi in e));var a=b(e,t,n,i,r);return o&&a.parentNode!==o&&o.appendChild(a),--yi||(_i=!1,r||h()),a}function b(e,t,n,i,o){var r=e,a=xi;if(null==t&&(t=""),"string"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||o)?e.nodeValue!=t&&(e.nodeValue=t):(r=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(r,e),w(e,!0))),r[bi]=!0,r;if("function"==typeof t.nodeName)return A(e,t,n,i);if(xi="svg"===t.nodeName||"foreignObject"!==t.nodeName&&xi,(!e||!s(e,String(t.nodeName)))&&(r=d(String(t.nodeName),xi),e)){for(;e.firstChild;)r.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(r,e),w(e,!0)}var c=r.firstChild,l=r[bi]||(r[bi]={}),u=t.children;return!_i&&u&&1===u.length&&"string"==typeof u[0]&&null!=c&&void 0!==c.splitText&&null==c.nextSibling?c.nodeValue!=u[0]&&(c.nodeValue=u[0]):(u&&u.length||null!=c)&&g(r,u,n,i,_i||null!=l.dangerouslySetInnerHTML),y(r,t.attributes,l),xi=a,r}function g(e,t,n,i,o){var r=e.childNodes,s=[],c={},d=0,u=0,p=r.length,f=0,h=t?t.length:0,m=void 0,g=void 0,v=void 0,y=void 0;if(0!==p)for(var x=0;x<p;x++){var _=r[x],C=_[bi],k=h&&C?_._component?_._component.__key:C.key:null;null!=k?(d++,c[k]=_):(C||(void 0!==_.splitText?!o||_.nodeValue.trim():o))&&(s[f++]=_)}if(0!==h)for(var S=0;S<h;S++){v=t[S],y=null;var A=v.key;if(null!=A)d&&void 0!==c[A]&&(y=c[A],c[A]=void 0,d--);else if(!y&&u<f)for(m=u;m<f;m++)if(void 0!==s[m]&&a(g=s[m],v,o)){y=g,s[m]=void 0,m===f-1&&f--,m===u&&u++;break}y=b(y,v,n,i),y&&y!==e&&(S>=p?e.appendChild(y):y!==r[S]&&(y===r[S+1]?l(r[S]):e.insertBefore(y,r[S]||null)))}if(d)for(var T in c)void 0!==c[T]&&w(c[T],!1);for(;u<=f;)void 0!==(y=s[f--])&&w(y,!1)}function w(e,t){var n=e._component;n?T(n):(null!=e[bi]&&e[bi].ref&&e[bi].ref(null),!1!==t&&null!=e[bi]||l(e),v(e))}function v(e){for(e=e.lastChild;e;){var t=e.previousSibling;w(e,!0),e=t}}function y(e,t,n){var i=void 0;for(i in n)t&&null!=t[i]||null==n[i]||u(e,i,n[i],n[i]=void 0,xi);for(i in t)"children"===i||"innerHTML"===i||i in n&&t[i]===("value"===i||"checked"===i?e[i]:n[i])||u(e,i,n[i],n[i]=t[i],xi)}function x(e){var t=e.constructor.name;(Ci[t]||(Ci[t]=[])).push(e)}function _(e,t,n){var i=Ci[e.name],o=void 0;if(e.prototype&&e.prototype.render?(o=new e(t,n),I.call(o,t,n)):(o=new I(t,n),o.constructor=e,o.render=C),i)for(var r=i.length;r--;)if(i[r].constructor===e){o.nextBase=i[r].nextBase,i.splice(r,1);break}return o}function C(e,t,n){return this.constructor(e,n)}function k(e,t,n,i,r){e._disable||(e._disable=!0,(e.__ref=t.ref)&&delete t.ref,(e.__key=t.key)&&delete t.key,!e.base||r?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,i),i&&i!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=i),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,n!==pi&&(n!==fi&&!1===di.syncComponentUpdates&&e.base?o(e):S(e,fi,r)),e.__ref&&e.__ref(e))}function S(e,t,n,o){if(!e._disable){var r=e.props,a=e.state,s=e.context,d=e.prevProps||r,l=e.prevState||a,u=e.prevContext||s,p=e.base,f=e.nextBase,b=p||f,g=e._component,v=!1,y=void 0,x=void 0,C=void 0;if(p&&(e.props=d,e.state=l,e.context=u,t!==hi&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(r,a,s)?v=!0:e.componentWillUpdate&&e.componentWillUpdate(r,a,s),e.props=r,e.state=a,e.context=s),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!v){y=e.render(r,a,s),e.getChildContext&&(s=i(i({},s),e.getChildContext()));var A=y&&y.nodeName,I=void 0,R=void 0;if("function"==typeof A){var P=c(y);x=g,x&&x.constructor===A&&P.key==x.__key?k(x,P,fi,s,!1):(I=x,e._component=x=_(A,P,s),x.nextBase=x.nextBase||f,x._parentComponent=e,k(x,P,pi,s,!1),S(x,fi,n,!0)),R=x.base}else C=b,I=g,I&&(C=e._component=null),(b||t===fi)&&(C&&(C._component=null),R=m(C,y,s,n||!p,b&&b.parentNode,!0));if(b&&R!==b&&x!==g){var M=b.parentNode;M&&R!==M&&(M.replaceChild(R,b),I||(b._component=null,w(b,!1)))}if(I&&T(I),e.base=R,R&&!o){for(var O=e,E=e;E=E._parentComponent;)(O=E).base=R;R._component=O,R._componentConstructor=O.constructor}}if(!p||n?vi.unshift(e):v||(h(),e.componentDidUpdate&&e.componentDidUpdate(d,l,u),di.afterUpdate&&di.afterUpdate(e)),null!=e._renderCallbacks)for(;e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);yi||o||h()}}function A(e,t,n,i){for(var o=e&&e._component,r=o,a=e,s=o&&e._componentConstructor===t.nodeName,d=s,l=c(t);o&&!d&&(o=o._parentComponent);)d=o.constructor===t.nodeName;return o&&d&&(!i||o._component)?(k(o,l,mi,n,i),e=o.base):(r&&!s&&(T(r),e=a=null),o=_(t.nodeName,l,n),e&&!o.nextBase&&(o.nextBase=e,a=null),k(o,l,fi,n,i),e=o.base,a&&e!==a&&(a._component=null,w(a,!1))),e}function T(e){di.beforeUnmount&&di.beforeUnmount(e);var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?T(n):t&&(t[bi]&&t[bi].ref&&t[bi].ref(null),e.nextBase=t,l(t),x(e),v(t)),e.__ref&&e.__ref(null)}function I(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{}}function R(e,t,n){return m(n,e,{},!1,t,!1)}function P(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return function(){for(var t=arguments.length,i=Array(t),o=0;o<t;o++)i[o]=arguments[o];return e.apply(void 0,n.concat(i))}}function M(e,t){return(new Date).getTime()-e.getTime()>t}function O(e){var t=Wi(e,"page.invitation");if(!t)return null;var n=la(e),i=Yc(e,n),o=t.type;return Rc===o?Nc(n,t,i):Tc===o?Bc(n,t):Pc===o?Wc(n,t):null}function E(e){var t=Wi(e,"page.invitation.type");return t&&t===Rc?O(e):null}function N(e,t){for(var n=e.split(Od),i=e.match(Od),o=new Array(2*n.length-1),r=0;r<n.length;r+=1)o[2*r]=n[r],r!==n.length-1&&(o[2*r+1]=t(i[r],r,i));return o}function W(e){var t=e.length>0?e[e.length-1].div_id:null;if(t&&Ii.body&&!Ii.getElementById(t)){var n=Ii.getElementsByTagName("head")[0];if(n)for(var i=n.getElementsByTagName("script"),o=0;o<i.length;o+=1)if(/var\s+Comm100API/.test(i[o].innerHTML)){var r=Ii.createElement("div");r.id=t,Ii.body.appendChild(r);break}}}function B(){Oi.onReady&&Oi.onReady();var e=Oi.onReady;Object.defineProperty(Oi,"onReady",{get:function(){return e},set:function(t){"function"==typeof t&&t(),e=t}})}function D(e){var t=Al.call(e,Il),n=e[Il];try{e[Il]=void 0}catch(e){}var i=Tl.call(e);return t?e[Il]=n:delete e[Il],i}function z(e){return Pl.call(e)}function j(e){return null==e?void 0===e?Ol:Ml:El&&El in Object(e)?D(e):z(e)}function q(e){return null!=e&&"object"==(void 0===e?"undefined":Dt(e))}function L(e){if(!q(e)||j(e)!=Wl)return!1;var t=Nl(e);if(null===t)return!0;var n=jl.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&zl.call(n)==ql}function V(e,t,n){function i(){f===p&&(f=p.slice())}function o(){return u}function r(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return i(),f.push(e),function(){if(t){t=!1,i();var n=f.indexOf(e);f.splice(n,1)}}}function a(e){if(!L(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(h)throw new Error("Reducers may not dispatch actions.");try{h=!0,u=l(u,e)}finally{h=!1}for(var t=p=f,n=0;n<t.length;n++)t[n]();return e}function s(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");l=e,a({type:Vl.INIT})}function c(){var e,t=r;return e={subscribe:function(e){function n(){e.next&&e.next(o())}if("object"!==(void 0===e?"undefined":Dt(e)))throw new TypeError("Expected the observer to be an object.");return n(),{unsubscribe:t(n)}}},e[Ll]=function(){return this},e}var d;if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(V)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var l=e,u=t,p=[],f=p,h=!1;return a({type:Vl.INIT}),d={dispatch:a,subscribe:r,getState:o,replaceReducer:s},d[Ll]=c,d}function F(e,t){var n=t&&t.type;return"Given action "+(n&&'"'+n.toString()+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state.'}function U(e){Object.keys(e).forEach(function(t){var n=e[t];if(void 0===n(void 0,{type:Vl.INIT}))throw new Error('Reducer "'+t+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');if(void 0===n(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+Vl.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.')})}function H(e,t){return function(){return t(e.apply(void 0,arguments))}}function G(e,t){if("function"==typeof e)return H(e,t);if("object"!==(void 0===e?"undefined":Dt(e))||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":void 0===e?"undefined":Dt(e))+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(e),i={},o=0;o<n.length;o++){var r=n[o],a=e[r];"function"==typeof a&&(i[r]=H(a,t))}return i}function Y(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return function(e){return e};if(1===t.length)return t[0];var i=t[t.length-1],o=t.slice(0,-1);return function(){return o.reduceRight(function(e,t){return t(e)},i.apply(void 0,arguments))}}function Q(e){return function(t){var n=t.dispatch,i=t.getState;return function(t){return function(o){return"function"==typeof o?o(n,i,e):t(o)}}}}function J(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function X(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function Z(e,t,n){Z.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function $(e,t){$.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function K(e,t){K.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function ee(e,t,n){ee.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function te(e,t,n){var i=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,i),e}function ne(e){var t=void 0===e?"undefined":Dt(e);return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function ie(e,t,n,i,o,r,a){o=o||[],a=a||[];var s=o.slice(0);if(void 0!==r){if(i){if("function"==typeof i&&i(s,r))return;if("object"===(void 0===i?"undefined":Dt(i))){if(i.prefilter&&i.prefilter(s,r))return;if(i.normalize){var c=i.normalize(s,r,e,t);c&&(e=c[0],t=c[1])}}}s.push(r)}"regexp"===ne(e)&&"regexp"===ne(t)&&(e=e.toString(),t=t.toString());var d=void 0===e?"undefined":Dt(e),l=void 0===t?"undefined":Dt(t),u="undefined"!==d||a&&a[a.length-1].lhs&&a[a.length-1].lhs.hasOwnProperty(r),p="undefined"!==l||a&&a[a.length-1].rhs&&a[a.length-1].rhs.hasOwnProperty(r);if(!u&&p)n(new $(s,t));else if(!p&&u)n(new K(s,e));else if(ne(e)!==ne(t))n(new Z(s,e,t));else if("date"===ne(e)&&e-t!=0)n(new Z(s,e,t));else if("object"===d&&null!==e&&null!==t)if(a.filter(function(t){return t.lhs===e}).length)e!==t&&n(new Z(s,e,t));else{if(a.push({lhs:e,rhs:t}),Array.isArray(e)){var f;e.length;for(f=0;f<e.length;f++)f>=t.length?n(new ee(s,f,new K(void 0,e[f]))):ie(e[f],t[f],n,i,s,f,a);for(;f<t.length;)n(new ee(s,f,new $(void 0,t[f++])))}else{var h=Object.keys(e),m=Object.keys(t);h.forEach(function(o,r){var c=m.indexOf(o);c>=0?(ie(e[o],t[o],n,i,s,o,a),m=te(m,c)):ie(e[o],void 0,n,i,s,o,a)}),m.forEach(function(e){ie(void 0,t[e],n,i,s,e,a)})}a.length=a.length-1}else e!==t&&("number"===d&&isNaN(e)&&isNaN(t)||n(new Z(s,e,t)))}function oe(e,t,n,i){return i=i||[],ie(e,t,function(e){e&&i.push(e)},n),i.length?i:void 0}function re(e,t,n){if(n.path&&n.path.length){var i,o=e[t],r=n.path.length-1;for(i=0;i<r;i++)o=o[n.path[i]];switch(n.kind){case"A":re(o[n.path[i]],n.index,n.item);break;case"D":delete o[n.path[i]];break;case"E":case"N":o[n.path[i]]=n.rhs}}else switch(n.kind){case"A":re(e[t],n.index,n.item);break;case"D":e=te(e,t);break;case"E":case"N":e[t]=n.rhs}return e}function ae(e,t,n){if(e&&t&&n&&n.kind){for(var i=e,o=-1,r=n.path?n.path.length-1:0;++o<r;)void 0===i[n.path[o]]&&(i[n.path[o]]="number"==typeof n.path[o]?[]:{}),i=i[n.path[o]];switch(n.kind){case"A":re(n.path?i[n.path[o]]:i,n.index,n.item);break;case"D":delete i[n.path[o]];break;case"E":case"N":i[n.path[o]]=n.rhs}}}function se(e,t,n){if(n.path&&n.path.length){var i,o=e[t],r=n.path.length-1;for(i=0;i<r;i++)o=o[n.path[i]];switch(n.kind){case"A":se(o[n.path[i]],n.index,n.item);break;case"D":case"E":o[n.path[i]]=n.lhs;break;case"N":delete o[n.path[i]]}}else switch(n.kind){case"A":se(e[t],n.index,n.item);break;case"D":case"E":e[t]=n.lhs;break;case"N":e=te(e,t)}return e}function ce(e,t,n){if(e&&t&&n&&n.kind){var i,o,r=e;for(o=n.path.length-1,i=0;i<o;i++)void 0===r[n.path[i]]&&(r[n.path[i]]={}),r=r[n.path[i]];switch(n.kind){case"A":se(r[n.path[i]],n.index,n.item);break;case"D":case"E":r[n.path[i]]=n.lhs;break;case"N":delete r[n.path[i]]}}}function de(e,t,n){if(e&&t){ie(e,t,function(i){n&&!n(e,t,i)||ae(e,t,i)})}}function le(e){var t=e.fields.entities,n=Object.keys(t).reduce(function(e,n){var i=e,o=t[n];return i[n]=Object.assign({},o,{value:null,isFocused:!1,isErrorShowed:!1}),delete i[n].error,i},{});return Object.assign({},e,{fields:Object.assign({},e.fields,{entities:n})})}function ue(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=e.getState(),o=Xc(i),r=Object.assign({},o,t);if(!jh(r,o)){n&&e.dispatch(lf({customVariableResult:r}));var a=qh(r,o);Object.keys(a).length>0&&e.dispatch(Sh(a))}}function pe(e){return e.contentType?e.contentType:e.getResponseHeader?e.getResponseHeader("content-type"):null}function fe(e,t){if(t){var n=function(){e.abort()};e.upload?e.upload.addEventListener("progress",function(e){var i=e.lengthComputable?Math.round(100*e.loaded/e.total):void 0;t(i,n)},!1):t(void 0,n)}}function he(e){return/\bjson\b/gi.test(pe(e))?JSON.parse(e.responseText):e.responseText}function me(){if("withCredentials"in new XMLHttpRequest)return new XMLHttpRequest;if(window.XDomainRequest)return new window.XDomainRequest;throw new Error("No CORS support.")}function be(e,t,n){if(window.XDomainRequest&&e instanceof window.XDomainRequest&&/^https?:/.test(n)){var i=Ri.href.toString().match(/^(https?):/)[1];return void e.open(t,i+n.substr(n.indexOf(":")),!0)}e.open(t,n,!0)}function ge(e,t,n,i){return new Promise(function(o,r){var a=me(),s=function(){return o({url:t,input:n,output:he(a)})},c=function(e,i){return r({url:t,input:n,error:{code:e,message:i,statusCode:a.status}})},d=P(c,qm);be(a,e,t),a.withCredentials=e!==Lm,fe(a,i),a.onload=function(){null==a.status||a.status>=200&&a.status<300?s():d("http error "+a.status)},a.onabort=function(){return d("")},a.ontimeout=function(){return d("request timeout")},a.onerror=function(){return d("network error")},a.onprogress=function(){},null!=window.FormData&&n instanceof window.FormData?(a.timeout=zh,a.send(n)):(a.timeout=Dh,a.send(JSON.stringify(n)))})}function we(e,t,n){var i,o=e.dispatch,r=e.getState,a=t.input,s=t.output,c=r(),d=(i={},i[nb.getConfig]=function(e){e.features&&Eu(!!e.features.useSessionCookie),o(lf(e.customVaraibles?e:Ni(e,{customVariableResult:Yo(c)?Xc(c):Sd(e.customVariables)}))),o(_h()).then(function(){o(qp()),Yo(c)&&(o(Jp(la(r()))),o($p()))})},i[nb.getChatWindowConfig]=function(e){o(lf(Ni(e,{features:Ni(c.configuration.features,e.features)})))},i[nb.getCustomVariables]=function(e){var t="product service",n=["name","email","phone","company",t],i=ao(e,n),r=i[0],a=i[1];r[t]&&(r.product=r[t],delete r[t]);var s=Uc(c).map(function(e){return e.label}),d=ao(a,s),l=d[0];o(gm(jt({},r,{custom:l})))},i[nb.getChatButton]=function(e){var t=Ba(c);t&&o(df(e.id)),o(pf({id:e.id,entity:Ni(e,{divId:vl(e.id)}),fetchStatus:Ro})),t&&sm("livechat.dynamicCampaign.change",e.id),ib(o,r(),e.id).then(function(e){t&&o(ah(e.id))})},i[nb.checkManualInvitation]=function(e){if(e&&!Dc(c)&&ha(c)===Fo){var t=function(){var t=jt({},e,{isManual:!0});o(Up(t)),sm("livechat.invitation.display",t)};e.type===Ic||e.type===Rc?o(Ph()).then(t):t()}},i[nb.confirmAutoInvitation]=function(e){if(e&&!Dc(c)&&ha(c)===Fo){var t=function(){var t=jt({},e,{isManual:!1});o(Up(t)),sm("livechat.invitation.display",t)};e.type===Ic?o(Ph()).then(t):t()}},i[nb.checkAutoInvitation]=function(e){null!=e&&e.forEach(function(e){var t=e.id,n=e.delay;setTimeout(function(){ha(r())===Fo&&o(uh(Cr(Ba(c)?0:la(r()),t)))},1e3*n)})},i[nb.getIfOnline]=function(e){var t=e.campaignId,n=e.ifOnline;o(Fp(t,n))},i[nb.checkIfOnline]=function(e){var t=e.campaignId,n=e.ifOnline;o(Fp(t,n))},i[nb.batchAction]=function(e){for(var t=0;t<e.length;t+=1)we({dispatch:o,getState:r},{input:a.actions[t],output:e[t]},n)},i[nb.newVisitor]=function(e){var t=e.visitorId,n=e.visitorGuid;o(Hp(Object.assign({guid:n},Go(c)?{id:t}:{standbyId:t})))},i[nb.getDynamicCampaign]=function(e){e!==la(c)&&o(Ih(e))},i[nb.pageVisit]=function(){var e=la(r());Object.keys(r().page.buttons).forEach(function(t){var n=+t;0!==n&&n!==e&&o(Ih(n))}),nr(r())&&tb(fd(r()),ba(r()))},i[nb.requestChat]=function(e){o(Hp(Go(c)?{id:e.visitorId}:{standbyId:e.visitorId})),Dm(o,r(),e)},i[nb.getChatMessages]=function(e){Da(r())&&0!==e.length&&(jm(o,e),o(_f(e)))},i[nb.submitRating]=function(){var e=Cd(c,Ym);o(Cf(e))},i[nb.emailTranscript]=function(e){if(e){var t=Cd(c,Gm).replace(Hm,a.email);o(Cf(t))}},i[nb.getAgents]=function(e){return e&&e.forEach(function(e){return o(hf({id:e.id,entity:e,fetchStatus:Ro}))})},i[nb.getDepartments]=function(e){return e&&e.forEach(function(e){return o(mf({id:e.id,entity:e,fetchStatus:Ro}))})},i[nb.submitPostChat]=function(){return o(yf(So))},i[nb.endChat]=function(){o(Nf())},i[nb.checkManuallyInvited]=function(e){e||o(tf())},i[nb.getChatQueue]=function(e){o(Jf({position:e.position,waitTime:e.est}))},i[nb.restoreChat]=function(e){if(e&&Cc(r(),la(r()))){o(Jp(la(r()))),o(qf(e.id,e.guid));var t=Ju(e.guid);t&&(t.windowStatus===Lo&&o(ef()),t.maxReadId&&o(nh(+t.maxReadId)))}},i);null!=a&&null!=d[a.type]&&d[a.type](s.payload)}function ve(e){return function(){return e}}function ye(e,t,n,i,o,r,a,s){if(ab(t),!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[n,i,o,r,a,s],l=0;c=new Error(t.replace(/%s/g,function(){return d[l++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}}function xe(e,t,n,i){var o=Nb.defaultView,r=void 0,a=void 0,s=void 0,c=function(t){return a({url:e,input:n,output:t})},d=function(t,i){return s({url:e,input:n,error:{code:t,message:i}})},l=P(d,qm),u=t.formId,p=Nb.getElementById(u),f=p.contentWindow.document,h=f.getElementById("form");h.action=e+"&formId="+u;var m=f.createElement("input");m.type="hidden",m.name="json",m.value=JSON.stringify(n),h.appendChild(m);var b=function(t){if(!(e.indexOf(t.origin)<0)){var n=void 0;try{n=JSON.parse(t.data)}catch(e){n={}}n.formId===u&&c(n.data)}};o.addEventListener("message",b);var g=function(){r=setTimeout(P(l,"submit failed"),200)};p.addEventListener("load",g);var w=setTimeout(P(l,"submit timeout"),zh),v=function(e){return function(t){clearTimeout(r),clearTimeout(w),p.removeEventListener("load",g),o.removeEventListener("message",b),p.parentNode.removeChild(p),e(t)}};return new Promise(function(e,t){a=v(e),s=v(t),h.submit(),i&&i(null,function(){p.stop?p.stop():f.execCommand("stop"),l("")})})}function _e(e,t,n){function i(t){e.postMessage(JSON.stringify(t),a)}function o(e){var t=function(t){t.origin===a&&e(t)};return(n?Ti:window).addEventListener("message",t),function(){return(n?Ti:window).removeEventListener("message",t)}}var r=/^file:\/\//i.test(t),a=r?"*":t.match(/^[^:]+:\/\/[^\/]+/)[0];return{dispatch:i,subscribe:o}}function Ce(e){var t=e.filter(function(e){return"audio"===e.kind}),n=e.filter(function(e){return"video"===e.kind});for(e=[];t.length||n.length;)t.length&&e.push(t.shift()),n.length&&e.push(n.shift());return e}function ke(e,t){var n=!1;return e=JSON.parse(JSON.stringify(e)),e.filter(function(e){if(e&&(e.urls||e.url)){var i=e.urls||e.url;e.url&&e.urls;var o="string"==typeof i;return o&&(i=[i]),i=i.filter(function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||n?0===e.indexOf("stun:")&&t>=14393:(n=!0,!0)}),delete e.url,e.urls=o?i[0]:i,!!i.length}return!1})}function Se(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},i=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},o=function(e,t,n,o){var r=i(e.parameters.apt,n),a=i(t.parameters.apt,o);return r&&a&&r.name.toLowerCase()===a.name.toLowerCase()};return e.codecs.forEach(function(i){for(var r=0;r<t.codecs.length;r++){var a=t.codecs[r];if(i.name.toLowerCase()===a.name.toLowerCase()&&i.clockRate===a.clockRate){if("rtx"===i.name.toLowerCase()&&i.parameters&&a.parameters.apt&&!o(i,a,e.codecs,t.codecs))continue;a=JSON.parse(JSON.stringify(a)),a.numChannels=Math.min(i.numChannels,a.numChannels),n.codecs.push(a),a.rtcpFeedback=a.rtcpFeedback.filter(function(e){for(var t=0;t<i.rtcpFeedback.length;t++)if(i.rtcpFeedback[t].type===e.type&&i.rtcpFeedback[t].parameter===e.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(e){for(var i=0;i<t.headerExtensions.length;i++){var o=t.headerExtensions[i];if(e.uri===o.uri){n.headerExtensions.push(o);break}}}),n}function Ae(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function Te(e){function t(){null==s&&(s=[y],p&&p(s))}function n(){clearInterval(c),b=!1,s=null,m=0}function i(){n(),p=null,d=null,u=null}function o(){b&&u&&u()}function r(e){w.send(JSON.stringify(e))}function a(){try{i(),w.onerror=null,w.close()}catch(e){}}var s,c,d,l,u,p,f=e.url,h=e.chat,m=0,b=!1,g=-1===f.indexOf("localhost")?"wss://":"ws://",w=new WebSocket(g+f+"?chatId="+h),v=0;w.onopen=function(){c=setInterval(function(){v++,w.send("ping"),v>=100&&clearInterval(c)},2e4)},w.onmessage=function(e){var n=JSON.parse(e.data);null!=n.count?(0===m&&n.count>1&&(t(),r({start:1})),(m=n.count)<2&&(b=!1)):n.start?(t(),b=!0,o()):n.s?(n.s,null==s&&(s=n.d?n.d.iceServers||[]:[],s.push(y),p&&p(s))):d&&d(n)},w.onclose=function(){i()},w.onerror=function(e){i(),l&&l()};var y={urls:"stun:stun.l.google.com:19302"};this.send=r,this.close=a,this.onRemoteStart=function(e){u=e,o()},this.onMessage=function(e){d=e},this.onGetIceServers=function(e){p=e,s&&e&&e(s)},this.onError=function(e){l=e}}function Ie(){function e(e){c=e,c?o().then(function(e){s=e,t(),a=setInterval(function(){o().then(i)},1e3)}):t()}function t(){a&&(clearInterval(a),a=null)}function n(e,t){for(var n=0;n<e.length;n++){if(e[n].kind==t)return!0}return!1}function i(e){try{if(s||(s=e),e.audio==s.audio&&e.video==s.video)return;s=e,c&&c(e)}catch(e){}}function o(){return Pi.mediaDevices.enumerateDevices().then(function(e){return Promise.resolve({audio:n(e,"audioinput"),video:n(e,"videoinput")})})}function r(){c=null,Pi.mediaDevices.ondevicechange=null,t()}var a,s,c;this.onDeviceChange=e,this.getDevices=function(){return o().then(function(e){return i(e),Promise.resolve(e)})},this.reset=r}function Re(e){function t(t){t?c.onDeviceChange(function(n){s.audio&&!n.audio&&(s.audio=!1),s.video&&!n.video&&(s.video=!1),s.audio==e.audio&&s.video==e.video||(n.audio&&!s.audio||n.video&&!s.video)&&i(n).then(t)}):c.onDeviceChange(null)}function n(e){return o(a),Pi.mediaDevices.getUserMedia({audio:e.audio,video:!!e.video&&{facingMode:"user"}}).then(function(e){return a=e,Promise.resolve(e)})}function i(t){var i={audio:e.audio&&t.audio,video:e.video&&t.video};return i.audio||i.video?n(i).then(function(e){return s=i,Promise.resolve(e)}):(s=i,Promise.resolve())}function o(e){e&&e.getTracks().forEach(function(e){e.stop()})}function r(){s={audio:!1,video:!1},o(a),a=null,c.reset()}var a,s={audio:!1,video:!1},c=new Ie;this.ifRequestVideoDevice=function(){return e.video},this.request=function(){return c.getDevices().then(i)},this.onGetDevice=t,this.getStream=function(){return a},this.getDevices=function(){return c.getDevices()},this.reset=r}function Pe(){if(/Android/gi.test(Mi)){var e,t=function(e,t,n){var i=Ii.createElement("source");i.src=n,i.type="video/"+t,e.appendChild(i)},n={WebM:"data:video/webm;base64,GkXfo0AgQoaBAUL3gQFC8oEEQvOBCEKCQAR3ZWJtQoeBAkKFgQIYU4BnQI0VSalmQCgq17FAAw9CQE2AQAZ3aGFtbXlXQUAGd2hhbW15RIlACECPQAAAAAAAFlSua0AxrkAu14EBY8WBAZyBACK1nEADdW5khkAFVl9WUDglhohAA1ZQOIOBAeBABrCBCLqBCB9DtnVAIueBAKNAHIEAAIAwAQCdASoIAAgAAUAmJaQAA3AA/vz0AAA=",MP4:"data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAAG21kYXQAAAGzABAHAAABthADAowdbb9/AAAC6W1vb3YAAABsbXZoZAAAAAB8JbCAfCWwgAAAA+gAAAAAAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAIVdHJhawAAAFx0a2hkAAAAD3wlsIB8JbCAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAIAAAACAAAAAABsW1kaWEAAAAgbWRoZAAAAAB8JbCAfCWwgAAAA+gAAAAAVcQAAAAAAC1oZGxyAAAAAAAAAAB2aWRlAAAAAAAAAAAAAAAAVmlkZW9IYW5kbGVyAAAAAVxtaW5mAAAAFHZtaGQAAAABAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAAEcc3RibAAAALhzdHNkAAAAAAAAAAEAAACobXA0dgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAIAAgASAAAAEgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABj//wAAAFJlc2RzAAAAAANEAAEABDwgEQAAAAADDUAAAAAABS0AAAGwAQAAAbWJEwAAAQAAAAEgAMSNiB9FAEQBFGMAAAGyTGF2YzUyLjg3LjQGAQIAAAAYc3R0cwAAAAAAAAABAAAAAQAAAAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAEAAAABAAAAFHN0c3oAAAAAAAAAEwAAAAEAAAAUc3RjbwAAAAAAAAABAAAALAAAAGB1ZHRhAAAAWG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAK2lsc3QAAAAjqXRvbwAAABtkYXRhAAAAAQAAAABMYXZmNTIuNzguMw=="},i=function(){var e=Ii.createElement("Video");return e.setAttribute("loop",""),t(e,"webm",n.WebM),t(e,"mp4",n.MP4),e}();this.enable=function(){try{i.play(),e&&clearInterval(e),e=setInterval(function(){i.play()},3e3)}catch(e){}},this.disable=function(){try{i.pause(),e&&clearInterval(e)}catch(e){}}}else this.enable=function(){},this.disable=function(){}}function Me(e){function t(e,t){var i=e.peerConn,o=e.signalingChannel;t.offer&&i.setRemoteDescription(new RTCSessionDescription(t.offer)).then(function(){return i.createAnswer()}).then(function(e){return i.setLocalDescription(e)}).then(function(){return o.send({answer:i.localDescription}),Promise.resolve()}).catch(function(t){n(e,!0,!0)}),t.answer&&i.setRemoteDescription(new RTCSessionDescription(t.answer)).then(function(){return Promise.resolve()}).catch(function(t){n(e,!0,!0)}),t.candidate&&i.addIceCandidate(new RTCIceCandidate(t.candidate)).catch(function(){n(e,!0,!0)}),t.restart&&n(e,!1,!1)}function n(e,t,n){n&&A++,!n||A<=8?(t&&e.signalingChannel.send({restart:1}),l(e),u()):(c(),l(e),f("error","P2PChat Error: restart more than 5 times"))}function i(e){var t=e.peerConn,i=e.signalingChannel;t.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:v.ifRequestVideoDevice()}).then(function(e){return t.setLocalDescription(e)}).then(function(){return i.send({offer:t.localDescription}),Promise.resolve()}).catch(function(t){n(e,!0,!0)})}function o(e){x.autoplay=!0,x.muted=!0,x.srcObject=e}function r(e){return c(),e||(S=new Pe,S.enable()),v=new Re({audio:!0,video:e}),v.request().then(function(e){return x&&o(e),Promise.resolve()})}function a(){return conn.peerConn?(conn.peerConn.getStats().then(function(){}),conn.peerConn.getStats()):Promise.resolve()}function s(e){try{e&&(e.srcObject=null)}catch(e){}}function c(){v&&v.reset(),s(x)}function d(){g&&h(g),g=null,s(_)}function l(e){if(v&&v.onGetDevice(null),e&&(e.peerConn||e.signalingChannel)){d();try{var t=e.peerConn;t&&(t.onicecandidate=null,t.oniceconnectionstatechange=null,t.ontrack=null,t.close())}catch(e){}try{e.signalingChannel.close()}catch(e){}e.peerConn=null,e.signalingChannel=null,C=null}}function u(){f("start"),C&&l(C);var e={},r=new Te({chat:y,url:w});e.signalingChannel=r,r.onError(function(){null!=e.peerConn&&"closed"!==e.peerConn.iceConnectionState&&"failed"!==e.peerConn.iceConnectionState||setTimeout(function(){n(e,!1,!0)},3e3)}),
r.onGetIceServers(function(a){var s=new RTCPeerConnection({iceServers:a,iceTransportPolicy:k?"relay":"all"});e.peerConn=s,s.onicecandidate=function(e){null!=e.candidate&&r.send({candidate:e.candidate})},s.oniceconnectionstatechange=function(t){"closed"===s.iceConnectionState?l(e):"failed"===s.iceConnectionState&&n(e,!0,!0)};var c=v.getStream();v.onGetDevice(function(t){o(t),n(e,!0,!1)}),c&&s.addStream(c),s.onaddstream=function(e){g=e.stream,_.autoplay=!0,_.srcObject=g,f("remoteStreamReceived",g)},r.onMessage(P(t,e)),r.onRemoteStart(function(){if(g)return void n(e,!0,!1);i(e)})}),C=e}function p(e){b=e}function f(e,t){b&&b(e,t)}function h(e){e.getTracks().forEach(function(e){e.stop()})}function m(){S&&S.disable(),A=0,c(),l(C)}var b,g,w,v,y=e.chat,x=e.localVideo,_=e.remoteVideo,C=null,k=!1,S=new Pe,A=0;this.requirePermission=r,this.getPeerConnectionStats=a,this.start=function(e,t){w=e,k=t,u()},this.onevent=p,this.stop=m,this.getLocalVideo=function(){return x},this.getRemoteVideo=function(){return _},this.setLocalVideo=function(e){x=e},this.setRemoteVideo=function(e){_=e}}function Oe(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function Ee(e,t){Oe(e,t)||(e.className=e.className+" "+t)}function Ne(e,t){if(Oe(e,t)){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ")}}function We(e){return V(Bh,e,Y(ru,nw))}function Be(){}function De(e){try{throw new Error(e)}catch(e){}}function ze(){fw||(fw=!0,De("<Provider> does not support changing `store` on the fly. It is most likely that you see this error because you updated to Redux 2.x and React Redux 2.x which no longer hot reload reducers automatically. See https://github.com/reactjs/react-redux/releases/tag/v2.0.0 for the migration instructions."))}function je(){var e=[],t=[];return{clear:function(){t=yw,e=yw},notify:function(){for(var n=e=t,i=0;i<n.length;i++)n[i]()},subscribe:function(n){var i=!0;return t===e&&(t=e.slice()),t.push(n),function(){i&&e!==yw&&(i=!1,t===e&&(t=e.slice()),t.splice(t.indexOf(n),1))}}}}function qe(){}function Le(e,t){var n={run:function(i){try{var o=e(t.getState(),i);(o!==n.props||n.error)&&(n.shouldComponentUpdate=!0,n.props=o,n.error=null)}catch(e){n.shouldComponentUpdate=!0,n.error=e}}};return n}function Ve(e){var t,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=o.getDisplayName,a=void 0===r?function(e){return"ConnectAdvanced("+e+")"}:r,s=o.methodName,c=void 0===s?"connectAdvanced":s,d=o.renderCountProp,l=void 0===d?void 0:d,u=o.shouldHandleStateChanges,p=void 0===u||u,f=o.storeKey,h=void 0===f?"store":f,m=o.withRef,b=void 0!==m&&m,g=uw(o,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),w=h+"Subscription",v=Cw++,y=(t={},t[h]=aw,t[w]=rw,t),x=(i={},i[w]=rw,i);return function(t){vw("function"==typeof t,"You must pass a component to the function returned by connect. Instead received "+JSON.stringify(t));var i=t.displayName||t.name||"Component",o=a(i),r=dw({},g,{getDisplayName:a,methodName:c,renderCountProp:l,shouldHandleStateChanges:p,storeKey:h,withRef:b,displayName:o,wrappedComponentName:i,WrappedComponent:t}),s=function(i){function a(e,t){cw(this,a);var n=pw(this,i.call(this,e,t));return n.version=v,n.state={},n.renderCount=0,n.store=e[h]||t[h],n.propsMode=Boolean(e[h]),n.setWrappedInstance=n.setWrappedInstance.bind(n),vw(n.store,'Could not find "'+h+'" in either the context or props of "'+o+'". Either wrap the root component in a <Provider>, or explicitly pass "'+h+'" as a prop to "'+o+'".'),n.initSelector(),n.initSubscription(),n}return lw(a,i),a.prototype.getChildContext=function(){var e,t=this.propsMode?null:this.subscription;return e={},e[w]=t||this.context[w],e},a.prototype.componentDidMount=function(){p&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},a.prototype.componentWillReceiveProps=function(e){this.selector.run(e)},a.prototype.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},a.prototype.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=qe,this.store=null,this.selector.run=qe,this.selector.shouldComponentUpdate=!1},a.prototype.getWrappedInstance=function(){return vw(b,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+c+"() call."),this.wrappedInstance},a.prototype.setWrappedInstance=function(e){this.wrappedInstance=e},a.prototype.initSelector=function(){var t=e(this.store.dispatch,r);this.selector=Le(t,this.store),this.selector.run(this.props)},a.prototype.initSubscription=function(){if(p){var e=(this.propsMode?this.props:this.context)[w];this.subscription=new _w(this.store,e,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},a.prototype.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(kw)):this.notifyNestedSubs()},a.prototype.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},a.prototype.isSubscribed=function(){return Boolean(this.subscription)&&this.subscription.isSubscribed()},a.prototype.addExtraProps=function(e){if(!(b||l||this.propsMode&&this.subscription))return e;var t=dw({},e);return b&&(t.ref=this.setWrappedInstance),l&&(t[l]=this.renderCount++),this.propsMode&&this.subscription&&(t[w]=this.subscription),t},a.prototype.render=function(){var e=this.selector;if(e.shouldComponentUpdate=!1,e.error)throw e.error;return n(t,this.addExtraProps(e.props))},a}(I);return s.WrappedComponent=t,s.displayName=o,s.childContextTypes=x,s.contextTypes=y,s.prototype.componentWillUpdate=function(){this.version!==v&&(this.version=v,this.initSelector(),this.subscription&&this.subscription.tryUnsubscribe(),this.initSubscription(),p&&this.subscription.trySubscribe())},ww(s,t)}}function Fe(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!==e&&t!==t}function Ue(e,t){if(Fe(e,t))return!0;if("object"!==(void 0===e?"undefined":sw(e))||null===e||"object"!==(void 0===t?"undefined":sw(t))||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(var o=0;o<n.length;o++)if(!Sw.call(t,n[o])||!Fe(e[n[o]],t[n[o]]))return!1;return!0}function He(e){var t=Mw.call(e,Ew),n=e[Ew];try{e[Ew]=void 0}catch(e){}var i=Ow.call(e);return t?e[Ew]=n:delete e[Ew],i}function Ge(e){return Ww.call(e)}function Ye(e){return null==e?void 0===e?Dw:Bw:zw&&zw in Object(e)?He(e):Ge(e)}function Qe(e){return null!=e&&"object"==(void 0===e?"undefined":sw(e))}function Je(e){if(!Qe(e)||Ye(e)!=qw)return!1;var t=jw(e);if(null===t)return!0;var n=Uw.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Fw.call(n)==Hw}function Xe(e,t,n){Je(e)||De(n+"() in "+t+" must return a plain object. Instead received "+e+".")}function Ze(e){return function(t,n){function i(){return o}var o=e(t,n);return i.dependsOnOwnProps=!1,i}}function $e(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function Ke(e,t){return function(n,i){var o=i.displayName,r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(n,i){r.mapToProps=e,r.dependsOnOwnProps=$e(e);var a=r(n,i);return"function"==typeof a&&(r.mapToProps=a,r.dependsOnOwnProps=$e(a),a=r(n,i)),Xe(a,o,t),a},r}}function et(e){return"function"==typeof e?Ke(e,"mapDispatchToProps"):void 0}function tt(e){return e?void 0:Ze(function(e){return{dispatch:e}})}function nt(e){return e&&"object"===(void 0===e?"undefined":sw(e))?Ze(function(t){return G(e,t)}):void 0}function it(e){return"function"==typeof e?Ke(e,"mapStateToProps"):void 0}function ot(e){return e?void 0:Ze(function(){return{}})}function rt(e,t,n){return dw({},n,e,t)}function at(e){return function(t,n){var i=n.displayName,o=n.pure,r=n.areMergedPropsEqual,a=!1,s=void 0;return function(t,n,c){var d=e(t,n,c);return a?o&&r(d,s)||(s=d):(a=!0,s=d,Xe(s,i,"mergeProps")),s}}}function st(e){return"function"==typeof e?at(e):void 0}function ct(e){return e?void 0:function(){return rt}}function dt(e,t,n){if(!e)throw new Error("Unexpected value for "+t+" in "+n+".");"mapStateToProps"!==t&&"mapDispatchToProps"!==t||e.hasOwnProperty("dependsOnOwnProps")||De("The selector for "+t+" of "+n+" did not specify a value for dependsOnOwnProps.")}function lt(e,t,n,i){dt(e,"mapStateToProps",i),dt(t,"mapDispatchToProps",i),dt(n,"mergeProps",i)}function ut(e,t,n,i){return function(o,r){return n(e(o,r),t(i,r),r)}}function pt(e,t,n,i,o){function r(o,r){return h=o,m=r,b=e(h,m),g=t(i,m),w=n(b,g,m),f=!0,w}function a(){return b=e(h,m),t.dependsOnOwnProps&&(g=t(i,m)),w=n(b,g,m)}function s(){return e.dependsOnOwnProps&&(b=e(h,m)),t.dependsOnOwnProps&&(g=t(i,m)),w=n(b,g,m)}function c(){var t=e(h,m),i=!p(t,b);return b=t,i&&(w=n(b,g,m)),w}function d(e,t){var n=!u(t,m),i=!l(e,h);return h=e,m=t,n&&i?a():n?s():i?c():w}var l=o.areStatesEqual,u=o.areOwnPropsEqual,p=o.areStatePropsEqual,f=!1,h=void 0,m=void 0,b=void 0,g=void 0,w=void 0;return function(e,t){return f?d(e,t):r(e,t)}}function ft(e,t){var n=t.initMapStateToProps,i=t.initMapDispatchToProps,o=t.initMergeProps,r=uw(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),a=n(e,r),s=i(e,r),c=o(e,r);return lt(a,s,c,r.displayName),(r.pure?pt:ut)(a,s,c,e,r)}function ht(e,t,n){for(var i=t.length-1;i>=0;i--){var o=t[i](e);if(o)return o}return function(t,i){throw new Error("Invalid value of type "+(void 0===e?"undefined":sw(e))+" for "+n+" argument when connecting component "+i.wrappedComponentName+".")}}function mt(e,t){return e===t}function bt(e){var t=Ti.ga;if(t)try{for(var n=t.getAll(),i=0;i<n.length;i+=1)t(n[i].b.data.values[":name"]+".send","event",Xw,e,e,0)}catch(e){}else Ti._gaq&&Ti._gaq.push(["_trackEvent",Xw,e,e])}function gt(e){return e}function wt(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function vt(e,t){if(wt(e,t)){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ")}}function yt(e,t){var n=Math.random().toString();return L_(t).then(function(t){return new Promise(function(i,o){var r=Object.assign({meta:n},e);q_[r.meta]={resolve:i,reject:o},t.dispatch(r)})})}function xt(){var e=Ik(wk);return void 0!==e&&null!==e&&""!==e?new Date(+e):null}function _t(){return xk*=2,xk>Math.pow(2,mk.repeat-1)&&(xk=1),Xu(bk,{frequencyLimit:Rk(yk,xk)}),xk}function Ct(){Xu(bk,{frequencyLimit:Rk(vk,gk.join(":"))})}function kt(){_k&&(clearInterval(_k),_k=null)}function St(){kk.forEach(function(e){clearTimeout(e)}),kk=[]}function At(){Sk&&clearTimeout(Sk),Sk=null}function Tt(){Tk(!1),gk=[],St(),At(),Xu(bk,{frequencyLimit:Rk(wk,"")}),Xu(bk,{frequencyLimit:Rk(vk,"")})}function It(){var e=mk.penalty*xk*1e3;Xu(bk,{frequencyLimit:Rk(wk,(new Date).getTime()+e)}),Tk(!0),Sk=setTimeout(Tt,e),_t()}function Rt(){return!!Sk||!(gk.length<=mk.count)&&(It(),!0)}function Pt(){gk.shift(),kk.shift(),Ct()}function Mt(){if(!Sk){gk.push((new Date).getTime()),Ct();var e=setTimeout(Pt,1e3*mk.duration);kk.push(e)}}function Ot(){_k=setInterval(function(){var e=Rt(),t=Math.max(0,Math.floor((xt()-(new Date).getTime())/1e3));e&&t>0?Ck(t):(Ck(0),kt())},1e3)}function Et(e){var t=AS.map(function(t){return t(e)});return function(){t.forEach(function(e){e()})}}!function(e){-1!==navigator.userAgent.indexOf("MSIE 9")&&e.addEventListener("selectionchange",function(){var t=e.activeElement;if("TEXTAREA"===t.tagName||"INPUT"===t.tagName&&"text"===t.type){var n=e.createEvent("CustomEvent");n.initCustomEvent("input",!0,!0,{}),t.dispatchEvent(n)}})}(document);var Nt="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Wt=e(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),Bt=e(function(e){var t=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=t)}),Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zt=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},jt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},qt=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},Lt=function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},Vt=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},Ft=function(e){return"object"===(void 0===e?"undefined":Dt(e))?null!==e:"function"==typeof e},Ut=function(e){if(!Ft(e))throw TypeError(e+" is not an object!");return e},Ht=function(e){try{return!!e()}catch(e){return!0}},Gt=!Ht(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),Yt=Wt.document,Qt=Ft(Yt)&&Ft(Yt.createElement),Jt=function(e){return Qt?Yt.createElement(e):{}},Xt=!Gt&&!Ht(function(){return 7!=Object.defineProperty(Jt("div"),"a",{get:function(){return 7}}).a}),Zt=function(e,t){if(!Ft(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!Ft(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!Ft(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!Ft(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")},$t=Object.defineProperty,Kt=Gt?Object.defineProperty:function(e,t,n){if(Ut(e),t=Zt(t,!0),Ut(n),Xt)try{return $t(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e},en={f:Kt},tn=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},nn=Gt?function(e,t,n){return en.f(e,t,tn(1,n))}:function(e,t,n){return e[t]=n,e},on={}.hasOwnProperty,rn=function(e,t){return on.call(e,t)},an=0,sn=Math.random(),cn=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++an+sn).toString(36))},dn=e(function(e){var t=cn("src"),n=Function.toString,i=(""+n).split("toString");Bt.inspectSource=function(e){return n.call(e)},(e.exports=function(e,n,o,r){var a="function"==typeof o;a&&(rn(o,"name")||nn(o,"name",n)),e[n]!==o&&(a&&(rn(o,t)||nn(o,t,e[n]?""+e[n]:i.join(String(n)))),e===Wt?e[n]=o:r?e[n]?e[n]=o:nn(e,n,o):(delete e[n],nn(e,n,o)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[t]||n.call(this)})}),ln=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e},un=function(e,t,n){if(ln(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,o){return e.call(t,n,i,o)}}return function(){return e.apply(t,arguments)}},pn=function e(t,n,i){var o,r,a,s,c=t&e.F,d=t&e.G,l=t&e.S,u=t&e.P,p=t&e.B,f=d?Wt:l?Wt[n]||(Wt[n]={}):(Wt[n]||{}).prototype,h=d?Bt:Bt[n]||(Bt[n]={}),m=h.prototype||(h.prototype={});d&&(i=n);for(o in i)r=!c&&f&&void 0!==f[o],a=(r?f:i)[o],s=p&&r?un(a,Wt):u&&"function"==typeof a?un(Function.call,a):a,f&&dn(f,o,a,t&e.U),h[o]!=a&&nn(h,o,s),u&&m[o]!=a&&(m[o]=a)};Wt.core=Bt,pn.F=1,pn.G=2,pn.S=4,pn.P=8,pn.B=16,pn.W=32,pn.U=64,pn.R=128;var fn=pn,hn={}.toString,mn=function(e){return hn.call(e).slice(8,-1)},bn=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==mn(e)?e.split(""):Object(e)},gn=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e},wn=function(e){return Object(gn(e))},vn=Math.ceil,yn=Math.floor,xn=function(e){return isNaN(e=+e)?0:(e>0?yn:vn)(e)},_n=Math.min,Cn=function(e){return e>0?_n(xn(e),9007199254740991):0},kn=Array.isArray||function(e){return"Array"==mn(e)},Sn=Wt["__core-js_shared__"]||(Wt["__core-js_shared__"]={}),An=function(e){return Sn[e]||(Sn[e]={})},Tn=e(function(e){var t=An("wks"),n=Wt.Symbol,i="function"==typeof n;(e.exports=function(e){return t[e]||(t[e]=i&&n[e]||(i?n:cn)("Symbol."+e))}).store=t}),In=Tn("species"),Rn=function(e){var t;return kn(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!kn(t.prototype)||(t=void 0),Ft(t)&&null===(t=t[In])&&(t=void 0)),void 0===t?Array:t},Pn=function(e,t){return new(Rn(e))(t)},Mn=function(e,t){var n=1==e,i=2==e,o=3==e,r=4==e,a=6==e,s=5==e||a,c=t||Pn;return function(t,d,l){for(var u,p,f=wn(t),h=bn(f),m=un(d,l,3),b=Cn(h.length),g=0,w=n?c(t,b):i?c(t,0):void 0;b>g;g++)if((s||g in h)&&(u=h[g],p=m(u,g,f),e))if(n)w[g]=p;else if(p)switch(e){case 3:return!0;case 5:return u;case 6:return g;case 2:w.push(u)}else if(r)return!1;return a?-1:o||r?r:w}},On=Tn("unscopables"),En=Array.prototype;void 0==En[On]&&nn(En,On,{});var Nn=function(e){En[On][e]=!0},Wn=Mn(6),Bn="findIndex",Dn=!0;Bn in[]&&Array(1)[Bn](function(){Dn=!1}),fn(fn.P+fn.F*Dn,"Array",{findIndex:function(e){return Wn(this,e,arguments.length>1?arguments[1]:void 0)}}),Nn(Bn);var zn=Mn(5),jn=!0;"find"in[]&&Array(1).find(function(){jn=!1}),fn(fn.P+fn.F*jn,"Array",{find:function(e){return zn(this,e,arguments.length>1?arguments[1]:void 0)}}),Nn("find"),fn(fn.S,"Number",{isNaN:function(e){return e!=e}});var qn=function(e){return bn(gn(e))},Ln=Math.max,Vn=Math.min,Fn=function(e,t){return e=xn(e),e<0?Ln(e+t,0):Vn(e,t)},Un=An("keys"),Hn=function(e){return function(t,n,i){var o,r=qn(t),a=Cn(r.length),s=Fn(i,a);if(e&&n!=n){for(;a>s;)if((o=r[s++])!=o)return!0}else for(;a>s;s++)if((e||s in r)&&r[s]===n)return e||s||0;return!e&&-1}}(!1),Gn=function(e){return Un[e]||(Un[e]=cn(e))}("IE_PROTO"),Yn=function(e,t){var n,i=qn(e),o=0,r=[];for(n in i)n!=Gn&&rn(i,n)&&r.push(n);for(;t.length>o;)rn(i,n=t[o++])&&(~Hn(r,n)||r.push(n));return r},Qn="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Jn=Object.keys||function(e){return Yn(e,Qn)},Xn=Object.getOwnPropertySymbols,Zn={f:Xn},$n={}.propertyIsEnumerable,Kn={f:$n},ei=Object.assign,ti=!ei||Ht(function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=ei({},e)[n]||Object.keys(ei({},t)).join("")!=i})?function(e,t){for(var n=wn(e),i=arguments.length,o=1,r=Zn.f,a=Kn.f;i>o;)for(var s,c=bn(arguments[o++]),d=r?Jn(c).concat(r(c)):Jn(c),l=d.length,u=0;l>u;)a.call(c,s=d[u++])&&(n[s]=c[s]);return n}:ei;fn(fn.S+fn.F,"Object",{assign:ti});var ni=e(function(e){!function(t){function n(){}function i(e,t){return function(){e.apply(t,arguments)}}function o(e){if("object"!==Dt(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(e,this)}function r(e,t){for(;3===e._state;)e=e._value;if(0===e._state)return void e._deferreds.push(t);e._handled=!0,o._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._state?a:s)(t.promise,e._value);var i;try{i=n(e._value)}catch(e){return void s(t.promise,e)}a(t.promise,i)})}function a(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===(void 0===t?"undefined":Dt(t))||"function"==typeof t)){var n=t.then;if(t instanceof o)return e._state=3,e._value=t,void c(e);if("function"==typeof n)return void l(i(n,t),e)}e._state=1,e._value=t,c(e)}catch(t){s(e,t)}}function s(e,t){e._state=2,e._value=t,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&o._immediateFn(function(){e._handled||o._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)r(e,e._deferreds[t]);e._deferreds=null}function d(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function l(e,t){var n=!1;try{e(function(e){n||(n=!0,a(t,e))},function(e){n||(n=!0,s(t,e))})}catch(e){if(n)return;n=!0,s(t,e)}}var u=setTimeout;o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){var i=new this.constructor(n);return r(this,new d(e,t,i)),i},o.all=function(e){var t=Array.prototype.slice.call(e);return new o(function(e,n){function i(r,a){try{if(a&&("object"===(void 0===a?"undefined":Dt(a))||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){i(r,e)},n)}t[r]=a,0==--o&&e(t)}catch(e){n(e)}}if(0===t.length)return e([]);for(var o=t.length,r=0;r<t.length;r++)i(r,t[r])})},o.resolve=function(e){return e&&"object"===(void 0===e?"undefined":Dt(e))&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(e){return new o(function(t,n){n(e)})},o.race=function(e){return new o(function(t,n){for(var i=0,o=e.length;i<o;i++)e[i].then(t,n)})},o._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){u(e,0)},o._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console},o._setImmediateFn=function(e){o._immediateFn=e},o._setUnhandledRejectionFn=function(e){o._unhandledRejectionFn=e},e.exports?e.exports=o:t.Promise||(t.Promise=o)}(Nt)});window.Promise||(window.Promise=ni);var ii=e(function(e,t){function n(e,t){function n(r,a){if(e(r,a))return!0;if(Array.isArray(r))return!(!Array.isArray(a)||r.length!==a.length)&&!!r.every(function(e,t){return n(e,a[t])});if(Array.isArray(a))return!1;if("object"===(void 0===r?"undefined":i(r))){if("object"!==(void 0===a?"undefined":i(a)))return!1;var s=null===r,c=null===a;if(s||c)return s===c;var d=Object.keys(r),l=Object.keys(a);if(d.length!==l.length)return!1;var u=t?n:e;return!!d.every(function(e){return o(r,e)&&o(a,e)&&u(r[e],a[e])})}return!1}return n}t.__esModule=!0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=n;var o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}),oi=e(function(e,t){function n(e,t){function n(e){var n=o.findIndex(function(n){return t(e,n.key)});if(n>-1){var i=o[n];return n>0&&(o.slice(n,1),o.unshift(i)),i.value}}function i(t,i){n(t)||(o.unshift({key:t,value:i}),o.length>e&&o.pop())}var o=[];return{get:n,put:i}}t.__esModule=!0,t.default=n}),ri=e(function(e,t){function n(e){var t=void 0;return{get:function(n){if(t&&e(n,t.key))return t.value},put:function(e,n){t={key:e,value:n}}}}t.__esModule=!0,t.default=n}),ai=e(function(e,t){function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return 1===e?(0,c.default)(t):(0,s.default)(e,t)}function o(e,t){var n=t?(0,a.default)(e,t):e;return function(e,t){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i+=1)if(!n(e[i],t[i]))return!1;return!0}}function r(){for(var e=1,t=function(e,t){return e===t},n=!1,r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];"number"==typeof a[0]&&(e=a.shift()),"function"==typeof a[0]?t=a.shift():void 0===a[0]&&a.shift(),"boolean"==typeof a[0]&&(n=a[0]);var c=i(e,o(t,n));return function(e){return function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];var o=c.get(n);return void 0===o&&(o=e.apply(e,n),c.put(n,o)),o}}}t.__esModule=!0,t.default=r;var a=n(ii),s=n(oi),c=n(ri)}),si=e(function(e,t){t.__esModule=!0;var n=function(e){return e&&e.__esModule?e:{default:e}}(ai);t.default=n.default}),ci=function(e){return e&&e.__esModule?e.default:e}(si),di={},li=[],ui=[],pi=0,fi=1,hi=2,mi=3,bi="__preactattr_",gi=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,wi=[],vi=[],yi=0,xi=!1,_i=!1,Ci={};i(I.prototype,{setState:function(e,t){var n=this.state;this.prevState||(this.prevState=i({},n)),i(n,"function"==typeof e?e(n,this.props):e),t&&(this._renderCallbacks=this._renderCallbacks||[]).push(t),o(this)},forceUpdate:function(e){e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),S(this,hi)},render:function(){}});var ki,Si,Ai,Ti=window.parent,Ii=Ti.document,Ri=Ti.location,Pi=Ti.navigator,Mi=window.navigator.userAgent,Oi=Ti.Comm100API,Ei=function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,i=arguments[1],o=t[i.type];return void 0===o?n:o(n,i.payload,i.config)}},Ni=function(e,t){return Object.assign({},e,t)},Wi=function(e,t){for(var n=t.split("."),i=e,o=0;o<n.length;o+=1){if(!i)return;i=i[n[o]]}return i},Bi=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},Di=function(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1},zi=function(e,t){return new Promise(function(n){return setTimeout(void 0===t?n:P(n,t),e)})},ji=function(e,t,n){return new Promise(function(i,o){var r=n.ownerDocument,a=r.createElement(e);Object.assign(a,t),"style"in t&&Object.assign(a.style,t.style),a.onload=P(i,a),a.onerror=o,n.appendChild(a)})},qi=function(e,t){var n=String(e).replace(/[^0-9a-f]/gi,"");n.length<6&&(n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]);var i="#",o=void 0,r=void 0;for(r=0;r<3;r+=1)o=parseInt(n.substr(2*r,2),16),o=Math.round(255-t*(255-o)).toString(16),i+=("00"+o).substr(o.length);return i},Li=function(e){var t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,n,i){return t+t+n+n+i+i}),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null},Vi=function(e){if(!e)return!1;var t=Li(e);return(299*t[0]+587*t[1]+114*t[2])/1e3/255>.7},Fi=function(e){return e<10?"0"+e:""+e},Ui=function(e){var t=e.getHours(),n=e.getMinutes();return Fi(t)+":"+Fi(n)},Hi=function(e){var t=e;return 13===(t.charCode||t.which||t.keyCode)&&!t.shiftKey},Gi=function(e,t){var n=new RegExp("(&?)"+t+"=([^&]*)(&|$)","i"),i=e.match(n);return null!=i?decodeURIComponent(i[2]):null},Yi=function(e){var t=/:\/\/([^\/]+)\/?/.exec(e);return t&&t[1]},Qi=function(e){var t=e;return/^https:\/\/|http:\/\/|ftp:\/\//i.test(e)||(t="http://"+e),n("a",{href:t,target:"_blank",rel:"noopener noreferrer"},e)},Ji=function(e){return!!e&&("function"==typeof e.then&&"function"==typeof e.catch)},Xi=function(e,t,n){var i=void 0,o=void 0,r=void 0,a=void 0,s=void 0,c=function c(){var d=Date.now()-r;d<t&&d>0?s=setTimeout(c,t-d):(s=null,n||(a=e.apply(i,o),s||(i=null,o=null)))};return function(){i=this;for(var d=arguments.length,l=Array(d),u=0;u<d;u++)l[u]=arguments[u];o=l,r=Date.now();var p=n&&!s;return s||(s=setTimeout(c,t)),p&&(a=e.apply(i,o),i=null,o=null),a}},Zi=function(e){return e<=0?0:e-(new Date).getTime()},$i=function(e){return function(e){return e}},Ki=Mi.toLowerCase(),eo=Ki.indexOf("msie ")>=0||Ki.indexOf("trident/")>=0,to=Ki.indexOf("msie 10")>=0,no=Ki.indexOf("msie 9")>=0,io=Ki.indexOf("edge")>=0,oo=Ki.indexOf("chrome")>=0,ro=(function(){Ki.toLowerCase().indexOf("iphone")}(),function(){return void 0!==document.createElement("a").style.animationName||!1}()),ao=function(e,t){var n={};t.forEach(function(e){n[e.toLowerCase()]=e});var i={},o={};return Object.keys(e).forEach(function(t){var r=n[t.toLowerCase()];r?i[r]=e[t]:o[t]=e[t]}),[i,o]},so=function(e,t){e&&(e.addEventListener("animationend",t,!1),e.addEventListener("webkitAnimationEnd",t,!1))},co=function(e,t){e&&(e.removeEventListener("animationend",t),e.removeEventListener("webkitAnimationEnd",t))
},lo=".btn,.buttonProgressContainer{position:relative;text-align:center}.controlIndicator::after,.select-box::after,.select-box::before{content:''}.btn,.bubble__operation .btn{max-width:100%}.btn,.select-box .select{outline:0;font-size:1em;-webkit-appearance:none}*,::after,::before{box-sizing:border-box}button{margin:0;padding:0;font-family:\"SourceSans Pro\",Arial;-webkit-appearance:none}.btn{text-decoration:none;zoom:1;display:inline-block;margin-bottom:0;font-weight:500;cursor:pointer;background-image:none;border:1px solid transparent;white-space:nowrap;line-height:1.5;padding:4px 10px;font-family:\"SourceSans Pro\";border-radius:2px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:inherit}.disabled{opacity:.6;filter:alpha(opacity=60);cursor:default;box-shadow:none!important}.btn-grey:active,.btn-primary:active{box-shadow:inset 0 3px 5px rgba(0,0,0,.125)}.btn-primary{color:#000004;background:#000001;border:1px solid #000001}.btn-primary.disabled{background-color:#000001!important;border:1px solid #000001!important}.btn-primary:focus,.btn-primary:hover{background:#000003;border:1px solid #000003;text-decoration:none}.btn-primary:active{background:#000003;border:1px solid #000003}.btn-grey{color:#000;background:#c4c4c4;border:1px solid #c4c4c4}.btn-grey:focus,.btn-grey:hover{background:#afafaf;border:1px solid #afafaf;text-decoration:none}.btn-grey:active{background:#c4c4c4;border:1px solid #c4c4c4}.window--classic .btn{border-radius:2px}.window--circle .btn{border-radius:20px}.window--bubble .btn{border-radius:8px}.buttonProgressBtnAnimated{-webkit-animation-fill-mode:both;animation-fill-mode:both}.buttonProgressBtnDefaultSize{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;max-width:100%;width:128px}.buttonProgressContainerLoading .buttonProgressBtnAnimated,.buttonProgressContainerSuccess .buttonProgressBtnAnimated{-webkit-animation-name:form__submit--loading;animation-name:form__submit--loading;-webkit-animation-duration:.4s;animation-duration:.4s;cursor:default}.window--ie .buttonProgressContainerLoading .buttonProgressBtnAnimated{-webkit-animation:none;animation:none;opacity:.65}@-webkit-keyframes form__submit--loading{0%{border-radius:20px;text-indent:999em;background:#000001;border:1px solid #000001;width:128px;text-overflow:clip}99%{border-radius:32px;text-indent:999em;background:0 0;border:1px solid transparent;width:32px;text-overflow:clip}100%{border-radius:32px;text-indent:999em;background:0 0;border:1px solid transparent;width:32px;opacity:0;text-overflow:clip}}@keyframes form__submit--loading{0%{border-radius:20px;text-indent:999em;background:#000001;border:1px solid #000001;width:128px;text-overflow:clip}99%{border-radius:32px;text-indent:999em;background:0 0;border:1px solid transparent;width:32px;text-overflow:clip}100%{border-radius:32px;text-indent:999em;background:0 0;border:1px solid transparent;width:32px;opacity:0;text-overflow:clip}}.lds-css,.lds-rolling{width:32px;height:32px}.bubble__operation .btn,.header__agentBio,.header__agentName,.header__agentTitle,.title-buttons__operation--text a,.window--classic .header__agentTitle{text-overflow:ellipsis;overflow:hidden}.buttonProgress__layerCircle,.buttonProgress__layerLoading,.buttonProgress__layerSuccess,.lds-css{position:absolute;left:50%;top:50%;display:none}.buttonProgress__layerCircle,.buttonProgress__layerLoading,.lds-css{margin-top:-16px;margin-left:-16px}.buttonProgress__layerSuccess{margin-top:-8px;margin-left:-8px}.buttonProgressContainerLoading .buttonProgress__layerLoading,.buttonProgressContainerLoading .lds-css{display:block;-webkit-animation:fadeIn 0s cubic-bezier(.785,.135,.15,.86) .4s both;animation:fadeIn 0s cubic-bezier(.785,.135,.15,.86) .4s both;cursor:default}.buttonProgressContainerSuccess .buttonProgress__layerLoading,.buttonProgressContainerSuccess .lds-css,.window--ie .buttonProgressContainerLoading .lds-css{display:none}.buttonProgressContainerSuccess .buttonProgress__layerCircle,.buttonProgressContainerSuccess .buttonProgress__layerSuccess{display:block;cursor:default}.container-checkbox,.container-checkboxlist,.horizontal{display:inline-block}.checkbox2,.control,.select-box .select,svg:hover{cursor:pointer}.buttonProgress__submitLoadingPath{fill:#000001}.buttonProgress__submitCirclePath{stroke:#000001;stroke-width:3px;stroke-dasharray:100;stroke-dashoffset:0;fill:#fff;fill-opacity:0}.buttonProgressContainerSuccess .buttonProgress__submitCirclePath{-webkit-animation-timing-function:ease-in-out;animation-timing-function:ease-in-out;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-name:buttonProgress__submitCirclePath-dash;animation-name:buttonProgress__submitCirclePath-dash;-webkit-animation-duration:.5s;animation-duration:.5s}@-webkit-keyframes buttonProgress__submitCirclePath-dash{from{stroke-dashoffset:100}to{stroke-dashoffset:0}}@keyframes buttonProgress__submitCirclePath-dash{from{stroke-dashoffset:100}to{stroke-dashoffset:0}}.buttonProgress__submitSuccessPath{fill:#000001;stroke-width:1;-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0);opacity:0}.buttonProgressContainerSuccess .buttonProgress__submitSuccessPath{-webkit-animation-timing-function:ease-in-out;animation-timing-function:ease-in-out;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-name:buttonProgress__submitSuccessPath-animation;animation-name:buttonProgress__submitSuccessPath-animation;-webkit-animation-duration:.5s;animation-duration:.5s;-webkit-animation-delay:542ms;animation-delay:542ms}@-webkit-keyframes buttonProgress__submitSuccessPath-animation{0%{-webkit-transform:scale(0);transform:scale(0);-webkit-transform-origin:50% 50%;transform-origin:50% 50%;opacity:0}100%{-webkit-transform:scale(1);transform:scale(1);-webkit-transform-origin:50% 50%;transform-origin:50% 50%;opacity:1}}@keyframes buttonProgress__submitSuccessPath-animation{0%{-webkit-transform:scale(0);transform:scale(0);-webkit-transform-origin:50% 50%;transform-origin:50% 50%;opacity:0}100%{-webkit-transform:scale(1);transform:scale(1);-webkit-transform-origin:50% 50%;transform-origin:50% 50%;opacity:1}}@-webkit-keyframes lds-rolling{0%{-webkit-transform:rotate(0) translateZ(0);transform:rotate(0) translateZ(0)}100%{-webkit-transform:rotate(360deg) translateZ(0);transform:rotate(360deg) translateZ(0)}}@keyframes lds-rolling{0%{-webkit-transform:rotate(0) translateZ(0);transform:rotate(0) translateZ(0)}100%{-webkit-transform:rotate(360deg) translateZ(0);transform:rotate(360deg) translateZ(0)}}.lds-rolling{position:absolute;border:3px solid #000001;border-top-color:transparent;border-radius:50%;-webkit-animation:lds-rolling .75s linear infinite;animation:lds-rolling .75s linear infinite}.window--ie .lds-rolling{-webkit-animation:none;animation:none}.container-checkbox{position:relative;color:#666;padding-left:18px}.container-checkbox.disable{pointer-events:none}.container-checkbox i{display:inline-block;width:14px;height:14px;position:absolute;left:0;top:50%;margin-top:-7px}.checkbox+.selected .checkbox3{fill:#000001;cursor:pointer}.checkbox:focus+.selected .checkbox2,.container-checkbox:hover>.selected .checkbox2{fill:#000001}.checkbox2{fill:#ddd}.unselected .checkbox3{fill:#fafafa}.checkbox:focus+.unselected .checkbox2,.container-checkbox:hover>.unselected .checkbox2{fill:#000001}.checkbox{position:absolute;z-index:-1;opacity:0}.horizontal{margin-right:10px}.control,.vertical{display:block}.container-checkbox input[type=Checkbox]:disabled~.text{opacity:.6;pointer-events:none}.checkbox1{fill-rule:evenodd;clip-rule:evenodd;fill:#fafafa}.control{position:relative;padding-left:20px;margin-bottom:5px;font-size:1em;color:#666}.control input[type=radio]{position:absolute;z-index:-1;opacity:0}.controlIndicator{position:absolute;top:50%;left:0;margin-top:-8px;height:16px;width:16px;border:1px solid #cdcdcd;background-color:#fff}.controlRadio .controlIndicator{border-radius:50%}.control input[type=radio]:focus~.controlIndicator,.control:hover input[type=radio]~.controlIndicator{border-color:#8a8a8a}.control input[type=radio]:checked~.controlIndicator{background:#fff}.control input[type=radio]:disabled~.controlIndicator{background:#e6e6e6;opacity:.6;pointer-events:none}.controlIndicator::after{position:absolute;display:none}.controlRadio .controlIndicator::after{left:3px;top:3px;height:8px;width:8px;border-radius:50%;background:#000001}.control input[type=radio]:checked~.controlIndicator::after{display:block}.controlRadio.horizontal{float:left;margin-right:20px}.select-box{position:relative;padding:3px;height:35px;background:#fff;border-radius:2px}.select-box::before{position:absolute;right:0;top:0;width:35px;height:34px;border-left:1px solid #ddd}.select-box::after{position:absolute;right:13px;top:15px;width:0;height:0;border:6px solid transparent;border-left-width:4px;border-right-width:4px;border-top-color:#a6a6a6}.select-box .select{position:absolute;left:0;right:0;top:0;bottom:0;z-index:9;padding:5px 40px 5px 10px;background:0 0;height:100%;width:100%;color:#000;border:1px solid #ddd;font-family:inherit;-moz-appearance:none;appearance:none}.input,.multipleText{-webkit-appearance:none;font-size:1em;outline:0}.select-box .select::-ms-expand{display:none}.select-box .select:focus{border-color:#000001}.window--classic .select-box,.window--classic .select-box .select{border-radius:2px}.window--circle .select-box,.window--circle .select-box .select{border-radius:20px}.window--bubble .select-box,.window--bubble .select-box .select{border-radius:8px}.svg{width:16px;height:16px}.svg--loading{width:22px;height:22px}.svg--loadingChat{display:block;width:28px;height:28px;margin:0 auto}.prepend,.prependContainer{display:inline-block}.bubble .btn:first-child,.rating .star{margin-right:10px}.svg.disabled{opacity:.3}.svg.disabled:hover{cursor:default}.svgPath{fill:#000;width:16px;height:16px}.svgRatePath1{fill:none;stroke:#000;stroke-miterlimit:10}.svgPathSendFile1{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}.svgPathVideo1{fill:none;stroke:#000;stroke-miterlimit:10}.svgPathVideo2{fill:none}.svgPathVoice1{fill:none;stroke:#000;stroke-miterlimit:10}.svgPathVoice2{fill:#000}.sendemail1{fill:none}.sendemail2{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}.svg:not(.disabled):hover .sendemail1,.svg:not(.disabled):hover .svgPathSendFile1,.svg:not(.disabled):hover .svgPathVideo1,.svg:not(.disabled):hover .svgPathVoice1,.svg:not(.disabled):hover .svgRatePath1{fill:rgba(0,0,0,.3)}.svg.active .svgRatePath1{fill:#000}.svg-white .svgPathVoice2,.svgClosePath,.svgMinimizePath,.svgPopupPath{fill:#fff}.svg-white .sendemail2,.svg-white .svgPathSendFile1,.svg-white .svgPathVideo1,.svg-white .svgPathVoice1,.svg-white .svgRatePath1{stroke:#fff}.svg-white:not(.disabled):hover .sendemail1,.svg-white:not(.disabled):hover .svgPathSendFile1,.svg-white:not(.disabled):hover .svgPathVideo1,.svg-white:not(.disabled):hover .svgPathVoice1,.svg-white:not(.disabled):hover .svgRatePath1{fill:rgba(255,255,255,.3)}.svg-white.active .svgRatePath1{fill:#fff!important}.svg-white.active .svgPathSendFile1{fill:#fff!important;stroke:#000001!important}.svg-white.active .sendemail2{fill:none!important;stroke:transparent!important}.svg-white.active .sendemail1{fill:#fff!important}.input{border:1px solid #ddd;padding:5px 10px;border-radius:2px;transition:border-color ease-in-out .2s}.input:disabled{background-color:#f5f5f5}.input[readOnly]{border:0}input.attachTicket{width:100px;margin-left:5px}.input:not(.input--effect01):focus{border-color:#000001;outline:0}.prepend{line-height:18px;padding:5px 5px 4px;background-color:#fafafa}.prependContainer .input{border-top-left-radius:0;border-bottom-left-radius:0}.prependIcon{float:left;padding:0 6px 0 0}.defaultIcon{display:block;width:24px;height:24px}.inputContainer{position:relative;display:inline-block}.input.input--effect01{border:1px solid #ddd;border-right-color:#000001;padding:5px 10px;border-radius:0}.input__focusBorder{display:block}.input.input--effect01~.input__focusBorder::after,.input.input--effect01~.input__focusBorder::before{content:\"\";position:absolute;top:0;left:0;width:0;height:1px;background-color:#000001}.input.input--effect01~.input__focusBorder::after{top:auto;bottom:0;left:0}.input.input--effect01~.input__focusBorder i::after,.input.input--effect01~.input__focusBorder i::before{content:\"\";position:absolute;top:50%;left:0;width:1px;height:0;background-color:#000001}.input.input--effect01~.input__focusBorder i::after{left:auto;right:0;top:0;bottom:0;background:#ccc;height:100%}.input.input--effect01:focus~.input__focusBorder::after,.input.input--effect01:focus~.input__focusBorder::before{width:100%;transition:156ms;transition-delay:26ms}.input.input--effect01:focus~.input__focusBorder i::after,.input.input--effect01:focus~.input__focusBorder i::before{height:100%;transition:26ms;top:0}.input.input--effect01:focus~.input__focusBorder i::after{height:0;transition-delay:182ms;top:50%}.input--circle,.window--circle .input{border-radius:20px;padding:5px 15px}.input--bubble,.window--bubble .input{border-radius:8px}.input.error,.input.error:focus,.input.error:hover{border-color:#d34747}.input.error~.input__focusBorder i::after,.input.error~.input__focusBorder i::before,.input.error~.input__focusBorder::after,.input.error~.input__focusBorder::before{background:#d34747}input,textarea{-webkit-transform:translate3d(0,0,0)}.multipleText{border:1px solid #ddd;padding:5px;transition:border-color .2s;border-radius:2px;width:100%;overflow:auto}.multipleText:disabled{background-color:#f5f5f5}.multipleText:focus{border-color:#000001;outline:0}.multipleText.error,.multipleText.error:focus,.multipleText.error:hover{border-color:#d34747}.window--classic .multipleText{border-radius:2px}.window--circle .multipleText{border-radius:20px;padding:15px}.window--bubble .multipleText{border-radius:8px;padding:5px 10px}.bubble-box{display:none}.bubble{position:absolute;width:280px;background:#fff;padding:20px 16px;text-align:center;font-size:1em;line-height:20px;border-radius:4px;box-shadow:0 0 10px rgba(0,0,0,.3);z-index:99}.window--circle .bubble{padding:20px}.window__footer .bubble{font-size:1.25em}.bubble::before,.bubble__arrowDown,.bubble__arrowDown::before{content:'';position:absolute;width:0;height:0;border:6px solid transparent;z-index:9}.bubble::after,.bubble__arrowDown::after{content:'';position:absolute;width:0;height:0;border:8px solid transparent;z-index:8}.bubble-up{left:-12px;bottom:35px;-webkit-transform-origin:20px calc(100% + 19px);-ms-transform-origin:20px calc(100% + 19px);transform-origin:20px calc(100% + 19px)}.window--bubble .bubble-up,.window--circle .bubble-up{-webkit-transform-origin:207px calc(100% + 19px);-ms-transform-origin:207px calc(100% + 19px);transform-origin:207px calc(100% + 19px)}.window--bubble .bubble-up{-webkit-transform-origin:177px calc(100% + 19px);-ms-transform-origin:177px calc(100% + 19px);transform-origin:177px calc(100% + 19px)}.window--bubble .chat-input__controlbox--disabled .bubble-up{-webkit-transform-origin:257px calc(100% + 19px);-ms-transform-origin:257px calc(100% + 19px);transform-origin:257px calc(100% + 19px)}.window--bubble.window--rtl .bubble-up,.window--circle.window--rtl .bubble-up{-webkit-transform-origin:42px calc(100% + 19px);-ms-transform-origin:42px calc(100% + 19px);transform-origin:42px calc(100% + 19px)}.window--bubble.window--rtl .chat-input__controlbox--disabled .bubble-up{-webkit-transform-origin:12px calc(100% + 19px);-ms-transform-origin:12px calc(100% + 19px);transform-origin:12px calc(100% + 19px)}.bubble-up .bubble__arrowDown,.window--classic .bubble-up::before{bottom:-12px;left:12px;border-top-color:#fff}.window--bubble .bubble-up::before,.window--circle .bubble-up::before{bottom:-12px;left:207px;border-top-color:#fff;display:none}.window--bubble .chat-input__controlbox--disabled .bubble-up::before{left:252px}.window--bubble.window--rtl .bubble-up::before,.window--circle.window--rtl .bubble-up::before{left:42px}.window--bubble.window--rtl .chat-input__controlbox--disabled .bubble-up::before{left:12px}.bubble__arrowDown::before{border-top-color:#fff;top:-7px;left:-6px}.bubble__arrowDown::after{border:6px solid transparent;border-top-color:rgba(0,0,0,.15);top:-6px;left:-6px}.bubble-down{right:-11px;top:30px;top:calc(100% + 10px);-webkit-transform-origin:calc(100% - 11px) -16px;-ms-transform-origin:calc(100% - 11px) -16px;transform-origin:calc(100% - 11px) -16px}.bubble-down::before{top:-12px;right:16px;border-bottom-color:#fff}.bubble-down::after{top:-16px;right:14px;border-bottom-color:rgba(0,0,0,.08)}.window--classic .bubble-up::after{bottom:-16px;left:10px;border-top-color:rgba(0,0,0,.08)}.window--classic .bubble-down{right:0}.window--classic .bubble-down::before{top:-12px;right:7px}.window--classic .bubble-down::after{top:-16px;right:5px}.window--circle .bubble-down::before{right:18px}.window--circle .bubble-down::after{right:16px}.window--bubble .bubble-down::before{right:7px}.window--bubble .bubble-down,.window--bubble .bubble-down::after{right:5px}.bubble-box--show{display:block}.bubble-box--show .bubble{-webkit-animation:showBubble 333ms cubic-bezier(.785,.135,.15,.86) both;animation:showBubble 333ms cubic-bezier(.785,.135,.15,.86) both}.window--ie .bubble-box--show .bubble{-webkit-animation:none;animation:none}@-webkit-keyframes showBubble{0%{-webkit-transform:scale(0);transform:scale(0)}100%{-webkit-transform:scale(1);transform:scale(1)}}@keyframes showBubble{0%{-webkit-transform:scale(0);transform:scale(0)}100%{-webkit-transform:scale(1);transform:scale(1)}}.bubble-close{position:absolute;right:12px;top:10px;cursor:pointer}.bubble__operation{margin-top:10px}.window--bubble .bubble,.window--bubble .bubble__operation .btn{border-radius:8px}.window--circle .bubble,.window--circle .bubble__operation .btn{border-radius:20px}.embedded-end-chatConfirmAction.bubble__operation .btn{max-width:112px}.bubble--title{color:#666;font-size:1.13em;margin-bottom:13px;word-wrap:break-word}.bubble--desc{font-size:1em;color:#666;margin-bottom:10px}.bubble--textarea{position:relative;border-radius:4px;margin-top:15px}.bubble__required{color:#de3939}.rating .bubble__required{position:relative;top:-5px}.bubble--textarea .bubble__required{position:absolute;top:27px;right:-10px}.rating,.rating .star{position:relative}.window--mobile .bubble__arrowDown{display:none}.bubble .multipleText{display:block}.bubble .rating{height:30px}.rating .star{display:inline-block;font-size:2em;line-height:30px;color:#c8c8c8;cursor:pointer}.rating .star:last-child{margin-right:0}.window--bubble .form-fields--horizonal .rating .star{font-size:1.06em;line-height:16px;margin-right:6px}.window--circle .form-fields--horizonal .rating .star{font-size:1.66em;line-height:25px}.rating .star.animate{color:#ffd051;-webkit-animation:stretch-bounce 542ms ease-in-out both;animation:stretch-bounce 542ms ease-in-out both}.window--ie .rating .animate.star{-webkit-animation:none;animation:none}.rating .star.hidden{opacity:0}.rating .full::before{display:inline-block;position:relative;float:right;z-index:2}.rating .full{outline:0}.rating .half::before{position:absolute;float:left;z-index:3}.rating .starColour{color:#ffd051;outline:0}@-webkit-keyframes stretch-bounce{0%{-webkit-transform:scale(1);transform:scale(1);color:#c8c8c8}38.5%{-webkit-transform:scale(1.2);transform:scale(1.2);color:#c8c8c8}61.5%{-webkit-transform:scale(0);transform:scale(0);color:#c8c8c8}100%{-webkit-transform:scale(1);transform:scale(1);color:#ffd051}}@keyframes stretch-bounce{0%{-webkit-transform:scale(1);transform:scale(1);color:#c8c8c8}38.5%{-webkit-transform:scale(1.2);transform:scale(1.2);color:#c8c8c8}61.5%{-webkit-transform:scale(0);transform:scale(0);color:#c8c8c8}100%{-webkit-transform:scale(1);transform:scale(1);color:#ffd051}}.rating .selected::before{display:inline-block;position:absolute;top:0;left:0;-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);opacity:1;z-index:1}.rating .selected.pulse::before{-webkit-transform:scale(3);-ms-transform:scale(3);transform:scale(3);opacity:0}.rating .selected.isAnimated::before{transition:1s ease-out}.window__headerContainer,.window__headerVessel{-ms-flex-negative:0;flex-shrink:0}.window__header{width:100%;min-height:30px;overflow:hidden;transition:height .4s cubic-bezier(.785,.135,.15,.86)}.window--classic .window__header--fadeInDown{-webkit-animation:fadeInDown 292ms both cubic-bezier(.785,.135,.15,.86);animation:fadeInDown 292ms both cubic-bezier(.785,.135,.15,.86)}.window--ie .window--classic .window__header--fadeInDown{-webkit-animation:none;animation:none}.window__headerBox{padding:15px 25px;width:100%}.window__headerBox--onlylogo{min-height:85px}.window__headerBox--fadeInDown{opacity:1;-webkit-transform:translateY(0);-ms-transform:translateY(0);transform:translateY(0);transition:all 292ms cubic-bezier(.785,.135,.15,.86) 1.792s}.chat-time,.window--bubble:hover .window__title{transition:opacity .4s cubic-bezier(.785,.135,.15,.86)}.title-buttons__operation{display:block;float:left;padding-left:7px;padding-right:7px}.title-buttons__operation .icon{cursor:pointer}.title-buttons__operation--text{border-left:2px solid rgba(255,255,255,.5)}.window--circle .title-buttons__operation--text{border-left-color:#a3a3a3}.window--classic .title-buttons__operation--text{border-left-color:#000004}.title-buttons__operation--text a{color:#fff;text-decoration:none;cursor:pointer;display:block;max-width:62px;max-height:21px;white-space:nowrap}.window--circle .title-buttons__operation--text a{color:#a3a3a3}.window--classic .title-buttons__operation--text a{color:#000004}.header__teamAvatar--gray .header__teamAvatarImg{filter:gray;-webkit-filter:grayscale(100%)}.window--classic .main-container .window__title{position:absolute;right:2px;top:5px}.window--classic .window__header{background:#000001;box-shadow:0 1px 5px rgba(0,0,0,.15)}.window--classic .icon-close,.window--classic .icon-embedded,.window--classic .icon-minimize,.window--classic .icon-popup{color:#000004;font-size:.8em}.header__bannerImg{max-height:90px}.window--classic .header__bannerImg{display:block;max-width:calc(100% + 50px);margin:15px -25px -15px}.window--classic .header__agentInfo{max-width:calc(100% - 60px)}.window--classic .header__agentInfoNoAvatar{max-width:100%;width:100%}.window--circle .header__agentInfo{width:100%}.window--classic .header__chatbot{height:50px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.window--classic .header__avatar{margin-right:10px;width:50px;height:50px;-ms-flex-item-align:start;align-self:flex-start}.chat-time,.window--bubble .chat-time{-ms-grid-row-align:center;align-self:center}.window--classic .header__avatarImage{display:block;border-radius:100%;width:50px;height:50px}.header__agent{position:relative}.header__agent--compact:hover::before{content:'';position:absolute;z-index:99;width:calc(100% + 20px);height:calc(100% - 10px);background:rgba(0,0,0,.1);border-radius:4px;left:-10px;top:-5px;cursor:pointer}.window--circle .header__agent--compact:hover::before{width:100%;height:100%;left:0;top:0}.window--classic .header__agent{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.window--classic .header__agent--fadeInUp{-webkit-animation:fadeInUp 458ms cubic-bezier(.785,.135,.15,.86) both;animation:fadeInUp 458ms cubic-bezier(.785,.135,.15,.86) both}.window--ie .window--classic .header__agent--fadeInUp{-webkit-animation:none;animation:none}.window--classic .header__agent--withlogo{float:left;max-width:calc(100% - 180px);height:50px}.header__agentName,.header__agentTitle{max-width:100%;white-space:nowrap}.header__agentName{font-family:\"SourceSans Pro Light\",Arial}.window--classic .header__agentName{font-size:1.2em;color:#000004;text-shadow:0 1px 1px rgba(0,0,0,.2)}.window--classic .header__agentTitle{margin-top:3px;font-size:.93em;color:#000004;opacity:.45;text-shadow:0 1px 1px rgba(0,0,0,.2);white-space:nowrap}.header__agentBio{max-height:80px;display:-webkit-box;-webkit-line-clamp:4;-webkit-box-orient:vertical;word-wrap:break-word}.window--classic .header__agentBio{font-size:.93em;color:#000004;opacity:.7;text-shadow:0 1px 1px rgba(0,0,0,.2);margin-top:9px;margin-bottom:12px}.window--classic .header__agentBio a{color:#000004}.window--classic .header__logo{float:right;margin-top:17px}.window--classic .header__logoImg{max-height:53px;max-width:170px;display:block}.window--bubble .header__agentBio,.window--circle .header__agentBio{line-height:20px;max-height:80px;-webkit-line-clamp:4;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.window--classic .header__teamName{font-size:1.2em;color:#000004;text-align:center;text-shadow:0 1px 1px rgba(0,0,0,.2)}.window--classic .header__teamAvatar{position:relative;width:110px;height:50px;margin:11px auto 10px}.window--classic .header__teamAvatarImg{position:absolute;border-radius:100%;box-shadow:0 1px 5px rgba(0,0,0,.3)}.window--classic .header__teamAvatarImg:nth-child(1){left:0;z-index:9}.window--classic .header__teamAvatarImg:nth-child(2){left:30px;z-index:8;opacity:.7}.window--classic .header__teamAvatarImg:nth-child(3){left:60px;z-index:7;opacity:.5}.window--classic .window__header--prechatWithAvatar{height:126px}.window--classic .header--compact{height:55px}.window--classic .header--compact .header__teamAvatar,.window--classic.animation--chatting .header__teamAvatar{-webkit-transform:translateY(-105px);-ms-transform:translateY(-105px);transform:translateY(-105px)}.window--classic.animation--chatting .header__teamName{-webkit-transform:translateY(-60px);-ms-transform:translateY(-60px);transform:translateY(-60px)}.window--circle .header{border-top-left-radius:20px;border-top-right-radius:20px}.window--circle .header__bannerImg{display:block;max-width:calc(100% + 80px);margin:25px -40px -15px}.window--circle .header__avatar{position:fixed;top:0;left:50%;margin-left:-42px}.window--circle .header__avatar--fadeInDown{-webkit-animation:fadeInDown 292ms cubic-bezier(.785,.135,.15,.86) both;animation:fadeInDown 292ms cubic-bezier(.785,.135,.15,.86) both}.window--ie .window--circle .header__avatar--fadeInDown{-webkit-animation:none;animation:none}.window--circle .header__avatarImage{display:block;border-radius:100%;width:85px;height:85px;border:1px solid #ddd}.window--circle .header__agentInfo{text-align:center;margin-top:35px}.window--circle .header__agentInfoNoAvatar{margin-top:0}.window--circle .header__agentName{max-width:calc(100% - 90px);margin:0 auto;font-size:1.2em;color:#000}.window--circle .header__agentTitle{font-size:.93em;color:rgba(0,0,0,.3);margin-bottom:5px}.window--circle .header__agentBio{font-size:.93em;color:rgba(0,0,0,.5);display:-webkit-box}.window--circle .header__agentBio a{color:rgba(0,0,0,.5)}.window--circle .header__teamName{font-size:1.2em;color:#000;margin-top:38px;text-align:center}.window--circle .header__teamNameNoAvatar{margin-top:10px}.window--circle .header__teamAvatar{position:fixed;left:50%;top:0;width:165px;height:85px;margin-bottom:10px;margin-left:-82px;-webkit-animation:fadeInDown 292ms cubic-bezier(.785,.135,.15,.86) both;animation:fadeInDown 292ms cubic-bezier(.785,.135,.15,.86) both}.window--ie .window--circle .header__teamAvatar{-webkit-animation:none;animation:none}.window--circle.window--minimized .header__teamAvatar{top:-45px}.window--circle .header__teamAvatarImg{position:absolute;border-radius:100%;box-shadow:0 1px 5px rgba(0,0,0,.3)}.window--circle .header__teamAvatarImg:nth-child(1){width:75px;height:75px;z-index:8;top:5px}.window--circle .header__teamAvatarImg:nth-child(2){width:85px;height:85px;left:40px;z-index:9}.window--circle .header__teamAvatarImg:nth-child(3){width:75px;height:75px;left:90px;z-index:8;top:5px}.window--circle .icon-close,.window--circle .icon-embedded,.window--circle .icon-minimize,.window--circle .icon-popup{color:#a3a3a3;font-size:.8em}.window--circle .main-container .window__title{position:absolute;right:13px;top:16px}.window--circle .window__headerBox{min-height:55px;border-bottom:1px solid #ddd;width:calc(100% - 30px);margin:0 auto}.window--circle .header-operator{margin-bottom:17px}.window--bubble .window__title{visibility:hidden;opacity:0}.window--bubble:hover .window__title,.window--mobile .window--bubble .window__title{visibility:visible;opacity:1}.window--bubble .header__avatar{position:absolute;top:-45px;left:50%;margin-left:-42px}.window--bubble .header__avatarImage{display:block;border-radius:100%;width:85px;height:85px;border:1px solid #000004}.window--bubble .header__agentInfo{text-align:center;margin-top:35px}.window--bubble .header__agentName{font-size:1.2em;color:#000}.window--bubble .header__agentTitle{font-size:.93em;color:rgba(0,0,0,.3)}.window--bubble .header__agentBio{font-size:.93em;color:rgba(0,0,0,.5);margin-top:5px;display:-webkit-box}.window__formError,.window__formGreeting,.window__ssologinError,.window__ssologinGreeting{line-height:18px;font-size:.93em}.window--bubble .icon-close,.window--bubble .icon-embedded,.window--bubble .icon-minimize,.window--bubble .icon-popup{color:#fff;font-size:.8em}.window--bubble .main-container .window__title{position:absolute;right:0;top:0;z-index:999;background:#7f7f7f;padding:2px 3px;border-radius:20px}.window--bubble:not(.window--embedded) .main-container .window__title{top:5px;right:15px}.window--bubble .window__headerBox{padding-bottom:0}.window--bubble .header-operator{border-bottom:1px solid #ddd;padding-bottom:28px}.window__ssologin{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;padding:28px 40px}.window__ssologinError{color:#de3939;margin-bottom:26px}.window__ssologinGreeting{color:#666;margin-bottom:28px;text-align:center}.window__ssologinForm{text-align:center}.window__ssologinOperation{display:block;margin:0 auto 20px;overflow:hidden;text-overflow:ellipsis}.window__ssologinOperation:last-child{margin-bottom:0}.prechatForm__signinwith,.prechatForm__social{float:left}.prechatForm__social{margin-left:15px;margin-top:2px}.prechatForm__social i{cursor:pointer}.prechatForm__login{color:#666}.prechatForm__divide{position:relative;display:block;text-align:center;margin-top:10px;margin-bottom:25px}.prechatForm__divide::after,.prechatForm__divide::before{border-top:1px solid #ddd;width:41%;position:absolute;top:11px;content:''}.prechatForm__divide::before{left:0}.prechatForm__divide::after{right:0}.window--bubble .window__form.window__ssologin{padding:28px 30px 30px;margin-top:35px}.loading{display:block;background-size:50px}.icon-facebook{margin-right:10px;color:#39599c}.window--rtl .icon-facebook{margin-left:10px}.icon-googleplus{color:#ce3829}.window__formContainer--bubble{overflow:hidden;overflow-y:auto;padding-right:5px;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;margin-top:35px}.window__form{overflow:auto;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-ms-flex-negative:1;flex-shrink:1;width:100%;padding:27px 40px 0;overflow-x:hidden}.window__form--animation{-webkit-animation:fadeInUp 458ms cubic-bezier(.785,.135,.15,.86) both;animation:fadeInUp 458ms cubic-bezier(.785,.135,.15,.86) both}.window--ie .window__form--animation{-webkit-animation:none;animation:none}.window--mobile .window__form{padding:27px 25px 30px}.window--bubble .window__form{margin-left:10px;padding:28px 30px;border:1px solid #ddd;border-radius:8px 8px 8px 0;width:auto;background-color:#fff;-ms-flex-negative:0;flex-shrink:0;position:relative;overflow:visible}.window--mobile .window--bubble .window__form{margin-bottom:10px}.window--mobile .window--bubble .icon-bubble-content,.window--mobile .window--bubble .icon-bubble-line{left:10px}.window--bubble .window__form .icon-bubble-content,.window--bubble .window__form .icon-bubble-line{position:absolute}.window--bubble .window__form .icon-bubble-content{left:-9px}.window--bubble .window__form .icon-bubble-line{left:-10px}.window--bubble .icon-bubble-content::before{color:#fff}.window--bubble .window__form .icon-bubble-content .bubblecontent1{fill:#fff}.window--bubble .window__form .icon-bubble-line .bubbleline1{fill:#fff;stroke:#ddd;stroke-width:2px}.window--bubble .icon-bubble-line::before{color:#ddd}.window__formGreeting{color:#666;margin-bottom:25px;word-wrap:break-word;word-break:break-word}.window__formGreeting a{color:#666}.window__chat .window__formGreeting{text-align:center}.window__formError{color:#de3939;margin-bottom:26px}.form-fields .box-field{margin-bottom:15px}.form-fields .box-field input[type=file]{width:100%}.form-fields.form-fields--horizonal .box-field input[type=file]{width:calc(100% - 80px)}.form-fields--horizonal .box-field{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:20px;position:relative}.form__inputContainer{position:relative;text-align:center}.fieldControl__Ticket{display:-webkit-box;display:-ms-flexbox;display:flex}.form-fields--horizonal .fieldControl__Ticket{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.form__ticketPrefix{-ms-flex-negative:0;flex-shrink:0;line-height:35px}.window--bubble .form-fields:not(.form-fields--horizonal) .fieldControl__Ticket .form__input--ie10{width:120px}.fieldControl__Ticket .form__inputContainer,.form-fields--horizonal .form__inputContainer,.form-fields--horizonal .multipleText,.form-fields--horizonal .select-box{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.form-fields .field-name{margin-bottom:7px;color:#666;word-wrap:break-word;word-break:break-all}.form-fields .field-control{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.form-fields.form-fields--horizonal .field-control,.form-fields.form-fields--horizonal .fieldControl__Ticket{-ms-flex-negative:1;flex-shrink:1}.form-fields--horizonal .field-name{margin-bottom:0;margin-right:10px;-ms-flex-preferred-size:80px;flex-basis:80px;-ms-flex-negative:0;flex-shrink:0}.form-fields--horizonal .form__ticketPrefix{-ms-flex-negative:0;flex-shrink:0}.form-fields .field__requiredTag{margin-left:7px;color:#de3939}.form-fields .field__requiredMsg{background:rgba(222,57,57,.9);padding:4px 10px;color:#fff;position:relative;left:7px;font-size:.93em;border-radius:2px}.form-fields .field__requiredMsg::before{content:'';position:absolute;left:-9px;top:8px;width:0;height:0;border:5px solid transparent;border-right-color:rgba(222,57,57,.9)}.window--rtl .form-fields .field__requiredMsg{left:0}.window--rtl .form-fields .field__requiredMsg::before{left:auto;right:-9px;border-right-color:transparent;border-left-color:rgba(222,57,57,.9)}.form-fields--horizonal .field__requiredMsg{position:absolute;left:0;bottom:-28px;z-index:9;border-radius:2px}.form-fields--horizonal .field__requiredMsg::before{left:14px;top:-10px;border-right-color:transparent;border-bottom-color:rgba(222,57,57,.9)}.form__input{height:35px;width:100%}.form__textarea{height:auto}.form__submitContainer{position:relative;text-align:center;margin-top:30px;padding-bottom:30px}.form__submit{width:160px}.form__submitContainer--loading .form__submit{-webkit-animation-name:form__submit--loading;animation-name:form__submit--loading;-webkit-animation-duration:167ms;animation-duration:167ms}.form__layer-circle,.form__layer-success{position:absolute;left:50%;top:50%;-webkit-transform:translateX(-50%) translateY(-50%);-ms-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%);display:none}.form__submitContainer--loading .form__layer-circle,.form__submitContainer--loading .form__layer-success{display:block}.form__submitContainer--loading .form__submitCirclePath{stroke:#000001;stroke-width:3px;stroke-dasharray:100;stroke-dashoffset:100;fill:#fff;fill-opacity:0;-webkit-animation-timing-function:ease-in-out;animation-timing-function:ease-in-out;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-name:form__submitCirclePath-dash;animation-name:form__submitCirclePath-dash;-webkit-animation-duration:.5s;animation-duration:.5s;-webkit-animation-delay:167ms;animation-delay:167ms}@-webkit-keyframes form__submitCirclePath-dash{from{stroke-dashoffset:100}to{stroke-dashoffset:0}}@keyframes form__submitCirclePath-dash{from{stroke-dashoffset:100}to{stroke-dashoffset:0}}.form__submitContainer--loading .form__submitSuccessPath{fill:#000001;stroke-width:1;-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0);opacity:0;-webkit-animation-timing-function:ease-in-out;animation-timing-function:ease-in-out;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-name:form__submitSuccessPath-animation;animation-name:form__submitSuccessPath-animation;-webkit-animation-duration:.5s;animation-duration:.5s;-webkit-animation-delay:542ms;animation-delay:542ms}@-webkit-keyframes form__submitSuccessPath-animation{0%{-webkit-transform:scale(0);transform:scale(0);-webkit-transform-origin:50% 50%;transform-origin:50% 50%;opacity:0}100%{-webkit-transform:scale(1);transform:scale(1);-webkit-transform-origin:50% 50%;transform-origin:50% 50%;opacity:1}}@keyframes form__submitSuccessPath-animation{0%{-webkit-transform:scale(0);transform:scale(0);-webkit-transform-origin:50% 50%;transform-origin:50% 50%;opacity:0}100%{-webkit-transform:scale(1);transform:scale(1);-webkit-transform-origin:50% 50%;transform-origin:50% 50%;opacity:1}}.window__chat{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-ms-flex-negative:1;flex-shrink:1;overflow:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch;width:100%}.window__chat--animation{-webkit-animation:fadeInUp 458ms cubic-bezier(.785,.135,.15,.86) both;animation:fadeInUp 458ms cubic-bezier(.785,.135,.15,.86) both}.window--ie .window__chat--animation{-webkit-animation:none;animation:none}.window__chatSystemMessage{color:#bbb;font-size:1em;margin-bottom:17px;text-align:center}.window__chatSystemMessage a{color:#bbb}.window__chatAgent,.window__chatVisitor{display:-webkit-box;display:-ms-flexbox;display:flex;margin-bottom:10px;-webkit-animation:message--show 458ms cubic-bezier(.785,.135,.15,.86);animation:message--show 458ms cubic-bezier(.785,.135,.15,.86)}.window--bubble .window__chatSystemMessage{-webkit-animation:message--show 458ms cubic-bezier(.785,.135,.15,.86);animation:message--show 458ms cubic-bezier(.785,.135,.15,.86)}.window--ie .window--bubble .window__chatSystemMessage,.window--ie .window__chatAgent,.window--ie .window__chatVisitor{-webkit-animation:none;animation:none}.window__chatVisitor{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}.agentMessage__avatar{float:left;margin-right:10px}.agentMessage__avatarImg{display:block;width:30px;height:30px;border-radius:100%}.agentMessage__pci{background:#f0f0f0;border:1px solid #ddd;border-radius:4px;padding:23px 20px 12px}.agentMessage__pciField{margin-bottom:7px;color:#888}.agentMessage__pciControl{margin-bottom:12px}.agentMessage__pciControl .form__input{height:30px;line-height:30px;width:calc(100% - 20px)}.agentMessage__pciSubmit{background:url(images/pci.svg) left center no-repeat;background-size:53px 34px;height:53px;text-align:center}.agentMessage__pciSubmit .form__submit{width:70px;margin-top:10px}.agentMessage__pciSubmit .btn-grey{margin-left:7px}.window__chatAgentMessage,.window__chatVisitorMessage{position:relative;font-size:1em;line-height:20px;padding:14px 15px;border-radius:4px;max-width:calc(100% - 45px);word-wrap:break-word;word-break:break-word}.window--circle .window__chatAgentMessage,.window--circle .window__chatVisitorMessage{max-width:calc(100% - 65px)}.window__chatMessageOrignal{display:block;opacity:.5}.window__chatMessageTranslatedTag{display:inline}.window__chatAgentMessage img{display:block;max-width:100%!important;max-height:100%!important}.window__chatAgentMessage a{color:#000005}.window--bubble .window__chatAgentMessage a,.window--circle .window__chatAgentMessage a{color:#000004}.chat-message--img{overflow:hidden;max-width:200px;max-height:200px}.chat-message--img img{display:block;max-width:100%!important;max-height:100%!important}.window__chatVisitorMessage{float:right;background:#fff;color:#3c3c3c}.window__chatVisitorMessage a{color:#3c3c3c}.window__chatAgentMessage a,.window__chatVisitorMessage a{word-break:break-all;display:inline-block;max-width:100%}.window__chatVisitorMessage .icon-close{float:right;margin-left:9px;margin-top:4px}@-webkit-keyframes message--show{0%{opacity:0;-webkit-transform:translateY(20px);transform:translateY(20px)}100%{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes message--show{0%{opacity:0;-webkit-transform:translateY(20px);transform:translateY(20px)}100%{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}}.chat-time{opacity:0;color:#fff;font-size:.866em;background:rgba(0,0,0,.5);padding:0 8px;line-height:18px;height:18px;border-radius:20px;-ms-flex-item-align:center}.window__chatAgent:hover .chat-time,.window__chatVisitor:hover .chat-time{opacity:1}.window__chatAgent .chat-time{float:left;margin-left:10px}.window__chatVisitor .chat-time{float:right;margin-right:10px}.window__chatAgentName,.window__chatVisitorName{margin-bottom:5px;font-family:'SourceSans Pro Bold'}.window--classic .window__chat{padding:20px}.window--classic .window__chatAgentMessage{float:left;max-width:calc(100% - 95px)}.window--classic .chat-message--img{padding:0}.window--circle .chat-message--sending::after,.window--classic .chat-message--sending::after{content:'';display:block;width:22px;height:22px;position:absolute;left:-32px;top:10px;background:url(images/loading.svg) left center no-repeat;background-size:100%}.window--classic .window__chatAgentMessage{background:#000002;color:#000005}.window__chatAgentMessage--file .icon-sendfile,.window__chatVisitorMessage--file .icon-sendfile{position:relative;top:3px;margin-right:5px}.window__chatAgentMessage--file .icon-sendfile{color:#000005}.window__chatVisitorMessage--file .icon-sendfile{color:#3c3c3c}.window--classic .window__chatAgentMessage::before{position:absolute;width:0;height:0;content:'';top:7px;border:4px solid transparent;border-right-color:#000002;left:-8px}.window--classic .window__chatVisitorMessage{float:right;border:1px solid #ddd;color:#3c3c3c}.window--classic .window__chatVisitorMessage::after,.window--classic .window__chatVisitorMessage::before{position:absolute;width:0;height:0;content:'';top:7px;border:4px solid transparent}.window--classic .window__chatVisitorMessage::before{border-left-color:#ccc;right:-9px}.window--classic .window__chatVisitorMessage::after{border-left-color:#fff;right:-8px}.window_chatError{position:absolute;z-index:99;left:50%;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%);padding:13px 38px 13px 15px;line-height:18px;border-radius:4px;box-shadow:0 0 5px rgba(0,0,0,.1)}.window--classic .window_chatError{bottom:90px;width:calc(100% - 40px)}.window--bubble .window_chatError,.window--circle .window_chatError{bottom:60px;width:100%;border-radius:20px}.window--bubble .window_chatError{border-radius:8px}.window_chatErrorClose{position:absolute;right:15px;top:50%;font-size:1.6em;margin-top:-9px;cursor:pointer}.window_chatError--mitigate{background:#ffe8c4;border:1px solid #ffdeb0;color:#ee8835}.window_chatError--urgency{background:#ffebeb;border:1px solid #fdd;color:#de3939}.window--circle .window__chatAgentMessage{background:#000001;float:left;margin-left:-40px;color:#000004;min-height:58px;padding-left:56px;border-radius:20px}.window--circle .window__chatVisitorMessage{border:1px solid #ddd;border-radius:20px}.window--circle .agentMessage__avatar{position:relative;z-index:9;top:15px;left:15px}.window--circle .window__chatAgentMessage.chat-message--img{padding:15px 15px 15px 56px}.window--circle .window__chatAgentMessage.window__chatMessageNoAvatar.chat-message--img{padding-left:15px}.window--circle .window__chat{padding:20px 15px}.window--circle .window__chatMessageNoAvatar{margin-left:0;padding-left:15px;display:block;min-height:auto}.window--bubble .window__chatMessageNoAvatar{margin-left:50px}.window--circle .window__chatAgentMessage--file::before{color:#000004}.window--bubble .window__chat>div{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.window--bubble .window__chatAgent{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end}.window--bubble .window__chatVisitor{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}.window--bubble .chat-time{-ms-flex-item-align:center;margin-top:0;font-size:.8em;padding:0 5px}.window--bubble .window__chatAgentMessage{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;background:#000001;border:1px solid #000001;float:left;color:#000004;border-radius:8px 8px 8px 0;max-width:calc(100% - 100px)}.window--bubble .window__chatSystemMessage{display:-webkit-box;display:-ms-flexbox;display:flex;text-align:left;color:#3c3c3c;position:relative;left:50px;font-size:1em;line-height:20px;margin-top:0;margin-bottom:10px;word-wrap:break-word;word-break:break-word;max-width:calc(100% - 100px)}.window--bubble .window__chatSystemMessage a{color:#3c3c3c}.window--bubble .window__chatSystemMessageContent{background:#f0f0f0;border:1px solid #ddd;padding:14px 15px;border-radius:8px 8px 8px 0}.window--ie .window--bubble .window__chatSystemMessageContent{width:100%}.window--bubble .icon-bubble-content,.window--bubble .icon-bubble-line{position:absolute;width:10px}.window--bubble .chat-message--img .icon-bubble-content,.window--bubble .chat-message--img .icon-bubble-line,.window--bubble .chat-message--img .icon-bubble-line-right{display:none}.window--bubble .icon-bubble-content .svgPath,.window--bubble .icon-bubble-line .svgPath{width:auto;height:auto}.window--bubble .icon-bubble-line{bottom:-1px}.window--bubble .icon-bubble-content,.window--bubble .window__chatSystemMessage .icon-bubble-line{bottom:0}.window--bubble .window__chatAgentMessage .icon-bubble-content,.window--bubble .window__chatSystemMessage .icon-bubble-content{left:-9px}.window--bubble .window__chatAgentMessage .icon-bubble-line{left:-10px}.window--bubble .window__chatSystemMessage .icon-bubble-line{left:-9px}.window--bubble .window__chatVisitorMessage .icon-bubble-content{right:-9px}.window--bubble .window__chatVisitorMessage .icon-bubble-line{right:-10px}.window--bubble .window__chatVisitorMessage .icon-bubble-line-right{position:absolute;width:10px;right:-9px;bottom:-1px}.window--bubble .window__chatSystemMessage .icon-bubble-content::before{color:#f0f0f0}.window--bubble .window__chatSystemMessage .icon-bubble-content .bubblecontent1{fill:#f0f0f0}.window--bubble .window__chatSystemMessage .icon-bubble-line::before{color:#ddd}.window--bubble .window__chatSystemMessage .icon-bubble-line .bubbleline1{fill:#f0f0f0;stroke:#ddd;stroke-width:2px}.window--bubble .window__chatVisitorMessage .icon-bubble-line-right .bubblelineright1{fill:#fff;stroke:#ddd;stroke-width:2px}.window--bubble .window__chatVisitorMessage .icon-bubble-line-right .bubblelineright0{fill:#fff}.window--bubble .window__chatAgentMessage .icon-bubble-content::before,.window--bubble .window__chatAgentMessage .icon-bubble-line::before{color:#000001}.window--bubble .window__chatAgentMessage .icon-bubble-line .bubbleline1{fill:#000001;stroke:#000001;stroke-width:1px}.window--bubble .window__chatVisitorMessage .icon-bubble-content,.window--bubble .window__chatVisitorMessage .icon-bubble-line{left:auto;-webkit-transform:rotateY(180deg);transform:rotateY(180deg)}.window--bubble .window__chatVisitorMessage .icon-bubble-content::before{color:#fff}.window--bubble .window__chatVisitorMessage .icon-bubble-line::before{color:#ddd}.window--bubble .window__chatVisitorMessage .icon-bubble-content .bubblecontent1{fill:#fff}.window--bubble .window__chatVisitorMessage .icon-bubble-line .bubbleline1{fill:#fff;stroke:#ddd;stroke-width:2px}.window--bubble .window__chatVisitorMessage{border:1px solid #ddd;border-radius:8px 8px 0;max-width:calc(100% - 50px)}.window__chatVisitorMessage .chat-message--loading{position:absolute;left:-30px;top:50%;margin-top:-11px}.window--bubble .agentMessage__avatar{position:relative;z-index:9;margin-right:5px;margin-bottom:2px}.window--bubble .agentMessage__avatarImg{width:45px;height:45px}.window--bubble .window__chatAgentMessage.chat-message--img,.window--bubble .window__chatVisitorMessage.chat-message--img{padding:0;border-radius:8px;background:0 0;border:none}.window--bubble .window__chat{padding:0 15px 10px 0;-ms-flex-negative:0;flex-shrink:0;-webkit-box-flex:0;-ms-flex-positive:0;flex-grow:0;margin-top:35px}.window--bubble .window--bubble__messageNoAvatar{margin-left:0;padding-left:15px;display:block}.window--bubble .window__chatAgentMessage--file{color:#000004}.chatMessage__questionList{margin-top:5px;padding-left:20px;list-style-type:decimal}.chatMessage__questionList a{color:#000}.chatMessage__questionList--disc{list-style-type:disc}.window__chatAgentMessage .btn{margin-top:5px;font-size:.86em;padding:2px 10px;max-width:180px;overflow:hidden;text-overflow:ellipsis}.window--mobile .window__chatAgentMessage .btn{max-width:100%}.chatMessage__chatBotRate{width:95px;height:25px;margin:10px 10px 15px 0;border:1px solid rgba(0,0,0,.2);box-sizing:border-box;float:left;text-align:center;line-height:25px;cursor:pointer;border-radius:2px;overflow:hidden;text-overflow:ellipsis}.window--circle .chatMessage__chatBotRate{width:110px;float:none;margin-bottom:0;margin-left:auto;margin-right:auto!important}.chatMessage__chatBotRate--disabled{opacity:.5;cursor:default}.chatMessage__chatBotRate--selected{opacity:1}.window--classic .chatMessage__chatBotRate--selected{border-color:#000}.chatMessage__chatBotRate:not(.chatMessage__chatBotRate--disabled):hover{box-shadow:0 0 10px rgba(0,0,0,.12)}.chatMessage__chatBotRate .icon{position:relative;top:2px;margin-right:6px;font-size:1em;color:#7f7d7c}.chatMessage__chatBotRate.chatMessage__chatBotRate--selected .icon{color:#000}.chatMessage__chatBotRate:not(.chatMessage__chatBotRate--disabled):hover .icon{color:#333232}.chatMessage__chatBotRateText{font-size:.86em;color:#000;height:20px;display:inline-block;vertical-align:top;max-width:70px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.chatMessage__chatBotRateSplitLine{margin:15px 0 10px;border-top:1px dashed #bbb;clear:both}.window__chatWithAgent{z-index:9;display:inline-block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:150px;height:30px;line-height:30px;text-align:center;padding-right:15px;padding-left:15px;cursor:pointer}.window__chatWithAgent:hover{opacity:.9}.window__chatWithAgent--above{position:absolute;top:-40px;left:50%;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%);border:1px solid #000002;background-color:#fff;color:#000;border-radius:2px;box-shadow:0 0 15px rgba(0,0,0,.1)}.window--bubble .chatMessage__chatBotRate .icon,.window--bubble .chatMessage__chatBotRateText,.window--bubble .chatMessage__questionList a,.window--circle .chatMessage__chatBotRate .icon,.window--circle .chatMessage__chatBotRateText,.window--circle .chatMessage__questionList a,.window--classic .window__chatAgentMessage .btn,.window__chatWithAgent--bottom{color:#000004}.window__chatWithAgent--bottom{position:absolute;bottom:0;left:15px;font-size:1.08em;padding-left:24px}.window--bubble .window__chatWithAgent--bottom{left:0}.window__chatWithAgent--bottom .icon{font-size:.87em;position:absolute;top:10px;left:0}.window--bubble .chatMessage__chatBotRate,.window--circle .chatMessage__chatBotRate{border:1px solid #000004}.window--bubble .chatMessage__chatBotRate:not(.chatMessage__chatBotRate--disabled):hover .icon,.window--circle .chatMessage__chatBotRate:not(.chatMessage__chatBotRate--disabled):hover .icon{color:#000004;opacity:.8}.chatMessage__chatBotRateLast{margin-right:0!important}.window--bubble .chatMessage__chatBotRateLast,.window--mobile .window--circle .chatMessage__chatBotRateLast,.window--mobile .window--classic .chatMessage__chatBotRateLast{margin-right:auto!important}.window--bubble .window__chatAgentMessage .btn,.window--circle .window__chatAgentMessage .btn{color:#000001;background:#fff;border-radius:20px}.window--bubble .window__chatWithAgent--above,.window--circle .window__chatWithAgent--above{border-radius:4px}.window--bubble .window__chatWithAgent--bottom,.window--circle .window__chatWithAgent--bottom{color:#000001}.window--bubble .chatMessage__chatBotRate{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;float:none;margin:10px auto 0;width:110px;padding:0 4px}.window--bubble .window__chatAgentMessage .btn{border-radius:8px}.window__chat .dot{position:relative;top:-3px}.window__chat .dot__element{display:inline-block;width:4px;height:4px;border-radius:100%;margin-right:5px;background:#333}.window__chat .dot__element:last-child{margin-right:0}.amimated-infinite{-webkit-animation-iteration-count:infinite}@-webkit-keyframes dot__element--loadingAnimation{0%,100%,50%{-webkit-transform:translateY(0);transform:translateY(0)}25%{-webkit-transform:translateY(-8px);transform:translateY(-8px)}}@keyframes dot__element--loadingAnimation{0%,100%,50%{-webkit-transform:translateY(0);transform:translateY(0)}25%{-webkit-transform:translateY(-8px);transform:translateY(-8px)}}.window__chat .dot__element--loadingAnimation{-webkit-animation-name:dot__element--loadingAnimation;animation-name:dot__element--loadingAnimation;-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite}.window--bubble .chat-message--imgLoading,.window--circle .chat-message--imgLoading,.window--classic .chat-message--imgLoading{width:60px;height:60px;text-align:center;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.pciImageWrapper{width:53px;height:34px;background:url(images/pci.svg) center no-repeat;background-size:53px 34px;border:0;position:absolute;bottom:45px;left:20px}.postchatFormContainer{position:absolute;top:80px;bottom:30px;overflow:auto;overflow-x:hidden;padding:30px 50px;width:100%;-webkit-transform:translateY(450px);-ms-transform:translateY(450px);transform:translateY(450px);opacity:0}.postchatFormContainer__greeting{margin-bottom:20px}.postchatFormContainer__submitContainer{text-align:center}@-webkit-keyframes fadeInUp--windowFormContainer{0%{opacity:0;-webkit-transform:translateY(375px);transform:translateY(375px)}100%{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes fadeInUp--windowFormContainer{0%{opacity:0;-webkit-transform:translateY(375px);transform:translateY(375px)}100%{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}}.window--bubble .window__ssoLogin{-ms-flex-negative:0;flex-shrink:0;-webkit-box-flex:0;-ms-flex-positive:0;flex-grow:0}.chatInputContainer{position:relative;z-index:99;-ms-flex-negative:0;flex-shrink:0;height:80px}.chatInputContainer--fadeInUp{-webkit-animation:fadeInUp 458ms cubic-bezier(.785,.135,.15,.86) both;animation:fadeInUp 458ms cubic-bezier(.785,.135,.15,.86) both}.window--ie .chatInputContainer--fadeInUp{-webkit-animation:none;animation:none}.chat-input__controlbox{height:100%}.window__chatInputControl{display:block;width:100%;height:100%;padding-top:0;padding-bottom:0;border:none;font-size:1em;color:#000;outline:0}.chatInput--ripple{position:absolute;border-radius:50%;width:50px;height:50px;background:#ddd;-webkit-animation:chatInput--ripple 2s;animation:chatInput--ripple 2s}@-webkit-keyframes chatInput--ripple{from{-webkit-transform:scale(1);transform:scale(1);opacity:.4}to{-webkit-transform:scale(100);transform:scale(100);opacity:0}}@keyframes chatInput--ripple{from{-webkit-transform:scale(1);transform:scale(1);opacity:.4}to{-webkit-transform:scale(100);transform:scale(100);opacity:0}}.window__chatSender{position:absolute;bottom:14px;right:20px;width:40px;height:40px;border:1px solid #ddd;padding:7px;border-radius:100%;top:50%;margin-top:-20px}.window__chatSender--active{border-color:#000002}.window__chatSender--active:hover{box-shadow:0 0 10px rgba(0,0,0,.15);cursor:pointer}.window--mobile .window__chatSender--active{box-shadow:none}.window__chatSenderSVG{margin-top:2px}.window__chatSenderSVGPath{fill-rule:evenodd;clip-rule:evenodd;fill:#bbb}.window__chatSender--active .window__chatSenderSVGPath{fill:#000001}.window__chatSender .icon-input-send{color:#bbb;font-size:1.33em;margin-top:3px;margin-right:3px}.window__chatSender--active .icon-input-send{color:#000001}.window--classic .chatInputContainer{background:#fff;height:auto}.window--classic .chatInputContainer--active .window__chatInputControl,.window--classic .window__chatInputControl:focus{border-top-color:#000002;box-shadow:0 0 60px rgba(0,0,0,.08);transition:all 292ms cubic-bezier(.785,.135,.15,.86)}.window__chatInput--Drag::before{position:absolute;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;background:rgba(250,245,205,.85);z-index:99;text-align:center;color:#d2b067;font-size:2.133em}.window--classic .chat-input__controlbox{border-top:1px solid #ddd;background:#fff}.window--classic .chatInputContainer--active .chat-input__controlbox{border-top-color:#000002}.window--classic .window__chatInputControl{border:none;background-color:transparent;padding:8px 75px 8px 10px;max-height:100px;min-height:70px;overflow-y:hidden;overflow-x:hidden;height:70px;line-height:inherit}.window--bubble .window__chatInputControl,.window--circle .window__chatInputControl{background-color:#fff;max-height:85px;line-height:21px;overflow-y:hidden;overflow-x:hidden}.window--circle .chatInputContainer{height:auto;margin-left:15px;margin-right:15px}.window--circle .window__chatInputControl{height:21px;border:none;padding:0}.window--circle .window__chatInput--Drag::before{border-radius:20px}.window--circle .chatInputContainer--active .chat-input__controlbox{border-color:#000001;box-shadow:0 0 30px rgba(0,0,0,.08);transition:all 292ms cubic-bezier(.785,.135,.15,.86)}.window--mobile .window--circle .chatInputContainer--active .footer__operation{-webkit-transform:none;-ms-transform:none;transform:none}.window--circle .chat-input__controlbox{position:relative;border:1px solid #ddd;border-radius:20px;padding:9px 20px;background:#fff}.window--bubble .chatInputContainer--active .chat-input__controlbox,.window--circle .chatInputContainer--active .chat-input__controlbox{overflow-x:hidden}.window--bubble .chatInputContainer{height:auto}.window--bubble .window__chatInputControl{height:21px;border:none;padding:0}.footer,.footer-text-single-line{height:30px}.window--bubble.window-rtl .window__chatInputControl{overflow-x:hidden}.window--bubble .window__chatInput--Drag::before{border-radius:8px}.window--bubble .chat-input__controlbox{position:relative;border:1px solid #ddd;border-radius:8px;padding:9px 15px;background:#fff}.window--bubble .chatInputContainer--active .chat-input__controlbox{border-color:#000001;box-shadow:0 0 30px rgba(0,0,0,.08);transition:all 292ms cubic-bezier(.785,.135,.15,.86)}.window--bubble .chatInputContainer--typed .footer__operation,.window--circle .chatInputContainer--typed .footer__operation{-webkit-transform:translateX(100%);-ms-transform:translateX(100%);transform:translateX(100%)}.window--bubble.window--rtl .chatInputContainer--typed .footer__operation,.window--circle.window--rtl .chatInputContainer--typed .footer__operation{-webkit-transform:translateX(-100%);-ms-transform:translateX(-100%);transform:translateX(-100%)}.window--mobile .window--bubble .chatInputContainer--typed .footer__operation,.window--mobile .window--circle .chatInputContainer--typed .footer__operation{-webkit-transform:none;-ms-transform:none;transform:none}.window--bubble .chat-input__controlbox .bubble-box--show .bubble,.window--circle .chat-input__controlbox .bubble-box--show .bubble{position:fixed;bottom:74px;left:auto;right:10px;z-index:9}.window--bubble.window--embedded .chat-input__controlbox .bubble-box--show .bubble,.window--circle.window--embedded .chat-input__controlbox .bubble-box--show .bubble{bottom:104px}.window--bubble.window--rtl .chat-input__controlbox .bubble-box--show .bubble,.window--circle.window--rtl .chat-input__controlbox .bubble-box--show .bubble{left:40px}.window--bubble .chat-input__controlbox--disabled,.window--bubble .chat-input__controlbox--disabled .window__chatInputControl,.window--circle .chat-input__controlbox--disabled,.window--circle .chat-input__controlbox--disabled .window__chatInputControl{background:#ebebeb}.window--bubble .chat-input__controlbox--disabled,.window--circle .chat-input__controlbox--disabled{position:static}.footer{position:relative;-ms-flex-negative:0;flex-shrink:0;z-index:999;width:100%;line-height:30px;text-align:right;padding-left:15px;padding-right:15px;font-size:.8em}.window--bubble .footer{padding-left:0;padding-right:0}.footer__svg{position:relative;line-height:1}.footer__svg--disabled{opacity:.5}.footer__svgPath{fill:#000004;width:16px;height:16px}.footer__svgRatePath1{fill:none;stroke:#000004;stroke-miterlimit:10}.footer__svgRatePath2{fill:none}.footer__svg:not(.footer__svg--disabled) svg:hover{cursor:pointer}.footer__svg--disabled svg:hover{cursor:default}.invitation,a{cursor:pointer}.footer__svg:not(.footer__svg--disabled) svg:hover .footer__sendemail1,.footer__svg:not(.footer__svg--disabled) svg:hover .footer__svgPathSendFile1,.footer__svg:not(.footer__svg--disabled) svg:hover .footer__svgPathVideo1,.footer__svg:not(.footer__svg--disabled) svg:hover .footer__svgPathVoice1,.footer__svg:not(.footer__svg--disabled) svg:hover .footer__svgRatePath2{fill:rgba(255,255,255,.3)}.footer__svgPathSendFile1,.footer__svgPathVideo1{fill:none}.footer__svgPathSendFile2{fill:none;stroke:#000004;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}.footer__print3,.footer__print4,.footer__svgPathVideo2{fill:#000004}.window--bubble .footer__svgPathVideo2,.window--circle .footer__svgPathVideo2{fill:#fff}.footer__print1,.footer__svgPathVideo3{fill:none;stroke:#000004;stroke-miterlimit:10}.footer__print0,.footer__print2,.footer__svgPathVoice1{fill:none}.footer__svgPathVoice2{fill:none;stroke:#000004;stroke-miterlimit:10}.footer__svgPathVoice3{fill:#a3a3a3}.window--classic .footer__svgPathVoice3{fill:#000004}.footer__sendemail1{fill:none}.footer__sendemail2{fill:none;stroke:#000004;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}.window--classic .window__footer{color:#000004;background:#000001;-webkit-animation:fadeInUp 458ms cubic-bezier(.785,.135,.15,.86) both;animation:fadeInUp 458ms cubic-bezier(.785,.135,.15,.86) both}.window--ie .window--classic .window__footer{-webkit-animation:none;animation:none}.window--classic .footer__svg{float:left;margin-right:10px;margin-top:7px;width:16px;height:16px}.window--classic .footer__operation{height:30px;float:left;-webkit-animation:fadeInUp 458ms cubic-bezier(.785,.135,.15,.86) .4s both;animation:fadeInUp 458ms cubic-bezier(.785,.135,.15,.86) .4s both}.window--ie .window--classic .footer__operation{-webkit-animation:none;animation:none}.window--bubble .footer,.window--circle .footer{color:rgba(0,0,0,.3)}.window--bubble .footer__print1,.window--bubble .footer__svgPathSendFile2,.window--bubble .footer__svgPathVideo3,.window--bubble .footer__svgPathVoice2,.window--bubble .footer__svgRatePath1,.window--circle .footer__print1,.window--circle .footer__svgPathSendFile2,.window--circle .footer__svgPathVideo3,.window--circle .footer__svgPathVoice2,.window--circle .footer__svgRatePath1{stroke:#a3a3a3}.window--bubble .footer__print0,.window--bubble .footer__print3,.window--bubble .footer__sendemail1,.window--circle .footer__print0,.window--circle .footer__print3,.window--circle .footer__sendemail1{fill:#a3a3a3}.window--bubble .footer__print1,.window--bubble .footer__print2,.window--bubble .footer__print4,.window--circle .footer__print1,.window--circle .footer__print2,.window--circle .footer__print4{fill:none}.window--bubble .footer__sendemail2,.window--bubble .footer__svgPathVoice3,.window--circle .footer__sendemail2,.window--circle .footer__svgPathVoice3{stroke:transparent}.window--bubble .footer__svgPathVideo1,.window--bubble .footer__svgPathVoice2,.window--bubble .footer__svgRatePath2,.window--circle .footer__svgPathVideo1,.window--circle .footer__svgPathVoice2,.window--circle .footer__svgRatePath2{fill:#a3a3a3}.window--bubble .footer__operation,.window--circle .footer__operation{position:absolute;right:0;top:12px;padding-right:10px;transition:-webkit-transform 292ms cubic-bezier(.785,.135,.15,.86);transition:transform 292ms cubic-bezier(.785,.135,.15,.86);transition:transform 292ms cubic-bezier(.785,.135,.15,.86),-webkit-transform 292ms cubic-bezier(.785,.135,.15,.86)}.window--bubble .footer__operation>ul,.window--circle .footer__operation>ul{background:#fff}.window--bubble .chat-input__controlbox--disabled .footer__operation>ul,.window--circle .chat-input__controlbox--disabled .footer__operation>ul{background:#ebebeb}.window--bubble.window--rtl .footer__operation,.window--circle.window--rtl .footer__operation{right:auto;left:0;padding-right:0;padding-left:15px}.window--bubble .footer__svg,.window--circle .footer__svg{float:left;margin-right:10px;width:16px;height:16px}.window--bubble .footer__svg:not(.footer__svg--disabled) svg:hover .footer__print0,.window--bubble .footer__svg:not(.footer__svg--disabled) svg:hover .footer__sendemail1,.window--bubble .footer__svg:not(.footer__svg--disabled) svg:hover .footer__svgPathVideo1,.window--bubble .footer__svg:not(.footer__svg--disabled) svg:hover .footer__svgPathVoice1,.window--bubble .footer__svg:not(.footer__svg--disabled) svg:hover .footer__svgPathVoice2,.window--bubble .footer__svg:not(.footer__svg--disabled) svg:hover .footer__svgPathVoice3,.window--bubble .footer__svg:not(.footer__svg--disabled) svg:hover .footer__svgRatePath2,.window--circle .footer__svg:not(.footer__svg--disabled) svg:hover .footer__print0,.window--circle .footer__svg:not(.footer__svg--disabled) svg:hover .footer__sendemail1,.window--circle .footer__svg:not(.footer__svg--disabled) svg:hover .footer__svgPathVideo1,.window--circle .footer__svg:not(.footer__svg--disabled) svg:hover .footer__svgPathVoice1,.window--circle .footer__svg:not(.footer__svg--disabled) svg:hover .footer__svgPathVoice2,.window--circle .footer__svg:not(.footer__svg--disabled) svg:hover .footer__svgPathVoice3,.window--circle .footer__svg:not(.footer__svg--disabled) svg:hover .footer__svgRatePath2{fill:#828282}.window--bubble .footer__svg:not(.footer__svg--disabled) svg:hover .footer__svgPathSendFile2,.window--bubble .footer__svg:not(.footer__svg--disabled) svg:hover .footer__svgPathVoice2,.window--bubble .footer__svg:not(.footer__svg--disabled) svg:hover .footer__svgRatePath1,.window--circle .footer__svg:not(.footer__svg--disabled) svg:hover .footer__svgPathSendFile2,.window--circle .footer__svg:not(.footer__svg--disabled) svg:hover .footer__svgPathVoice2,.window--circle .footer__svg:not(.footer__svg--disabled) svg:hover .footer__svgRatePath1{stroke:#828282}.poweredby a{color:#000004;text-decoration:none}.window--circle .poweredby a{color:#bbb}.window--bubble .poweredby a{color:#979797}.invitation{position:fixed;z-index:2147483637;right:30px;bottom:125px;width:250px;border:1px solid #ddd;background:#fff}.invitation--bubble{border-radius:8px}.invitation--classic{border-radius:4px}.invitation--circle{border-radius:20px}.invitation__name{font-size:1em;color:#000;font-weight:700;font-family:\"SourceSans Pro Bold\";padding:.947368rem 1.315789rem 0}.invitation__message{font-size:1em;line-height:18px;padding:0 1.315789rem;margin-bottom:1.315789rem;color:#666;max-height:180px;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:10;-webkit-box-orient:vertical}.invitation__close{position:absolute;top:2px;right:5px;font-size:1.06em;color:#333;line-height:1;cursor:pointer}.invitation__type{height:35px;line-height:35px;padding:0 25px;background:#f0f0f0;color:#bbb;font-size:.93em}.invitation::after,.invitation::before{content:'';position:absolute;width:0;height:0}.invitation::before{right:20px;bottom:-22px;border:11px solid transparent;border-top-color:#ddd}.invitation::after{right:22px;bottom:-18px;border:9px solid transparent;border-top-color:#f0f0f0}@-webkit-keyframes invitation-show{0%{-webkit-transform:scale(0);transform:scale(0);-webkit-transform-origin:calc(100% - 29px) calc(100% + 18px);transform-origin:calc(100% - 29px) calc(100% + 18px)}100%{-webkit-transform:scale(1);transform:scale(1);-webkit-transform-origin:calc(100% - 29px) calc(100% + 18px);transform-origin:calc(100% - 29px) calc(100% + 18px)}}@keyframes invitation-show{0%{-webkit-transform:scale(0);transform:scale(0);-webkit-transform-origin:calc(100% - 29px) calc(100% + 18px);transform-origin:calc(100% - 29px) calc(100% + 18px)}100%{-webkit-transform:scale(1);transform:scale(1);-webkit-transform-origin:calc(100% - 29px) calc(100% + 18px);transform-origin:calc(100% - 29px) calc(100% + 18px)}}.invitation-show{-webkit-animation-name:invitation-show;animation-name:invitation-show;-webkit-animation-duration:375ms;animation-duration:375ms}@-webkit-keyframes invitation-showType{0%{-webkit-transform:translateY(35px);transform:translateY(35px);opacity:0}100%{-webkit-transform:translateY(0);transform:translateY(0);opacity:1}}@keyframes invitation-showType{0%{-webkit-transform:translateY(35px);transform:translateY(35px);opacity:0}100%{-webkit-transform:translateY(0);transform:translateY(0);opacity:1}}.invitation-showType{-webkit-animation-name:invitation-showType;animation-name:invitation-showType;-webkit-animation-duration:.25s;animation-duration:.25s;-webkit-animation-delay:125ms;animation-delay:125ms}@-webkit-keyframes invitation-showmessage{0%{opacity:0}100%{opacity:1}}@keyframes invitation-showmessage{0%{opacity:0}100%{opacity:1}}.invitation-showmessage{-webkit-animation-name:invitation-showmessage;animation-name:invitation-showmessage;-webkit-animation-duration:167ms;animation-duration:167ms;-webkit-animation-delay:292ms;animation-delay:292ms;white-space:pre-wrap;word-break:break-word}.modal--classic{border-radius:4px}.modal--circle{border-radius:20px}.modal--bubble{border-radius:8px}.modal--mobile__mask{position:fixed;top:0;bottom:0;left:0;right:0;background:rgba(0,0,0,.3)}.modal--mobile{position:absolute;left:50%;top:50%;background:#fff;box-shadow:0 5px 10px rgba(0,0,0,.2);width:300px;-webkit-animation:showinvitation .4s forwards cubic-bezier(.785,.135,.15,.86);animation:showinvitation .4s forwards cubic-bezier(.785,.135,.15,.86)}@-webkit-keyframes showinvitation{0%{-webkit-transform:scale(0) translate(-50%,-50%);transform:scale(0) translate(-50%,-50%);-webkit-transform-origin:0 0;transform-origin:0 0}100%{-webkit-transform:scale(1) translate(-50%,-50%);transform:scale(1) translate(-50%,-50%);-webkit-transform-origin:0 0;transform-origin:0 0}}@keyframes showinvitation{0%{-webkit-transform:scale(0) translate(-50%,-50%);transform:scale(0) translate(-50%,-50%);-webkit-transform-origin:0 0;transform-origin:0 0}100%{-webkit-transform:scale(1) translate(-50%,-50%);transform:scale(1) translate(-50%,-50%);-webkit-transform-origin:0 0;transform-origin:0 0}}.modal__invitation-title{color:#fff;background:#4f4f4f;height:30px;line-height:30px;padding-left:15px;padding-right:15px;font-size:.93em;border-top-left-radius:2px;border-top-right-radius:2px}.modal__invitation-message{font-size:21px;color:#000;text-align:center;padding:24px 30px;font-family:SourceSans Pro Bold,Arial}.modal__invitation-operation{text-align:center;padding:0 30px 30px}.modal__invitation-operation .btn{margin-left:10px}.modal__invitation-operation .btn:first-child{margin-left:0}.window--mobile .window--bubble .window__chatOperationPlus,.window--mobile .window--bubble .window__chatSender,.window--mobile .window--circle .window__chatOperationPlus,.window--mobile .window--circle .window__chatSender,.window--mobile .window--classic .window__chatOperationPlus{display:block}.window--mobile .chatInputContainer{overflow:initial;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:5px 0 5px 15px}.window--mobile .chatInputContainer--withplus{padding-left:0}.window--mobile .chat-time{display:block}.window--mobile .footer__operation{position:absolute;bottom:70px;left:20px;top:auto;right:auto;padding-right:0;background-color:#fff;border:1px solid #ddd;box-shadow:0 0 15px rgba(0,0,0,.2);-webkit-transform-origin:0 160px;-ms-transform-origin:0 160px;transform-origin:0 160px}.window--mobile .window--classic .footer__operation{height:auto;border-radius:4px 4px 4px 0;z-index:2147483000;-webkit-animation:none;animation:none}.window--mobile .window--bubble .footer__operation--show,.window--mobile .window--circle .footer__operation--show,.window--mobile .window--classic .footer__operation--show{-webkit-animation:footer__operationScale 333ms cubic-bezier(.785,.135,.15,.86) both;animation:footer__operationScale 333ms cubic-bezier(.785,.135,.15,.86) both}@-webkit-keyframes footer__operationScale{0%{-webkit-transform:scale(0);transform:scale(0)}100%{-webkit-transform:scale(1);transform:scale(1)}}@keyframes footer__operationScale{0%{-webkit-transform:scale(0);transform:scale(0)}100%{-webkit-transform:scale(1);transform:scale(1)}}.window--mobile .footer__operation::before{content:'';position:absolute;z-index:9;left:0;bottom:-14px;width:0;height:0;border:7px solid transparent;border-top-color:#fff;border-left-color:#fff}.window--mobile .footer__operation::after{content:'';position:absolute;z-index:8;left:-1px;bottom:-17px;width:0;height:0;border:8px solid transparent;border-top-color:#ddd;border-left-color:#ddd}.window--mobile .footer__operation .footer__svg{float:none;display:block;height:30px;line-height:30px;width:auto;margin-top:0;margin-right:0;padding-left:20px;padding-right:30px;color:#000}.window--circle .window__chatSenderSVGPath,.window--mobile .window__footer{display:none}.window--mobile .footer__operation .footer__svg .svg{float:left;margin-top:7px;margin-right:10px}.window--mobile .window--classic .footer__operation li:first-child{border-top-left-radius:4px;border-top-right-radius:4px}.window--mobile .window--classic .footer__operation li:last-child{border-bottom-right-radius:4px}.window--mobile .window--circle .footer__operation li:first-child{border-top-left-radius:20px;border-top-right-radius:20px}.window--mobile .window--circle .footer__operation li:last-child{border-bottom-right-radius:20px}.window--mobile .window--bubble .footer__operation li:first-child{border-top-left-radius:8px;border-top-right-radius:8px}.window--mobile .window--bubble .footer__operation li:last-child{border-bottom-right-radius:8px}.footer__operation li:not(.footer__svg--disabled):focus,.window--mobile .footer__operation li:not(.footer__svg--disabled):active{background-color:#000002}.window--mobile{font-size:16px;background-color:rgba(0,0,0,.15);-webkit-backface-visibility:hidden}.window--mobileHorizontal .window--embedded,.window--mobileVertical .window--embedded{top:0;right:0;bottom:0;left:0;width:100%;height:100%}.window--mobileVertical .window--embedded.window--circle.window--bio{top:45px;height:calc(100% - 45px)}.window--mobileVertical .window--embedded.window--circle{height:100%}.window--mobile .window--classic .chatInputContainer{background:#000001}.window--mobile .chat-input__controlbox{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;padding:7px 15px}.window--mobile .window--classic .chat-input__controlbox{padding:7px 10px;border-top:none;border-radius:4px}.window--mobile .window--classic .window__chatInputControl{padding:0;height:21px;line-height:21px;min-height:21px;box-shadow:none}.window--mobile .window__chatSender .icon-input-send{color:#000004;font-size:1.56em;margin-top:5px}.window--mobile .window__chatSender--active .icon-input-send{color:#000004}.window--mobile .window--bubble .window__chatSender .icon-input-send,.window--mobile .window--circle .window__chatSender .icon-input-send{color:#bbb}.window--mobile .window--bubble .window__chatSender--active .icon-input-send,.window--mobile .window--circle .window__chatSender--active .icon-input-send{color:#000001}.window--mobile .window__chatSender{position:static;margin-top:0;right:0;border:none;-webkit-transform:rotateY(180deg);transform:rotateY(180deg);bottom:5px;padding:0 5px;height:auto}.window--mobile .window__chatSenderSVGPath{fill:#000004}.window--mobile .footer__sendemail1,.window--mobile .footer__svgPathVideo1,.window--mobile .footer__svgPathVoice1,.window--mobile .footer__svgPathVoice3,.window--mobile .footer__svgRatePath2,.window--mobile .window--classic .footer__svgPathVoice3{fill:#bbb!important}.window--mobile .footer__svgPathSendFile2,.window--mobile .footer__svgPathVideo3,.window--mobile .footer__svgPathVoice2,.window--mobile .footer__svgRatePath1{stroke:#bbb!important}.window--mobile .footer__sendemail2,.window--mobile .footer__svgPathVoice3{stroke:transparent!important}.window--mobile .footer__operation li:active .footer__svgPathSendFile2,.window--mobile .footer__operation li:active .footer__svgPathVideo3,.window--mobile .footer__operation li:active .footer__svgPathVoice2,.window--mobile .footer__operation li:active .footer__svgRatePath1{stroke:#000001!important}.window--mobile .footer__operation li:active .footer__sendemail1,.window--mobile .footer__operation li:active .footer__svgPathVideo1,.window--mobile .footer__operation li:active .footer__svgPathVoice1,.window--mobile .footer__operation li:active .footer__svgPathVoice2,.window--mobile .footer__operation li:active .footer__svgPathVoice3,.window--mobile .footer__operation li:active .footer__svgRatePath2{fill:#000001!important}.window--mobile .window__chatOperationPlusBox{-ms-flex-preferred-size:40px;flex-basis:40px}.window--mobile .window__chatOperationPlus{width:20px;height:20px;margin:0 auto}.window--mobile .window__chatOperationPlus .icon-plus{font-size:1.33em;color:#fff}.window--mobile.window--mobileVertical .window__chatAgentMessage,.window--mobile.window--mobileVertical .window__chatVisitorMessage{-ms-flex-negative:1;flex-shrink:1}.window--mobile .window--classic .window__chatAgentMessage{max-width:calc(100% - 87px)}.window--mobileHorizontal .window--bubble.whole-window,.window--mobileVertical .window--bubble.whole-window{top:0;height:calc(100% - 0px)}.window--mobile .window--circle .main-container{height:100%}.window--mobile .window--circle .chatInputContainer{background:#fff;margin:0;border-top:1px solid #ddd}.window--mobile .window--circle .chat-input__controlbox{border-radius:20px}.window--mobile .window--circle .window__chatInputControl{padding:0;height:21px;line-height:21px;min-height:21px}.window--mobile .window--circle .chatInputContainer:not(.chatInputContainer--active) .window__chatInputControl{white-space:nowrap}.window--mobile .window--bubble .window__chatSenderSVGPath,.window--mobile .window--circle .window__chatSenderSVGPath{display:block;fill:#ddd}.window--mobile .window--circle .window__chatOperationPlus .icon-plus{color:#bbb!important}.window--mobile .window--bubble .window__chatOperationPlus .icon-plus[active=true],.window--mobile .window--circle .window__chatOperationPlus .icon-plus[active=true]{color:#000001!important}.window--mobile .window--circle .footer__operation{border-radius:20px 20px 20px 0;z-index:2147483000}.window--mobile .window--bubble .footer__operation>ul,.window--mobile .window--circle .footer__operation>ul{background:0 0}.window--mobile .window--bubble .chatInputContainer{background:#fff;border-top:1px solid #ddd}.window--mobile.window--ipad .window--bubble .chatInputContainer{border-top:none}.window--mobile .window--bubble .chat-input__controlbox{border-radius:8px;padding:7px 10px}.window--mobile .bubble::before,.window--mobile .window__chatWithAgent--bottom{display:none}.window--mobile .window--bubble .window__chatOperationPlus .icon-plus{color:#bbb!important}.window--mobile .window--bubble .footer__operation{border-radius:8px 8px 8px 0;z-index:2147483000}.window--mobile .window--bubble.window--rtl .footer__operation{padding-left:0;left:15px}.window--mobile .window__chatSender--active .window__chatSenderSVGPath{fill:#000001}.window--mobile .window--classic .window__chatSender--active .window__chatSenderSVGPath{fill:#fff}.window--mobile .window_chatError{position:absolute;z-index:2147483000;width:calc(100% - 40px)}.window--mobileHorizontal .window--embedded.window--circle{top:40px;height:calc(100% - 40px)}.window--mobile .window--bubble .window__chat{-ms-flex-negative:1;flex-shrink:1;padding-left:10px;padding-right:16px}.window--mobile .chatMessage__chatBotRate{margin:10px auto 0;float:none}body,html,ol,ul{margin:0}.window--ie9.window--classic .header__agentInfo,.window--ie9.window--classic .header__avatar{float:left}.window--mobile .window--circle .chatMessage__chatBotRate{width:95px}.window--mobile .bubble-box{position:fixed;background:rgba(0,0,0,.3);top:0;bottom:0;left:0;right:0;height:100%;width:100%;z-index:999}.window--mobile .bubble-box--show .bubble{left:50%;top:50%;bottom:auto;-webkit-transform:scale(1) translate(-50%,-50%);-ms-transform:scale(1) translate(-50%,-50%);transform:scale(1) translate(-50%,-50%);-webkit-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0;-webkit-animation:showBubble--mobile 333ms cubic-bezier(.785,.135,.15,.86) both;animation:showBubble--mobile 333ms cubic-bezier(.785,.135,.15,.86) both}.window--rtl .container-checkbox i,.window--rtl .controlIndicator{left:auto;right:0}@-webkit-keyframes showBubble--mobile{0%{-webkit-transform:scale(0) translate(-50%,-50%);transform:scale(0) translate(-50%,-50%)}100%{-webkit-transform:scale(1) translate(-50%,-50%);transform:scale(1) translate(-50%,-50%)}}@keyframes showBubble--mobile{0%{-webkit-transform:scale(0) translate(-50%,-50%);transform:scale(0) translate(-50%,-50%)}100%{-webkit-transform:scale(1) translate(-50%,-50%);transform:scale(1) translate(-50%,-50%)}}@media all and (-webkit-min-device-pixel-ratio:0){::-webkit-scrollbar{height:8px;width:8px}.window__chat:hover::-webkit-scrollbar-thumb,.window__form:hover::-webkit-scrollbar-thumb,.window__formContainer:hover::-webkit-scrollbar-thumb,textarea:hover::-webkit-scrollbar-thumb{background-color:#c8c8c8}.window__chat,.window__form{width:calc(100% - 4px)}.window--bubble .window__chat{padding-right:11px}.window--circle .window__chat,.window--classic .window__chat{padding-right:16px}.window__form{padding-right:36px}.window--bubble .window__form{padding-right:26px}::-webkit-scrollbar-button{height:4px;background-color:transparent;background-repeat:no-repeat;cursor:pointer}::-webkit-scrollbar-corner{background-color:#fff}::-webkit-scrollbar-thumb{border-radius:4px;background-color:transparent}::-webkit-scrollbar-track{background-color:transparent}}::-webkit-input-placeholder{color:#bbb}::-moz-placeholder{color:#bbb}:-ms-input-placeholder{color:#bbb}*{-webkit-overflow-scrolling:touch}.window--bubble.whole-window .main-container,.window--classic.whole-window .main-container,body{overflow:hidden}html{font-size:15px}body{font-family:\"SourceSans Pro\",Arial;line-height:1.42857143}h1,h2,h3{font-weight:400;font-family:\"SourceSans Pro Bold\"}.clearfix::after{content:\"\";display:block;clear:both}.main-container,.window--bubble{display:-webkit-box;display:-ms-flexbox;-ms-flex-direction:column;-webkit-box-orient:vertical;-webkit-box-direction:normal}.clear{clear:both}a{color:#000001;text-decoration:underline}a:active,a:focus,a:hover{text-decoration:underline;outline:0!important}input,textarea{font-family:inherit}ol,ul{list-style-type:none;padding:0}b,strong{font-family:SourceSans Pro Bold,Arial}textarea{resize:none}.animated{-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-fill-mode:both;animation-fill-mode:both}.animated.infinite{-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite}.animated.hinge{-webkit-animation-duration:2s;animation-duration:2s}.animated-frames7{-webkit-animation-duration:292ms;animation-duration:292ms}.animated-frames11{-webkit-animation-duration:458ms;animation-duration:458ms}.animated-frames18{-webkit-animation-duration:.75s;animation-duration:.75s}.animated-delayframes1{-webkit-animation-delay:42ms;animation-delay:42ms}.animated-delayframes2{-webkit-animation-delay:83ms;animation-delay:83ms}.animated-delayframes3{-webkit-animation-delay:125ms;animation-delay:125ms}.animated-delayFrames7{-webkit-animation-delay:292ms;animation-delay:292ms}.animated-delayFrames9{-webkit-animation-delay:375ms;animation-delay:375ms}.animated-delayFrames10{-webkit-animation-delay:417ms;animation-delay:417ms}.animated-delayFrames12{-webkit-animation-delay:.5s;animation-delay:.5s}.animated-delayFrames13{-webkit-animation-delay:542ms;animation-delay:542ms}.animated-delayFrames15{-webkit-animation-delay:625ms;animation-delay:625ms}.animated-delayFrames36{-webkit-animation-delay:1.5s;animation-delay:1.5s}.animated-delayFrames39{-webkit-animation-delay:1.625s;animation-delay:1.625s}.animated-delayFrames42{-webkit-animation-delay:1.75s;animation-delay:1.75s}.amimated-infinite{animation-iteration-count:infinite}.transform-origin-00{-webkit-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0}@-webkit-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes fadeInDown{0%{opacity:0;-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}to{opacity:1;-webkit-transform:none;transform:none}}@keyframes fadeInDown{0%{opacity:0;-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}to{opacity:1;-webkit-transform:none;transform:none}}.fadeInDown{-webkit-animation-name:fadeInDown;animation-name:fadeInDown}@-webkit-keyframes main-container--fadeOut{0%{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}99%{opacity:0;-webkit-transform:translateY(0);transform:translateY(0)}100%{opacity:0;-webkit-transform:translateY(620px);transform:translateY(620px)}}@keyframes main-container--fadeOut{0%{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}99%{opacity:0;-webkit-transform:translateY(0);transform:translateY(0)}100%{opacity:0;-webkit-transform:translateY(620px);transform:translateY(620px)}}@-webkit-keyframes main-container--fadeIn{0%{opacity:0;-webkit-transform:translateY(0);transform:translateY(0)}100%{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes main-container--fadeIn{0%{opacity:0;-webkit-transform:translateY(0);transform:translateY(0)}100%{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes fadeInUp{0%{opacity:0;-webkit-transform:translate3d(0,50%,0);transform:translate3d(0,50%,0)}to{opacity:1;-webkit-transform:none;transform:none}}@keyframes fadeInUp{0%{opacity:0;-webkit-transform:translate3d(0,50%,0);transform:translate3d(0,50%,0)}to{opacity:1;-webkit-transform:none;transform:none}}.fadeInUp{-webkit-animation-name:fadeInUp;animation-name:fadeInUp}.fadeInUp--window__form{-webkit-animation-duration:292ms;animation-duration:292ms;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-name:fadeInUp;animation-name:fadeInUp;-webkit-animation-delay:625ms;animation-delay:625ms}@-webkit-keyframes fadeOutUp{0%{opacity:1}to{opacity:0;-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}}@keyframes fadeOutUp{0%{opacity:1}to{opacity:0;-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}}.fadeOutUp{-webkit-animation-name:fadeOutUp;animation-name:fadeOutUp}@-webkit-keyframes at-ripple{0%{box-shadow:0 0 0 0 #dadada}100%{box-shadow:0 0 0 25px rgba(218,218,218,0)}}@keyframes at-ripple{0%{box-shadow:0 0 0 0 #dadada}100%{box-shadow:0 0 0 25px rgba(218,218,218,0)}}.at-ripple{-webkit-animation-name:at-ripple;animation-name:at-ripple}@-webkit-keyframes yAxisWindow{100%{opacity:1}}@keyframes yAxisWindow{100%{opacity:1}}.window--minimized{-webkit-animation:window--minimized .5s forwards cubic-bezier(.785,.135,.15,.86);animation:window--minimized .5s forwards cubic-bezier(.785,.135,.15,.86)}@-webkit-keyframes window--minimized{0%{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}99%{opacity:0;-webkit-transform:translateY(0);transform:translateY(0)}100%{opacity:0;-webkit-transform:translateY(100%);transform:translateY(100%)}}@keyframes window--minimized{0%{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}99%{opacity:0;-webkit-transform:translateY(0);transform:translateY(0)}100%{opacity:0;-webkit-transform:translateY(100%);transform:translateY(100%)}}.animation--chatting.window--animated .header{transition:height 416ms cubic-bezier(.785,.135,.15,.86) .4s}.animation--chatting .prechatHeader,.animation--waiting .prechatHeader{opacity:0;-webkit-transform:translateY(-140px);-ms-transform:translateY(-140px);transform:translateY(-140px);transition:all 416ms cubic-bezier(.785,.135,.15,.86) 1.792s}.window--minimized .chat{-webkit-animation:none;animation:none;opacity:0;transition:opacity 208ms cubic-bezier(.785,.135,.15,.86)}.window--minimized .chatInputContainer,.window--minimized .footer{-webkit-animation:fadeoutdown 167ms cubic-bezier(.785,.135,.15,.86) both;animation:fadeoutdown 167ms cubic-bezier(.785,.135,.15,.86) both}@-webkit-keyframes fadeoutdown{0%{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}100%{opacity:0;-webkit-transform:translateY(100%);transform:translateY(100%)}}@keyframes fadeoutdown{0%{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}100%{opacity:0;-webkit-transform:translateY(100%);transform:translateY(100%)}}@-webkit-keyframes animation-translateY-Up{0%{-webkit-transform:translateY(0);transform:translateY(0);overflow:hidden}100%{-webkit-transform:translateY(-100%);transform:translateY(-100%)}}@keyframes animation-translateY-Up{0%{-webkit-transform:translateY(0);transform:translateY(0);overflow:hidden}100%{-webkit-transform:translateY(-100%);transform:translateY(-100%)}}.animation-translateY-Up{-webkit-animation-duration:458ms;animation-duration:458ms;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-timing-function:cubic-bezier(.785,.135,.15,.86);animation-timing-function:cubic-bezier(.785,.135,.15,.86);-webkit-animation-name:animation-translateY-Up;animation-name:animation-translateY-Up;-webkit-animation-delay:1.209s;animation-delay:1.209s}.whole-window{position:fixed;z-index:10;width:100%;height:100%;box-shadow:0 0 30px rgba(0,0,0,.15)}.window--bubble.whole-window .main-container{position:relative}.window--embedded{right:30px;bottom:30px;width:calc(100% - 60px);height:calc(100% - 60px)}.window--ipad .window--bubble.window--embedded{bottom:0;height:100%}.window--bubble.window--embedded{height:calc(100% - 30px)}.window--bubble{display:flex;flex-direction:column;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}.main-container{display:flex;flex-direction:column;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;width:100%;height:100%;background-repeat:no-repeat;background-position:center bottom;background-color:#fff;background-size:cover}.loading-circle{fill:#a3a3a3}#comm100-audio-chat-window{transition:width .25s cubic-bezier(.785,.135,.15,.86)}.window--classic{border-top-left-radius:2px;border-top-right-radius:2px}.window--bio.window--circle,.window--circle,.window--circle .main-container{border-top-left-radius:20px;border-top-right-radius:20px}.window--circle{height:100%;top:0}.window--bio.window--circle{height:calc(100% - 45px);top:45px}.window--embedded.window--circle{height:calc(100% - 75px);top:unset}.window--bubble{position:absolute;background:0 0;box-shadow:none}.window--bubble:not(.window--embedded){padding-left:15px;padding-right:15px}.window--mobile .window--bubble:not(.window--embedded){padding-left:0;padding-right:0}.window--rtl .container-checkbox,.window--rtl .control{padding-left:0;padding-right:20px}.window--bubble .main-container{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;background:0 0;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;-ms-flex-negative:0;flex-shrink:0;position:static;bottom:0;height:auto}.window--bubble.window--rtl .window__chatSystemMessageContent,.window--rtl .window__chatAgentMessage,.window--rtl .window__chatInputControl,.window--rtl .window__chatSystemMessage,.window--rtl .window__chatVisitorMessage,.window--rtl .window__form,.window--rtl .window__formContainer,.window--rtl .window__formGreeting,.window--rtl .window_chatError{direction:rtl}.window--bubble.window--rtl .window__chatSystemMessage{direction:ltr}@media (-webkit-min-device-pixel-ratio:0){.window--rtl .window__chat,.window--rtl .window__form{width:calc(100% - 12px);margin-left:10px;padding-right:40px}}.window--ie9.window--circle .window__form,.window--ie9.window--classic .window__form{height:calc(100% - 156px);padding-bottom:30px}.window--ie9 .chat-time{margin-top:15px}.window--ie9 .window__chatAgentMessage,.window--ie9 .window__chatVisitorMessage{max-width:calc(100% - 105px)}.window--ie9.window--circle .window__chatAgentMessage,.window--ie9.window--circle .window__chatVisitorMessage{max-width:calc(100% - 65px)}.window--ie9.window--bubble .window__chatAgentMessage .btn{max-width:100%}.window--ie9.chat-time{padding-top:10px}.window--ie9 .chatInputContainer{position:absolute;bottom:30px;width:100%}.window--ie9.window--bubble .chatInputContainer{position:relative;bottom:0}.window--ie9.window--circle .chatInputContainer{width:calc(100% - 30px)}.window--ie9 .window__chat{position:absolute;right:0}.window--ie9.window--bubble .window__chat{position:static;bottom:90px}.window--ie9 .buttonProgressContainerSuccess .buttonProgressBtnAnimated{opacity:.65}.window--ie9 .buttonProgress__layerCircle,.window--ie9 .buttonProgress__layerLoading,.window--ie9 .buttonProgress__layerSuccess,.window--ie9 .lds-css{display:none!important}.window--ie9 .window__footer{position:absolute;bottom:0}.window--ie9.window--bubble .window__footer{position:static}.window--ie9 .multipleText{overflow:auto}.window--ie9.window--bubble .window__chatVisitorMessage .icon-bubble-content,.window--ie9.window--bubble .window__chatVisitorMessage .icon-bubble-line{display:none}.window--ie9.window--bubble .window__chatAgent{position:relative}.window--ie9.window--bubble .agentMessage__avatar{position:absolute;bottom:0}.window--ie9.window--bubble .window__chatAgentMessage{margin-left:50px}.window--ie9.window--bubble .window__chatSystemMessage{float:none}.window--ie9 .rating .star.animate{color:#ffd051}.window--ie9 .select-box .select{padding:5px 10px}.window--ie9 .form-fields .box-field iframe{height:30px}.window--ie9 .window__formContainer--bubble{overflow-y:auto!important}.window--ie9 .chatButton--maximizedAsChatting{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}.window--ie9.window--classic .window__header--withBio{height:136px}.window--ie9.window--classic .window__header--noBio{height:126px}.window--ie9.window--circle .window__header--withBio{height:165px}.window--ie9.window--circle .window__header--noBio{height:115px}.window--ie9.window--classic .window__chat--withBio{max-height:calc(100% - 236px)}.window--ie9.window--classic .window__chat--noBio{max-height:calc(100% - 226px)}.window--ie9.window--circle .window__chat--withBio{max-height:calc(100% - 235px)}.window--ie9.window--circle .window__chat--noBio{max-height:calc(100% - 185px)}.window--ie9.window--bubble .main-container{overflow:auto;overflow-x:hidden}",uo='@font-face{font-family:icons;src:url({FONT_URL_PREFIX}/icons.eot?ac7fafc231cca3ee841672771fd812ae?#iefix) format("embedded-opentype"),url({FONT_URL_PREFIX}/icons.woff?ac7fafc231cca3ee841672771fd812ae) format("woff"),url({FONT_URL_PREFIX}/icons.ttf?ac7fafc231cca3ee841672771fd812ae) format("truetype"),url({FONT_URL_PREFIX}/icons.svg?ac7fafc231cca3ee841672771fd812ae#icons) format("svg")}.icon{font-family:icons!important;font-style:normal;font-weight:400!important;display:inline-block;vertical-align:baseline;text-align:center;text-transform:none;text-rendering:auto;line-height:1;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-bubble-active:before{content:"\\f101"}.icon-bubble-content-copy:before{content:"\\f102"}.icon-bubble-content:before{content:"\\f103"}.icon-bubble-content1:before{content:"\\f104"}.icon-bubble-line-copy:before{content:"\\f105"}.icon-bubble-line:before{content:"\\f106"}.icon-bubble-line1:before{content:"\\f107"}.icon-bubble:before{content:"\\f108"}.icon-close:before{content:"\\f109"}.icon-drag:before{content:"\\f10a"}.icon-embedded:before{content:"\\f10b"}.icon-facebook:before{content:"\\f10c"}.icon-googleplus:before{content:"\\f10d"}.icon-helpful:before{content:"\\f10e"}.icon-input-send:before{content:"\\f10f"}.icon-kb-active:before{content:"\\f110"}.icon-kb:before{content:"\\f111"}.icon-media-active:before{content:"\\f112"}.icon-media:before{content:"\\f113"}.icon-minimize:before{content:"\\f114"}.icon-not-helpful:before{content:"\\f115"}.icon-plus:before{content:"\\f116"}.icon-popup:before{content:"\\f117"}.icon-rating-full:before{content:"\\f118"}.icon-rating-half:before{content:"\\f119"}.icon-sendfile:before{content:"\\f11a"}.icon-video:before{content:"\\f11b"}.icon-voice-active:before{content:"\\f11c"}.icon-voice:before{content:"\\f11d"}',po="chatbotSendGreetingMessage",fo="email",ho="waiting",mo="invited",bo="chatting",go="chatted",wo="classic",vo="circle",yo="bubble",xo=function(e){
return"window--"+e},_o=Object.freeze({classic:wo,circle:vo,bubble:yo,styleClassName:xo}),Co="prelogin",ko="prechat",So="chat",Ao="postchat",To="offline",Io=Object.freeze({loading:"loading",login:Co,ssoLogin:"ssoLogin",prechat:ko,chat:So,postchat:Ao,offline:To}),Ro="done",Po=Math.pow(2,0),Mo=Math.pow(2,1),Oo=Math.pow(2,2),Eo=Math.pow(2,3),No=Math.pow(2,4),Wo=Math.pow(2,5),Bo=Object.freeze({videoIncoming:"videoIncoming",notStart:"notStart",videoRequesting:"videoRequesting",videoChatting:"videoChatting",audioIncoming:"audioIncoming",audioChatting:"audioChatting",audioRequesting:"audioRequesting"}),Do="opening",zo="open",jo="restoring",qo="restored",Lo="minimized",Vo="minimizing",Fo="close",Uo=Object.freeze({opening:Do,open:zo,restoring:jo,restored:qo,minimized:Lo,minimizing:Vo,close:Fo}),Ho=function(e){return e.app.isReady},Go=function(e){return"main"===e.app.server},Yo=function(e){return e.app.isPoppedOut},Qo=function(e){return e.app.banned},Jo=function(e){return e.app.isActive},Xo=function(e){return!e.app.isActive},Zo=function(e){return e.app.isOpenerExists},$o=function(e){return e.app.server},Ko=function(e,t){return/^https?:/.test(t)?t:null==e.configuration?t:null==t?null:[Go(e)?e.configuration.url:e.configuration.standbyUrl,t].join(/^\//.test(t)?"":"/")},er=function(e){return/^(https?:\/\/)?([^\/]*)/gi.exec(e)[2]},tr=function(e,t){if(/^https?:/.test(t))return t;if(null==e.configuration)return t;var n=Go(e)?e.configuration.webrtcSignalingServiceUrl:e.configuration.standbyUrl;return[er(n),t].join(/^\//.test(t)?"":"/")},nr=function(e){return e.configuration.standbyUrl},ir=function(e){return e.configuration.features.department},or=function(e){return e.configuration.heartbeat.online},rr=function(e){return e.configuration.heartbeat.offline},ar=function(e){return e.configuration.heartbeat.stopAfter},sr=function(e){return e.configuration.facebookAppId},cr=function(e){return e.configuration.googlePlusAppId},dr=function(e){return e.configuration.attachmentMaxSize},lr=function(e){return e.configuration.attachmentMaxCount},ur=function(e){return e.configuration.frequencyLimit},pr=function(e){return e.configuration.isChinaIP},fr=function(e){return e.configuration.features.removePoweredby},hr={batchAction:"batchAction",uploadFileAction:"uploadFileAction",getConfig:"getConfig",setCustomVariables:"setCustomVariables",newVisitor:"newVisitor",pageVisit:"pageVisit",getChatButton:"getChatButton",getIfOnline:"getIfOnline",checkIfOnline:"checkIfOnline",checkAutoInvitation:"checkAutoInvitation",confirmAutoInvitation:"confirmAutoInvitation",acceptAutoInvitation:"acceptAutoInvitation",refuseAutoInvitation:"refuseAutoInvitation",checkManualInvitation:"checkManualInvitation",refuseManualInvitation:"refuseManualInvitation",manualInvitationShowed:"manualInvitationShowed",submitSSOInfo:"submitSSOInfo",submitPrechat:"submitPrechat",socialLogin:"socialLogin",requestChat:"requestChat",sendChatMessages:"sendChatMessages",getChatMessages:"getChatMessages",getChatQueue:"getChatQueue",setVisitorStatus:"setVisitorStatus",submitRating:"submitRating",emailTranscript:"emailTranscript",sendFile:"sendFile",endChat:"endChat",submitPostChat:"submitPostChat",submitOfflineMessage:"submitOfflineMessage",chatBotAnswerHelpful:"chatBotAnswerHelpful",chatBotSelectQuestion:"chatBotSelectQuestion",prechatHeartbeat:"prechatHeartbeat",offlineMessageHeartbeat:"offlineMessageHeartbeat",enterOfflineMessage:"enterOfflineMessage",checkManuallyInvited:"checkManuallyInvited",closeWindow:"closeWindow",getDepartments:"getDepartments",getAgents:"getAgents",checkBan:"checkBan",systemProcessingHeartbeat:"systemProcessingHeartbeat",restoreChat:"restoreChat",checkBBSCode:"checkBBSCode",checkDynamicCampaign:"checkDynamicCampaign",getDynamicCampaign:"getDynamicCampaign",pageHeartbeat:"pageHeartbeat",getChatWindowConfig:"getChatWindowConfig",getCustomVariables:"getCustomVariables"},mr=function(e,t){return{type:hr.uploadFileAction,action:e,file:t}},br=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments[2],i=arguments[3],o=arguments[4],r=arguments[5],a=arguments[6],s=arguments[7],c=s.firstVisitTime,d=s.visitTimes;return{type:hr.newVisitor,campaignId:e,visitorId:t||0,referrer:n,landingPage:i,timezone:o,screenResolution:r,ifSupportWebrtc:a,firstVisitTime:c||(new Date).getTime(),visitTimes:d||0}},gr=function(e,t){return{type:hr.pageVisit,campaignId:e,page:t}},wr=function(){return{type:hr.getConfig}},vr=function(e,t){return{type:hr.setCustomVariables,customVariables:e,campaignId:t}},yr=function(e){return{type:hr.getIfOnline,campaignId:e}},xr=function(e){return{type:hr.checkIfOnline,campaignId:e}},_r=function(e){return{type:hr.checkAutoInvitation,campaignId:e}},Cr=function(e,t){return{type:hr.confirmAutoInvitation,campaignId:e,invitationId:t}},kr=function(e){return{type:hr.checkManualInvitation,campaignId:e}},Sr=function(e,t,n){return{type:t?hr.refuseManualInvitation:hr.refuseAutoInvitation,campaignId:e,invitationId:t?void 0:n}},Ar=function(e){return{type:hr.manualInvitationShowed,invitationId:e}},Tr=function(e){return{type:hr.getChatButton,campaignId:e}},Ir=function(e,t){return{type:hr.submitSSOInfo,info:e,campaignId:t}},Rr=function(e,t){return{type:hr.submitPrechat,form:e,campaignId:t}},Pr=function(){return{type:hr.prechatHeartbeat}},Mr=function(){return{type:hr.offlineMessageHeartbeat}},Or=function(){return{type:hr.enterOfflineMessage}},Er=function(e){return{type:hr.checkManuallyInvited,chatGuid:e}},Nr=function(e,t,n){var i=t.attachment,o={type:hr.submitOfflineMessage,campaignId:e,form:Object.assign({},t,{attachment:void 0}),source:n};return i?mr(o,i):o},Wr=function(e){return mr({type:hr.sendFile,formId:e.formId},e)},Br=function(e,t,n){return{type:hr.submitPostChat,chatId:e,form:t,campaignId:n}},Dr=function(e,t){return{type:hr.submitRating,chatId:e,rating:t}},zr=function(e){return{type:hr.emailTranscript,email:e}},jr=function(e){return{type:hr.socialLogin,socialType:e.source,name:e.name,email:e.email,avatar:e.avatar,profileUrl:e.profile}},qr=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments[3],o=arguments[4];return{type:hr.requestChat,campaignId:e,source:t,isPrechatDone:n,isSupportWebrtc:Pd,ticketId:i,departmentId:o}},Lr=function(){return{type:hr.closeWindow}},Vr=function(e){return{type:hr.endChat,chatGuid:e}},Fr=function(e,t){return{type:hr.getChatMessages,chatGuid:e,fromId:t}},Ur=function(e){return{type:hr.getChatQueue,chatGuid:e}},Hr=function(e,t){return{type:hr.sendChatMessages,chatGuid:e,messages:t}},Gr=function(e,t){return{type:hr.chatBotAnswerHelpful,ifHelpful:e,actionGuid:t}},Yr=function(e){return{type:hr.chatBotSelectQuestion,question:e}},Qr=function(){return{type:hr.getDepartments}},Jr=function(){return{type:hr.getAgents}},Xr=function(e){var t=e.filter(function(e){return!!e});return 0===t.length?null:1===t.length?t[0]:{type:hr.batchAction,actions:t}},Zr=function e(t,n){null!=n&&(n.type===hr.batchAction?n.actions?n.actions.forEach(function(n){return e(t,n)}):n.payload&&n.payload.forEach(function(n){return e(t,n)}):t(n))},$r=function(e,t){var n=null;return Zr(function(e){e.type===t&&(n=e)},e),n},Kr=function e(t,n){if(null==n)return null;var i=t(n);if(i.type===hr.batchAction){if(i.actions)return{type:i.type,actions:i.actions.map(function(n){return e(t,n)})};if(i.payload)return{type:i.type,payload:i.payload.map(function(n){return e(t,n)})}}return i},ea=function(e){return{type:hr.checkBan,visitorId:e}},ta=function(){return{type:hr.systemProcessingHeartbeat}},na=function(){return{type:hr.restoreChat}},ia=function(){return{type:hr.checkBBSCode}},oa=function(){return{type:hr.checkDynamicCampaign}},ra=function(){return{type:hr.getDynamicCampaign}},aa=function(){return{type:hr.pageHeartbeat}},sa=function(){return{type:hr.getChatWindowConfig}},ca=function(){return{type:hr.getCustomVariables}},da=function(e){return e.page.campaignId},la=function(e){return e.window?e.window.id:e.page.campaignId},ua=function(e){return e.page.chatGroup},pa=function(e){return e.page.buttons},fa=function(e){return e.page.siteId},ha=function(e){return e.page.windowStatus},ma=function(e){return Object.keys(e.page.buttons)},ba=function(e){return e.page.visitor.guid},ga=function(e){return e.page&&{title:e.page.title,url:e.page.url}},wa=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.page.requestChatAction?Object.assign({},e.page.requestChatAction,{campaignId:t}):qr(t,{type:"button",page:ga(e)})},va=function(e){var t=wa(e);return t&&t.source},ya=function(e){return(va(e)||{}).type},xa=function(e){return(va(e)||{}).invitationId},_a=function(e,t){return e.page.buttons[t]},Ca=function(e){return"mobile"===e.page.platform||"ipad"===e.page.platform},ka=function(e){return"ipad"===e.page.platform},Sa=function(e){return Object.keys(e.page.buttons).map(function(t){var n=e.entities.buttons.entities[t];if(!n)return null;var i=fa(e);return Object.assign({},n,{chatWindowLink:Ko(e,kd(i,t))})}).filter(function(e){return e})},Aa=function(e,t){return e.isHideOffline&&!t[e.id]},Ta=function(e){return e!==Fo&&e!==Do},Ia=function(e,t){var n=e.type;return("float"===n||"adaptive"===n)&&Ta(t)},Ra=ci(1)(function(e,t,n){return e.filter(function(e){return!Aa(e,t)&&!Ia(e,n)})}),Pa=function(e){return Sa(e).filter(function(e){return!e.isHidden})},Ma=function(e){var t=Pa(e),n=pa(e),i=ha(e);return Ra(t,n,i)},Oa=function(e){return e.page.skipPreChat},Ea=function(e){return e.page.height},Na=function(e){return e.page.width},Wa=function(e){return e.page.orientation},Ba=function(e){return e.page.isDynamicCampaign},Da=function(e){return Wi(e,"window")},za=function(e,t){return function(n){var i=Da(n);return i?e(i,n):t}},ja=za(function(e){return e.chatStatus},"none"),qa=function(e){var t=e.window;return t.tab!==So&&t.tab!==Ao?null:t.chatStatus!==bo&&t.chatStatus!==mo&&t.chatStatus!==go?null:t.isChatBot?null:0===t.involvedAgents.length?null:e.entities.agents.entities[t.involvedAgents[0]]},La=function(e){var t=e.window;return t.tab===So||t.isChatBot&&t.tab===Ao?t.chatStatus!==bo&&t.chatStatus!==ho&&t.chatStatus!==go?null:t.isChatBot?e.entities.campaigns.entities[t.id].chatBot:null:null},Va=function(e){var t=La(e);return t?t.agentButton:""},Fa=za(function(e,t){if(!t.entities)return!1;if(!t.entities.campaigns)return!1;var n=t.entities.campaigns;return n.fetchStatus[e.id]===Ro&&!!n.entities[e.id]},!1),Ua=function(e){return Wi(e,"window.tab")},Ha=za(function(e){return e.expandWindowItems},[]),Ga=function(e){return Wi(e,"window.id")},Ya=za(function(e,t){return t.entities.campaigns.entities[t.window.id]},null),Qa=function(e){return e.entities.campaigns.entities[e.window.id].mainColor},Ja=function(e){var t=e.entities.campaigns.entities[e.window.id].chat.texture;return t?"url("+t+")":null},Xa=za(function(e){return e.ssoUrl},""),Za=za(function(e){return e.showPrelogin},!1),$a=za(function(e){return e.isChatBot},!1),Ka=function(e){var t=Wi(e,"window");return!!t&&(t.isChatBot&&t.chatStatus===bo&&!t.chatWithAgentClicked)},es=ci(1)(function(e,t,n,i){return function(o){var r=t.entities[n];if("agent"===o.sender.type){var a=e.entities[o.sender.id];return Object.assign({},o,{sender:a||{name:r.languages.operatorDefaultName}})}if("chatbotRequestQuestionGuid"===o.type||"chatbot"===o.sender.type)return Object.assign({},o,{sender:{name:r.chatBot.name,avatar:r.chatBot.avatar}});if("visitorRequestChat"===o.type)return Object.assign({},o,{queuePosition:i.position,estimatedWaitTime:i.waitTime});if("agentJoinChat"===o.type||"agentEndChat"===o.type||"agentTransferChat"===o.type){var s=e.entities[o.sender.id];return Object.assign({},o,{sender:s||{name:r.languages.operatorDefaultName}})}return o}}),ts=function(e){return function(t){return"creditCardMasked"!==t.type&&"pendingAccept"!==t.type&&"pendingAudioRequesting"!==t.type&&"pendingHangup"!==t.type&&"pendingVideoRequesting"!==t.type&&"pendingSubmitSecureForm"!==t.type&&"pendingCancelSecureForm"!==t.type&&"pendingGetSecureFormFailure"!==t.type&&"visitorTyping"!==t.type&&"pendingVisitorIsTyping"!==t.type&&(("systemPromoteOfflineMesage"!==t.type||e===ho)&&(!!t.content&&("string"==typeof t.content?t.content:"string"==typeof t.content.fileName?t.content.fileName:"string"==typeof t.content.name?t.content.name:"string"==typeof t.content.text?t.content.text:null!==t.content.text&&("object"===Dt(t.content)&&Object.keys(t.content).length>0))))}},ns=ci(1)(function(e,t,n,i,o,r){return o.map(es(e,t,n,i)).filter(ts(r))}),is=za(function(e,t){var n=e.messages,i=t.entities,o=i.agents,r=i.campaigns,a=e.id,s=e.queue,c=e.chatStatus;return ns(o,r,a,s,n,c)}),os=za(function(e){return e.messages},[]),rs=za(function(e){return e.queue},{}),as=za(function(e){return e.involvedAgents},[]),ss=za(function(e){return e.audioVideoAgentId},0),cs=za(function(e){return e.chatGuid}),ds=za(function(e){return e.chatId}),ls=za(function(e){return e.visitorTyping},!1),us=za(function(e){return e.draft},""),ps=za(function(e){return e.maxId},-1),fs=za(function(e){return e.error}),hs=za(function(e){return e.warning}),ms=za(function(e){return e.maxReadId},-1),bs=za(function(e,t){for(var n=is(t),i=e.maxReadId,o=0,r=n.length-1;r>=0;r-=1){var a=n[r];if(a.id<=i)break;if(void 0!==a.id&&Kd(a)&&(o+=1)>=99)return 99}return o},0),gs=za(function(e,t){var n=is(t);if(!(bs(t)<=0))for(var i=n.length-1;i>=0;i-=1){var o=n[i];if(Kd(o))return o}}),ws=function(e){var t=Wi(e,"page.requestChatAction.source.page.url");return"https://www.comm100.com/powered-by/?customer="+(Yi(t)||"")},vs=function(e){return e.window&&e.window.messages&&e.window.messages.find(function(e){return"agentRefuseChat"===e.type})},ys=za(function(e,t){var n=Ya(t).style===wo,i=(Oo&Ya(t).chat.tools)===Oo,o=(Wo&Ya(t).chat.tools)===Wo;if(e.tab!==So)return!1;switch(e.chatStatus){case bo:return!0;case ho:return!!e.allowWaitingSendMessage&&!e.isChatBot;case go:return(!n||Ca(t))&&(i||o)&&!vs(t)&&!e.isChatBot;case mo:return!0;default:return!1}},!1),xs=za(function(e){if(e.tab!==So)return!1;switch(e.chatStatus){case bo:return!0;case ho:return!!e.allowWaitingSendMessage;case go:return!1;case mo:default:return!0}},!1),_s=function(e){return e.window&&e.window.messages&&e.window.messages.find(function(e){return"visitorFile"===e.type})},Cs=function(e){return e.window&&e.window.messages&&e.window.messages.find(function(e){return"visitorSetEmail"===e.type})},ks=function(e){var t=Wi(e,"window.involvedAgents");return t&&t.length>0},Ss=za(function(e){return e.chatStatus===bo},!1),As=za(function(e){return e.chatStatus===mo},!1),Ts=function(e){var t=as(e);if(0!==t.length){var n=t[0];return e.entities.agents.entities[n]}},Is=function(e){var t=as(e);if(0!==t.length){var n=ss(e);if(n>0)return e.entities.agents.entities[n];if(t.length>1)return{avatar:Ko(e,"/images/avatar.png"),name:""};var i=t[0];return e.entities.agents.entities[i]}},Rs=function(e){var t=As(e);if(Ss(e)||t){if(t){if("manualInvitation"!==e.page.requestChatAction.source.type)return;return Ts(e)}var n=La(e);return n||Ts(e)}},Ps=function(e){var t=Rs(e);return t?t.avatar:t},Ms=function(e){var t=Is(e);return t?t.avatar:""},Os=function(e){var t=Is(e);return t?t.name:""},Es=za(function(e){return e.chatStatus===ho||e.chatStatus===bo},!1),Ns=za(function(e){return e.chatStatus===bo&&e.isChatBot},!1),Ws=za(function(e){return e.chatStatus===ho&&e.isChatBot},!1),Bs=za(function(e){return e.ifHideBio},!1),Ds=za(function(e){return e.chatWithAgentClicked},!1),zs=za(function(e){return e.fileUploadCount},0),js=function(e,t){return Wi(e,"window.fields."+t)},qs=za(function(e){return e.disabled},!1),Ls=function(e){var t=Ya(e);return t&&t.notification},Vs=function(e){var t=e.window,n=Wi(e,"page.windowStatus");return t&&t.tab===So&&(n===zo||n===qo)&&!!t.expandWindowSelectedTab},Fs=function(e){var t=qa(e);return!!t&&t.isSupportWebrtc},Us=function(e){return Wi(e,"window.expandWindowItems")},Hs=za(function(e){return e.audio_video_disabled},!1),Gs=function(e){return Wi(e,"window.showChatWindowInExpandwindow")},Ys=function(e){return Wi(e,"window.expandWindowSelectedTab")},Qs=function(e){return Ya(e).customCSS},Js=za(function(e){return e.vChatStatus},"notStart"),Xs=za(function(e){return e.audioVideoChatStartTime},0),Zs=za(function(e){return e.isFocused},!1),$s=za(function(e){return e.frequencyLimitState},!1),Ks=za(function(e){return e.autoEjectTranscript},!1),ec=function(e){var t=Ya(e);return t&&t.isRTL},tc=function(e){var t=qa(e);return!(!t||!t.bio)&&(!za(function(e){return e.ifHideBio},!1)(e)&&Ya(e).header.showBio)},nc=function(e,t){return Wi(e,"entities.campaigns.entities."+t)},ic=function(e,t){return Wi(e,"entities.campaigns.entities."+t)},oc=function(e,t){var n=Wi(e,"entities.campaigns.entities."+t+".chat.tools");return void 0===n?0:n},rc=function(e,t){return Oo&oc(e,t)},ac=function(e,t){return Po&oc(e,t)&&e.window.chatStatus!==go},sc=function(e,t){return Mo&oc(e,t)&&e.window.chatStatus!==go},cc=function(e,t){return Eo&oc(e,t)&&e.window.chatStatus!==go&&Wi(e,"configuration.features.audioVideoChat")&&Pd},dc=function(e,t){return No&oc(e,t)&&e.window.chatStatus!==go&&Wi(e,"configuration.features.audioVideoChat")&&Pd},lc=function(e,t){return Wo&oc(e,t)&&!vs(e)&&!Ca(e)},uc=function(e,t){var n=Ya(e);if(n.postchat){return n.postchat.map(function(t){return e.entities.fields.entities[t]}).find(function(e){return e.type===t})}return null},pc=function(e){return uc(e,"rating")},fc=function(e){return uc(e,"comment")},hc=function(e){return e&&Object.keys(e)||[]},mc=function(e,t){return e.entities.agents.entities[t]},bc=function(e){return hc(e.entities.agents.entities)},gc=function(e){return bc(e).length},wc=function(e){return bc(e).reduce(function(t,n){return t.concat([mc(e,n)])},[])},vc=function(e){var t=wc(e).map(function(e){return e.avatar}).filter(function(e){return e});return 0===t.length?null:1===t.length?Ya(e).style===vo?[Ko(e,"/images/avatar-male.png"),t[0],Ko(e,"/images/avatar-female.png")]:[t[0],Ko(e,"/images/avatar-male.png"),Ko(e,"/images/avatar-female.png")]:2===t.length?[].concat(t,[Ko(e,"/images/avatar-male.png")]).filter(function(e){return e}):t.slice(0,3)},yc=function(e,t){return e.entities.buttons.entities[t]},xc=function(e,t){return yc(e,t).type},_c=function(e,t){var n=yc(e,t);return n&&n.customOffline},Cc=function(e,t){return!!e.entities.buttons&&yc(e,t).isEmbeddedWindow},kc=function(e){return e.entities.departments.entities},Sc=function(e,t){return yc(e,t).iframeStyle},Ac=function(e,t){var n=yc(e,t);if(n)return n.customJs},Tc="popupImage",Ic="embeddedWindow",Rc="bubble",Pc="mobile",Mc=Math.pow(2,0),Oc=Math.pow(2,1),Ec=Math.pow(2,2),Nc=ci(1)(function(e,t,n){var i={};return i.id=t.id,i.winType=n,i.isManual=t.isManual,i.type=Rc,i.campaignId=e,i.message=t.text,i.textTypeHere=t.textTypeHere,i.messageCount=t.messageCount,t.agent&&(i.agentName=t.agent.name,i.avatar=t.agent.avatar),i.agent=t.agent,i}),Wc=ci(1)(function(e,t){var n={};return n.id=t.id,n.type=Pc,n.campaignId=e,n.message=t.text,n.acceptText=t.acceptText,n.refuseText=t.refuseText,n.themeColor=t.themeColor,n.title=t.title,n.agent=t.agent,n}),Bc=ci(1)(function(e,t){var n={};if(n.id=t.id,n.type=Tc,n.image=t.image,n.message=t.text,n.fontSize=t.fontSize,n.color=t.color,n.themeColor=t.themeColor,n.fontFamily=t.fontFamily,n.ifModal=t.ifModal,t.fontStyle){var i=t.fontStyle;n.fontWeight=i&Mc?"bold":"",n.fontStyle=i&Oc?"italic":"",n.textDecoration=i&Ec?"underline":""}return n.messageArea={left:t.textArea[0],top:t.textArea[1],width:t.textArea[2],height:t.textArea[3]},n.closeArea={left:t.closeArea[0],top:t.closeArea[1],width:t.closeArea[2],height:t.closeArea[3]},n.textAlign=t.textAlign,t.position&&(n.position=t.position),n.isManual=t.isManual,n.campaignId=e,n.agent=t.agent,n}),Dc=function(e){return e.page&&e.page.invitation},zc=ci(1)(function(e){return Object.keys(e).sort(function(e,t){return e-t}).map(function(t){var n=e[t];return{value:n.id,label:n.name,isOnline:n.isOnline}})}),jc={custom:{}},qc=function(e,t,n,i){return t.configuration.features[n]?e:e.filter(function(e){return t.entities.fields.entities[e].type!==i})},Lc=function(e,t,n){var i=void 0;"prechat"===t?i="prechat":"postchat"===t?i="postchat":"offline"===t&&(i="offline");var o=e.entities.campaigns.entities[n];if(o&&o[i]){var r=o[i];return r=qc(r,e,"department","department"),r=qc(r,e,"ticket","ticket"),r.map(function(t){var n=e.entities.fields.entities[t],i="";if("department"===n.type){var r=e.entities.departments.entities;n=Object.assign({},n,{options:zc(r)})}var a=e.window?e.window.fields:jc,s=void 0;if(s="name"===n.type?a.name:n.type===fo?a.email:"phone"===n.type?a.phone:"company"===n.type?a.company:"product"===n.type?a.product:"department"===n.type?a.department:"rating"===n.type?a.rating:"comment"===n.type?a.comment:"subject"===n.type?a.subject:"content"===n.type?a.content:"attachment"===n.type?a.attachment:"ticket"===n.type?a.ticketId:a.custom[n.label],s=null!=n.value?n.value:s,n.isRequired&&(!s||Array.isArray(s)&&0===s.length)&&(i=o.languages.promptRequired),n.type===fo&&s&&!Nd(s)&&(i=o.languages.promptInvalidEmail),"attachment"===n.type&&"undefined"!=typeof File&&s instanceof File){var c=dr(e);s.size>Math.pow(1024,2)*c&&(i=o.languages.promptFileSizeExceed.replace("{fileSize}",c))}return Object.assign({},n,{value:s,error:n.customError||i})})}return[]},Vc=function(e,t){return e.window.forms[t]},Fc=function(e){var t=e.entities.campaigns.entities[e.window.id];return t&&t.prechat?t.prechat.map(function(t){return e.entities.fields.entities[t]}):[]},Uc=function(e){var t={text:!0,textarea:!0,radio:!0,checkbox:!0,select:!0,"checkbox-list":!0,attachment:!0,rating:!0};return Fc(e).filter(function(e){return t[e.type]})},Hc=function(e){var t=la(e);if(oc(e,t)<1)return!1;var n=e.window;return!(!n||n.isChatBot)&&("postchat"!==Ua(e)&&(n.chatStatus===bo||n.chatStatus===go))},Gc=function(e){return e.configuration.features.ga},Yc=function(e,t){return Wi(e,"entities.campaigns.entities."+t+".style")},Qc=function(e){var t=Ga(e);return Yc(e,t)},Jc=function(e){return e.configuration.customVariables},Xc=function(e){return e.configuration.customVariableResult},Zc=function(e){return e.configuration.features.hideCreditCard},$c=function(e){return e.configuration.features.showTypingContent},Kc=function(e){return e.entities.campaigns.entities[e.window.id].languages},ed=function(e){return function(t,n){var i=Kc(t),o=e[n];if(o)return i[o]}},td=ed((ki={},ki.prechat="greetingPreChatWindow",ki.postchat="greetingRating",ki.offline="greetingOfflineMessageWindow",ki)),nd=function(e){return"horizontal"===e.entities.campaigns.entities[e.window.id].formStyle},id=ed((Si={},Si.prechat="buttonStartChat",Si.postchat="buttonSubmit",Si.offline="buttonSubmit",Si)),od=function(e,t){if(!(t<=0)){return Kc(e).embeddedWindowNewMessages.replace("{count}",t)}},rd=function(e){return Kc(e).writeReply},ad=function(e){var t=Ga(e),n=ic(e,t).mainColor;return Ud(n)},sd=function(e){var t=e.entities.campaigns.entities[e.window.id];return!!t.socialLogin&&t.socialLogin.facebook},cd=function(e){var t=e.entities.campaigns.entities[e.window.id];return!!t.socialLogin&&t.socialLogin.googlePlus},dd=function(e){return e.entities.campaigns.entities[e.window.id].chat.showAvatar},ld=function(e){var t=e.entities.campaigns.entities[e.window.id],n=t.header,i=n.showAvatar,o=n.type;return!!i||!(!$a(e)||"banner"!==o)},ud=function(e){return e.entities.campaigns.entities[e.window.id].sounds},pd=function(e,t){var n=ud(e);return n&&n[t]},fd=function(e){return e.configuration.standbyUrl+"/moderator.aspx?siteId="+fa(e)},hd=function(e){var t=ua(e),n=fa(e),i=ba(e);return Ko(e,["/visitor.ashx?",n?"siteId="+n:"",t?"&chatGroup="+t:"",i?"&visitorGuid="+i:""].join(""))},md=function(e){return Go(e)?e.page.visitor.id:e.page.visitor.standbyId},bd=function(e){return e.page.visitor.id},gd=function(e){return e.page.visitor.standbyId},wd=function(e){return"manualInvitation"===ya(e)&&ja(e)===mo},vd=function(e){return Ac(e,da(e))},yd=function(e){return Yo(e)&&null==ya(e)},xd=function(e){return Zo(e)&&Yo(e)&&Cc(e,la(e))&&!yd(e)&&!eo},_d=function(e){return(e.entities.campaigns.entities[la(e)]||{}).languages},Cd=function(e,t){var n=_d(e);return n&&n[t]},kd=function(e,t){return"/ChatWindow.aspx?siteId="+e+"&planId="+t},Sd=function(e){return e?Object.keys(e).reduce(function(t,n){try{var i,o=Oi.call(e[n]);return void 0===o?t:Ni(t,(i={},i[n]=null===o?o:o.toString(),i))}catch(e){return t}},{}):null},Ad=function(){return(new Date).getTimezoneOffset()},Td=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,Id=Pi.getUserMedia||Pi.webkitGetUserMedia||Pi.msGetUserMedia||Pi.mozGetUserMedia,Rd=io,Pd=!!Td&&!!Id&&!Rd,Md=function(){return screen.width+"x"+screen.height},Od=/(?:www\.|(?:https?|ftp|news|rtsp|mms):\/\/)[\w$%][\w_!~*'();?:@&=+$,%#-.\/]*[\w_!~*'();?:@&=+$%#-]\/?/gi,Ed=/^[A-Za-z0-9!#$%&'*+=?^_`{|}~-]+(?:\.[A-Za-z0-9!#$%&'*+=?^_`{|}~-]+)*@(?:[A-Za-z0-9](?:[A-Za-z0-9-]*[A-Za-z0-9])?\.)+[A-Za-z0-9](?:[A-Za-z0-9-]*[A-Za-z0-9])?$/,Nd=function(e){return Ed.test(e)},Wd=function(e){return e.replace(/(?:3[4|7]\d{2}\s{0,1}\d{6}\s{0,1}\d{1}|3[0|6|8]\d{3}\s{0,1}\d{4}\s{0,1}\d{1}|(?:6011\s{0,1}\d{4}\s{0,1}|65\d{2}\s{0,1}\d{4}\s{0,1}|622(?:(?:1\s{0,1}2[6-9]|1\s{0,1}[3-9]\d|[2-8]\d{2})\d{2}\s{0,1}|9\s{0,1}2[0-5]\d{2}\s{0,1}|9\s{0,1}[0-1]\d{3}))\d{4}\s{0,1}|(?:2014|2149)\s{0,1}\d{7}\s{0,1}|(?:(?:3088|3096|3112|3158|3337)\s{0,1}\d{4}\s{0,1}|35(?:2[89]\s{0,1}\d{4}\s{0,1}|[3-8]\d\s{0,1}\d{4}\s{0,1}))\d{4}\s{0,1}|5[1-5]\d{2}\s{0,1}\d{4}\s{0,1}\d{4}\s{0,1}|4\d{3}\s{0,1}\d{4}\s{0,1}\d(?:\d{3})?\s{0,1})(\d{4})/g,function(e,t){for(var n="",i=0;i<e.length;i+=1)n+="*";return n+t})},Bd=function(e){var t=e;t.left="50%",t.top="50%",t.transform="translate(-50%, -50%)"},Dd=function(e){var t=e;t.left="50%",t.transform="translateX(-50%)"},zd=function(e){var t=e;t.top="50%",t.transform="translateY(-50%)"},jd=function(e){return void 0!==e.px?e.px:e.percent+"%"},qd=function(e,t){var n=e.xoffset,i=e.yoffset,o={position:"fixed",zIndex:t,fontSize:0};return"bottomMiddle"===e.type&&(o.bottom=jd(i),Dd(o)),"topMiddle"===e.type&&(o.top=jd(i),Dd(o)),"leftMiddle"===e.type&&(o.left=jd(n),zd(o)),"rightMiddle"===e.type&&(o.right=jd(n),zd(o)),"topLeft"===e.type&&(o.left=jd(n),o.top=jd(i)),"topRight"===e.type&&(o.right=jd(n),o.top=jd(i)),"bottomLeft"===e.type&&(o.left=jd(n),o.bottom=jd(i)),"bottomRight"===e.type&&(o.right=jd(n),o.bottom=jd(i)),"centered"===e.type&&Bd(o),"leftBottom"===e.type&&(o.bottom="5%",o.left=0,o.transform="translateY(5%)"),"rightBottom"===e.type&&(o.bottom="5%",o.right=0,o.transform="translateY(5%)"),o},Ld=function(){return{title:Ii.title,url:Ri.href.toString()}},Vd=function(e,t){if(!t)return e;var n=function(e,t,n){return e.replace(new RegExp(t,"g"),n)},i=e;i=n(i,"#000001",t);var o=qi(t,.2);return i=n(i,"#000002",o),i=n(i,"#000003",t),i=n(i,"#000004",Vi(t)?"#3c3c3c":"#fff"),i=n(i,"#000005",Vi(o)?"#3c3c3c":"#fff")},Fd=function(){var e=void 0,t=void 0;return function(n,i){if(n&&e)return e;if(!n&&t)return t;var o=[{family:"",filename:"Regular"},{family:" Italic",filename:"It"},{family:" Bold",filename:"Semibold"},{family:" Light",filename:"Light"}].map(function(e){var t=e.family,n=e.filename;return'@font-face {font-family: "SourceSans Pro'+t+'";src: url('+i("/fonts/SourceSansPro-"+n+".woff")+") format('woff'),url("+i("/fonts/SourceSansPro-"+n+".ttf")+") format('truetype'),url("+i("/fonts/SourceSansPro-"+n+".svg#SourceSans-Pro-"+n)+") format('svg')}"}).join("")+uo.replace(/[{]FONT_URL_PREFIX[}]/g,i("/fonts"));return n?e=o:t=o,o}}(),Ud=ci(1)(function(e){return Vi(e)?"black":"white"}),Hd=function(e){return/^(https?:)?\/\//.test(e)?e:e&&"http://"+e},Gd=function(){var e=0;return function(){return e+=1}},Yd=function(){return/ipad/i.test(Mi)?"ipad":/mobile|android/i.test(Mi)?"mobile":"desktop"},Qd=function(e){return Object.keys(e||{}).reduce(function(t,n){if(0===n.indexOf("CUSTOM!")){var i;return Object.assign({},t,(i={},i[n.substr("CUSTOM!".length)]=e[n],i))}return t},{})},Jd=function(e){var t=e;return Object.keys(t).forEach(function(e){Array.isArray(t[e])&&(t[e]=t[e].join("\u2299"))}),t},Xd=function(e){var t=Object.assign({},e);return Jd(t),"ticketId"in t&&(t.ticketId=""===t.ticketId||Number.isNaN(+t.ticketId)?void 0:+t.ticketId),"department"in t&&(t.department=""===t.department||Number.isNaN(+t.department)?-1:+t.department),t.custom&&(t.custom=Object.assign({},t.custom),Jd(t.custom)),t},Zd=function(e,t){for(var n=e,i=[],o=n.search(/\r\n|\r|\n/);o>=0;)i=i.concat(N(n.substring(0,o),function(e){return Qi(e)})),i.push(t),n=n.slice(o).replace(/\r\n|\r|\n/,""),o=n.search(/\r\n|\r|\n/);return i=i.concat(N(n,function(e){return Qi(e)}))},$d=["agentSendText","agentAddInvitationText","agentJoinChat","chatbotJoinChat","agentSendFile","agentSendImage","agentSendUrl","agentAcceptChat","agentRefuseChat","visitorNotRespond","agentEndChat","agentPromoteToUser","agentPromoteToContact","agentEndChat","agentTransferChatToDepartment","agentAcceptTransfer","agentRefuseTransfer","visitorNotRespondAndEndChat","agentVideoChatRequest","agentVideoChatCancelRequest","agentVideoChatAccept","agentVideoChatRefuse","agentVideoChatStop","systemVideoChatNoAnswer","systemVideoChatEnd","agentAudioChatRequest","agentAudioChatCancelRequest","agentAudioChatAccept","agentAudioChatRefuse","agentAudioChatStop","visitorAudioChatRequest","visitorAudioChatCancelRequest","visitorAudioChatAccept","visitorAudioChatRefuse","visitorAudioChatStop","visitorVideoChatRequest","visitorVideoChatCancelRequest","visitorVideoChatAccept","visitorVideoChatRefuse","visitorVideoChatStop","systemAudioChatNoAnswer","systemAudioChatEnd","agentRequestSecureForm"],Kd=function(e){return $d.indexOf(e.type)>=0},el=function(){return void 0===window.File},tl=["agentSendUrl","visitorAddTextMessage","agentSendText","agentAddInvitationText","autoInvMsg","agentTyping","visitorTyping","pendingVisitorIsTyping","agentSendImage","agentSendFile","visitorSendFile","visitorSendImage","agentSendImageStart","visitorRequestChat","systemPromoteOfflineMesage","systemStartChatbot","chatbotBadAnswer","chatbotHighConfidenceAnswer",po,"chatbotPossibleAnswer","chatbotRequestQuestionGuid","visitorText","visitorImage","visitorFile","agentRequestSecureForm","systemIfSupportWebrtc","startChatAgain"],nl=function(e){return Pd&&("systemAudioChatEnd"===e||"systemVideoChatEnd"===e||"systemAudioChatNoAnswer"===e||"systemVideoChatNoAnswer"===e||"visitorAudioChatAccept"===e||"visitorAudioChatCancelRequest"===e||"visitorAudioChatRefuse"===e||"visitorAudioChatStop"===e||"agentAudioChatAccept"===e||"agentAudioChatCancelRequest"===e||"agentAudioChatRefuse"===e||"agentAudioChatStop"===e||"visitorVideoChatAccept"===e||"visitorVideoChatCancelRequest"===e||"visitorVideoChatRefuse"===e||"visitorVideoChatStop"===e||"agentVideoChatAccept"===e||"agentVideoChatCancelRequest"===e||"agentVideoChatRefuse"===e||"agentVideoChatStop"===e)},il=function(e){return tl.indexOf(e.type)<0},ol=function(e,t,n){return[Fd(t,n),Vd(lo,e)].join("")},rl=function(e){return e.reduce(function(e,t){var n,i=e;return"name"===t.type?i.name=t.value:t.type===fo?i.email=t.value:"phone"===t.type?i.phone=t.value:"company"===t.type?i.company=t.value:"product"===t.type?i.product=t.value:"department"===t.type?i.department=t.value:"rating"===t.type?i.rating=t.value:"comment"===t.type?i.comment=t.value:"subject"===t.type?i.subject=t.value:"content"===t.type?i.content=t.value:"attachment"===t.type?i.attachment=t.value:"ticket"===t.type?i.ticketId=t.value:i.custom?i.custom[t.id]=t.value:i.custom=(n={},n[t.id]=t.value,n),i},{})},al=function(e,t,n){return e&&{name:e.name,avatar:(n||t.showAvatar)&&e.avatar,title:t.showTitle&&e.title,bio:t.showBio&&("<div>&nbsp;</div>"===e.bio?null:e.bio)}},sl=function(e,t){return{team:t.header.showTeam&&t.languages.teamName,avatars:t.header.showAvatars&&vc(e)}},cl=function(e,t,n){return{agent:al(qa(e)||La(e),t.header,n)}},dl=function(e){return{banner:e.header.banner}},ll=function(e,t){return{logo:t.header.logo}},ul=function(e,t){return t.header.showAvatar||t.header.logo?{logo:t.header.logo,agent:cl(e,t).agent}:{ifViewHeaderBox:!1}},pl=function(e,t,n){var i=$a(t)
;return"agent"===e?cl(t,n,!1):i&&"banner"===e?cl(t,n,!0):"logo"===e?ul(t,n):"banner"===e?dl(n):{}},fl=function(e,t,n){return"agent"===e?sl(t,n):"logo"===e?ll(0,n):"banner"===e?dl(n):{}},hl=function(e,t,n){if(e===yo)return{ifViewHeader:!1};var i=Da(t),o=ks(t),r=n.header.type;return i.tab===So&&(o||i.isChatBot)&&(i.chatStatus===bo||i.chatStatus===go||i.chatStatus===mo&&"manualInvitation"===ya(t)||i.isChatBot)||i.tab===Ao?pl(r,t,n):fl(r,t,n)},ml=Oi.site_id,bl=function(e){return/^\d+$/.test(e)?+e:void 0}(Oi.chatGroup),gl=function(){return Oi.chat_buttons},wl=function(){return Array.prototype.map.call(gl(),function(e){return e.code_plan}).filter(function(e){return e})},vl=function(e){var t=Array.prototype.find.call(Oi.chat_buttons,function(t){return t.code_plan===e});if(t)return t.div_id;if(Oi.dynamic){var n=Array.prototype.find.call(Oi.chat_buttons,function(e){return null==e.code_plan});return n&&n.div_id}},yl=Oi.main_code_plan,xl="object"==("undefined"==typeof global?"undefined":Dt(global))&&global&&global.Object===Object&&global,_l="object"==("undefined"==typeof self?"undefined":Dt(self))&&self&&self.Object===Object&&self,Cl=xl||_l||Function("return this")(),kl=Cl.Symbol,Sl=Object.prototype,Al=Sl.hasOwnProperty,Tl=Sl.toString,Il=kl?kl.toStringTag:void 0,Rl=Object.prototype,Pl=Rl.toString,Ml="[object Null]",Ol="[object Undefined]",El=kl?kl.toStringTag:void 0,Nl=function(e,t){return function(n){return e(t(n))}}(Object.getPrototypeOf,Object),Wl="[object Object]",Bl=Function.prototype,Dl=Object.prototype,zl=Bl.toString,jl=Dl.hasOwnProperty,ql=zl.call(Object);Ai="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")();var Ll=function(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}(Ai),Vl={INIT:"@@redux/INIT"},Fl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ul=Q();Ul.withExtraArgument=Q;var Hl,Gl,Yl=[];Hl="object"===("undefined"==typeof global?"undefined":Dt(global))&&global?global:"undefined"!=typeof window?window:{},Gl=Hl.DeepDiff,Gl&&Yl.push(function(){void 0!==Gl&&Hl.DeepDiff===oe&&(Hl.DeepDiff=Gl,Gl=void 0)}),J(Z,X),J($,X),J(K,X),J(ee,X),Object.defineProperties(oe,{diff:{value:oe,enumerable:!0},observableDiff:{value:ie,enumerable:!0},applyDiff:{value:de,enumerable:!0},applyChange:{value:ae,enumerable:!0},revertChange:{value:ce,enumerable:!0},isConflict:{value:function(){return void 0!==Gl},enumerable:!0},noConflict:{value:function(){return Yl&&(Yl.forEach(function(e){e()}),Yl=null),oe},enumerable:!0}});var Ql,Jl,Xl,Zl,$l,Kl,eu,tu=0,nu=void 0,iu=void 0,ou=function(){return function(e){return function(t){if(!t||!t.type||"@@redux/batch"!==t.type)return e(t);var n=[].concat(t.payload);return tu+=n.length,n.reduce(function(t,n){tu-=1;try{return e(n)}catch(e){throw e}},null)}}},ru=function(e){function t(){nu===iu&&(nu=nu.slice())}function n(e){if("function"!=typeof e)throw new Error("Invalid listeners, expected a function.");var n=!0;return t(),nu.push(e),function(){n&&(t(),nu.splice(nu.indexOf(e),1),n=!1)}}function i(){tu>0||(iu=nu,nu.forEach(function(e){return e()}))}return nu=[],iu=nu,function(t,o,r){var a=e(t,o,r),s=ou()(a.dispatch);return a.subscribe(i),jt({},a,{dispatch:s,subscribe:n})}},au="page/showInvitation",su="window/update-messages",cu="page/update-window-status",du="app/ban",lu={banned:!1},uu=(Ql={},Ql["app/ready"]=function(e){return Object.assign({},e,{isReady:!0})},Ql[du]=function(e){return Object.assign({},e,{banned:!0})},Ql["app/switchServer"]=function(e,t){return Object.assign({},e,{server:t})},Ql["app/setIsActive"]=function(e,t){return Object.assign({},e,{isActive:t})},Ql["app/setIsOpenerExists"]=function(e,t){return Object.assign({},e,{isOpenerExists:t})},Ql),pu=Ei(lu,uu),fu={platform:"desktop",title:"",buttons:{},windowStatus:Fo,dynamicCampaign:!1,campaignId:0,chatGroup:0,invitation:null,visitor:{},skipPreChat:!1,width:0,height:0,orientation:"portrait"},hu=function(e,t,n,i){return qr(e,{type:t.isManual?"manualInvitation":"autoInvitation",invitationId:t.id,invitationType:t.type,page:{title:n,url:i}})},mu=(Jl={},Jl["page/setButtonIsOnline"]=function(e,t){var n,i,o=t.campaignId,r=t.ifOnline;if(e.buttons[o]===r)return e;var a=e.isDynamicCampaign?(n={},n[o]=r,n):Ni(e.buttons,(i={},i[o]=r,i));return Ni(e,{buttons:a})},Jl[au]=function(e,t,n){var i=n.buttonType;if(t.type===Ic){var o=t.windowStatus||zo,r="adaptive"===i,a=o===zo,s=e.windowStatus===zo;return r&&!s&&a&&(o=Do),Ni(e,{requestChatAction:hu(e.campaignId,t,e.title,e.url),windowStatus:o})}return t.isManual&&t.type===Rc?Ni(e,{requestChatAction:hu(e.campaignId,t,e.title,e.url),windowStatus:Lo}):null==e.invitation?Ni(e,{invitation:t}):e},Jl["page/updateVisitor"]=function(e,t){var n=Ni(e.visitor,t);return Ni(e,{visitor:n})},Jl["invitaton/refuse"]=function(e){return Ni(e,{invitation:null})},Jl["chatWindow/open"]=function(e,t,n){return Ni(e,{windowStatus:"adaptive"===n?Do:zo,invitation:null,requestChatAction:e.requestChatAction||qr(t,{type:"button",page:{title:e.title,url:e.url}})})},Jl[cu]=function(e,t){return Ni(e,{windowStatus:t,invitation:t===zo?null:e.invitation})},Jl["chatWindow/popOut"]=function(e){return Ni(e,{windowStatus:Fo})},Jl["invitaton/accept"]=function(e,t){var n=e.invitation;return n?Ni(e,{invitation:null,requestChatAction:hu(t,n,e.title,e.url)}):e},Jl["page/buttonClick"]=function(e,t){return Ni(e,{invitation:null,requestChatAction:qr(t,{type:"button",page:{title:e.title,url:e.url}})})},Jl["web/startChatAgain"]=function(e){return Ni(e,{requestChatAction:qr(e.requestChatAction.campaignId,{type:"button",page:{title:e.title,url:e.url}})})},Jl["page/setSkipPreChat"]=function(e,t){return e.skipPreChat===t?e:Ni(e,{skipPreChat:t})},Jl["page/updateSize"]=function(e,t){return e.width===t.width&&e.height===t.height?e:Ni(e,t)},Jl["window/closeMinimizeBubble"]=function(e,t,n){return n?Ni(e,{windowStatus:Fo}):e},Jl["page/updateOrientation"]=function(e,t){return e.orientation===t?e:Object.assign({},e,{orientation:t})},Jl["page/setCampaignId"]=function(e,t){return e.campaignId===t?e:Object.assign({},e,{campaignId:t})},Jl),bu=Ei(fu,mu),gu={entities:{},errors:{},fetchStatus:{}},wu={agents:gu,messages:gu,buttons:gu,campaigns:gu,fields:gu,departments:gu},vu=function(e,t){var n,i,o,r=e.entities,a=e.errors,s=e.fetchStatus,c=t.id,d=t.entity,l=t.error,u=t.fetchStatus;return{entities:Ni(r,(n={},n[c]=Ni(r[c],d),n)),errors:Ni(a,(i={},i[c]=l,i)),fetchStatus:Ni(s,(o={},o[c]=u,o))}},yu=(Xl={},Xl["entities/button/visible"]=function(e,t){var n=t.isHidden,i=t.campaignId,o=e.buttons.entities[i];return o?o.isHidden===n?e:Ni(e,{buttons:vu(e.buttons,{id:i,entity:{isHidden:n}})}):e},Xl["entities/updateFields"]=function(e,t){var n=t.fields,i=t.type,o=t.campaignId,r=n.reduce(function(e,t){var n=e;return n.entities[t.id]=t,n.error[t.id]=null,n.fetchStatus[t.id]="done",n},{entities:Object.assign({},e.fields.entities),error:Object.assign({},e.fields.error),fetchStatus:Object.assign({},e.fields.fetchStatus)}),a=Object.assign({},e.campaigns.entities[o]);return a[i]=n.map(function(e){return e.id}),Ni(e,{campaigns:vu(e.campaigns,{id:o,entity:a,error:null,fetchStatus:"done"}),fields:r})},Xl["entities/updateButton"]=function(e,t){return Ni(e,{buttons:vu(e.buttons,t)})},Xl["entities/updateCampaign"]=function(e,t){if(null==t.entity)return Ni(e,{campaigns:vu(e.campaigns,t)});var n=["prechat","postchat","offline"],i=Array.prototype.concat.apply([],n.map(function(e){return t.entity[e]||[]})).map(function(e){return Object.assign({isErrorShowed:!1,isFocused:!1},e)}),o=t.entity?n.reduce(function(e,t){var n;return e[t]?Ni(e,(n={},n[t]=e[t].map(function(e){return e.id}),n)):e},t.entity):null;return Ni(e,{campaigns:vu(e.campaigns,Ni(t,{entity:o})),fields:i.reduce(function(e,t){return vu(e,{id:t.id,entity:t,error:null,fetchStatus:Ro})},e.fields)})},Xl["entities/updateAgent"]=function(e,t){return Ni(e,{agents:vu(e.agents,t)})},Xl["entities/updateDepartment"]=function(e,t){return Ni(e,{departments:vu(e.departments,t)})},Xl[au]=function(e,t){var n=t.agent;return n?Ni(e,{agents:vu(e.agents,{id:n.id,entity:n,fetchStatus:Ro})}):e},Xl["form/update-value"]=function(e,t){var n,i=e.fields.entities[t.id];if(i.value===t.value&&i.isErrorShowed)return e;var o=Object.assign({},i,{value:t.value,isErrorShowed:!0}),r=Object.assign({},e.fields,{entities:Object.assign({},e.fields.entities,(n={},n[t.id]=o,n))});return Object.assign({},e,{fields:r})},Xl["form/focus"]=function(e,t){var n,i=e.fields.entities[t.id];if(!i)return e;var o=Object.assign({},i,{isFocused:!0}),r=Object.assign({},e.fields.entities,(n={},n[t.id]=o,n)),a=Object.assign({},e.fields,{entities:r});return Object.assign({},e,{fields:a})},Xl["form/blur"]=function(e,t){var n,i=e.fields.entities[t.id],o=Object.assign({},i,{isErrorShowed:!0,isFocused:!1}),r=Object.assign({},e.fields.entities,(n={},n[t.id]=o,n)),a=Object.assign({},e.fields,{entities:r});return Object.assign({},e,{fields:a})},Xl["form/validate-all"]=function(e,t){var n=!1,i=t.ids.reduce(function(e,t){var i=e[t],o=e;return o[t]=Object.assign({},i,{isErrorShowed:!0,isFocused:!n}),n=!0,o},Object.assign({},e.fields.entities)),o=Object.assign({},e.fields,{entities:i});return Object.assign({},e,{fields:o})},Xl[su]=function(e,t){return t.reduce(function(e,t){if("agentJoinChat"!==t.type&&"agentAcceptChat"!==t.type)return e;var n=t.content.agent;return Object.assign({},e,{agents:vu(e.agents,{id:n.id,entity:n,error:null,fetchStatus:Ro})})},e)},Xl["form/reset"]=le,Xl[cu]=function(e,t){return t!==Fo?e:le(e)},Xl["chatWindow/popOut"]=function(e){return le(e)},Xl["window/closeMinimizeBubble"]=function(e,t,n){return n?le(e):e},Xl),xu=Ei(wu,yu),_u=Object.freeze({kb:"kb",media:"media",voice:"voice",bubble:"bubble"}),Cu=function(e,t,n){return n+"_"+e+(t?"_"+t:"")},ku=function(e){for(var t=Ii.cookie,n=t.split("; "),i=0;i<n.length;i+=1){var o=n[i].split("=");if(null!=o&&2===o.length&&e===o[0])return o[1]}return null},Su=function(e){Ii.cookie=e+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;"},Au=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];null!==t&&(Ii.cookie=e+"="+t+";path=/;"+(n?"secure=true;":"")+"expires=Sat, 01 Jan 10000 00:00:00 GMT")},Tu=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];null!==t&&(Ii.cookie=e+"="+t+";path=/;"+(n?"secure=true;":""))},Iu=function(e){var t=void 0;return function(){return void 0===t&&(t=e()),t}}(function(){var e="comm100test",t=Ti.sessionStorage;try{return t.setItem(e,"test"),t.removeItem(e),!1}catch(e){return e.code===DOMException.QUOTA_EXCEEDED_ERR&&0===t.length}}),Ru=function(e){var t=window[e]||{};return window[e]=t,{getItem:function(e){return t[e]},setItem:function(e,n){t[e]=n.toString()},removeItem:function(e){delete t[e]}}},Pu=function(){return Iu()?Ru("comm100LocalStorage"):Ti.localStorage}(),Mu=function(){return Iu()?Ru("comm100SessionStorage"):Ti.sessionStorage}(),Ou=!1,Eu=function(e){Ou=e},Nu=function(e){return isNaN(+e)||0==+e?null:Math.floor(+e)},Wu=function(e){return Cu(ml,bl,e?"Comm100_CC_Identity":"comm100standby_id")},Bu=function(e){return Su(Wu(e))},Du=function(e){return Cu(ml,bl,e?"comm100_visitor":"comm100standby_visitor")},zu=function(e){return Nu(ku(Du(e)))},ju=function(e,t){(Ou?Tu:Au)(Du(t),e)},qu=function(){return Cu(ml,bl,"comm100_guid2")},Lu=function(){return ku(qu())},Vu=function(e){e&&Tu(qu(),e)},Fu=function(){return Cu(ml,bl,"comm100_visitor")},Uu=function(e){try{return JSON.parse(Pu.getItem(e))||{}}catch(e){return{}}},Hu=function(e){try{return JSON.parse(Mu.getItem(e))||{}}catch(e){return{}}},Gu=function(){return Uu(Fu())},Yu=function(e){return Pu.setItem(Fu(),JSON.stringify(Object.assign({},Gu(),e)))},Qu=function(){return Cu(ml,bl,"comm100_chat")},Ju=function(e){var t=Uu(Qu());return t.chatGuid===e?t:{}},Xu=function(e,t){if(Pu){var n=Ju(e);Pu.setItem(Qu(),JSON.stringify(n.chatGuid===e?Object.assign({},n,t):Object.assign({chatGuid:e},t)))}},Zu=function(){return Cu(ml,bl,"comm100_session")},$u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lu(),t=Uu(Zu());return t.visitorGuid===e?t:{}},Ku=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lu(),n=$u(t);Pu.setItem(Zu(),JSON.stringify(n.visitorGuid===t?Object.assign({},n,e):Object.assign({visitorGuid:t},e)))},ep=function(){return Cu(ml,bl,"comm100_page")},tp=function(){return Hu(ep())},np=function(e){return Mu&&Mu.setItem(ep(),JSON.stringify(Object.assign({},tp(),e)))},ip=function(){return Cu(ml,bl,"comm100_session")},op=function(){return Cu(ml,bl,"comm100standby_session")},rp=function(){Su(ip()),Su(op()),Bu(!0),Bu(!1)},ap=function(){np({mediaChatHash:Date.now().toString()})},sp=function(){return tp().mediaChatHash},cp=function(e){return Ju(e).mediaChatHash},dp=function(e){Xu(e,{mediaChatHash:sp()})},lp=function(e){var t=cp(e);t&&t===sp()&&Xu(e,{mediaChatHash:null})},up=function(e){var t=cp(e);return t?t===sp():(dp(e),!0)},pp=function(e,t){return e.concat(t)},fp=function(e,t,n){for(var i=0;i<e.length;i+=1){var o=function(i){var o=e[i];return o.id===t.id?{v:e}:n(o)?{v:e.map(function(e){return e===o?t:e})}:void 0}(i);if("object"===(void 0===o?"undefined":Dt(o)))return o.v}return pp(e,t)},hp=function(e){return"creditCardMasked"!==e.type&&"pendingAccept"!==e.type&&"pendingAudioRequesting"!==e.type&&"pendingHangup"!==e.type&&"pendingVideoRequesting"!==e.type&&"pendingSubmitSecureForm"!==e.type&&"pendingCancelSecureForm"!==e.type&&"pendingGetSecureFormFailure"!==e.type&&"pendingVisitorIsTyping"!==e.type&&"agentTyping"!==e.type&&"visitorText"!==e.type&&"visitorImage"!==e.type&&"visitorFile"!==e.type},mp=function(e){return"pendingAccept"!==e.type&&"pendingAudioRequesting"!==e.type&&"pendingHangup"!==e.type&&"pendingVideoRequesting"!==e.type},bp=function(e,t){return function(n,i){var o=i.type;if("systemIfSupportWebrtc"===o||"systemGotoOfflineMessage"===o)return n;if("visitorRequestChat"===o&&""===i.content)return n;var r=Object.assign({},i,{time:new Date(i.time-t)});if("chatbot"===r.sender.type&&"chatbotRequestQuestionGuid"!==r.type&&r.type!==po){var a=!1,s=n.map(function(e){return"chatbotRequestQuestionGuid"!==e.type||e.timeout||e.content!==r.content.GUID?"chatbotRequestQuestionGuid"===e.type&&e.content.GUID===r.content.GUID?(a=!0,e):e:(a=!0,r)});return a?s:pp(n,r)}if("agentAcceptChat"===r.type){var c=n.map(function(e){return e.sender&&"agent"===e.sender.type&&0===e.sender.id?Object.assign({},e,{sender:Object.assign({},e.sender,{id:r.content.agent.id})}):e});return pp(c,r)}if("agentSendImage"===r.type)return fp(n,r,function(e){return"agentSendImageStart"===e.type&&e.content===r.content.guid});if("visitorAddTextMessage"===r.type)return fp(n,r,function(e){return"visitorText"===e.type&&e.content===r.content});if("visitorSendImage"===r.type)return fp(n,r,function(e){return"visitorImage"===e.type});if("visitorSendFile"===r.type)return fp(n,r,function(e){return"visitorFile"===e.type});if("visitorCreditCardMasked"===r.type)return fp(n,r,function(e){return"creditCardMasked"===e.type});if("visitorTyping"===r.type)return n;if("systemEndChat"===r.type)return n.map(function(e){return"agentRequestSecureForm"!==e.type?e:e.isHidden?e:Object.assign({},e,{isHidden:!0})}).concat([r,{type:"startChatAgain",content:e.startChatAgain,sender:{type:"system"}}]);if("visitorAudioChatRequest"===r.type)return fp(n,r,function(e){return"pendingAudioRequesting"===e.type});if("visitorVideoChatRequest"===r.type)return fp(n,r,function(e){return"pendingVideoRequesting"===e.type});if("visitorVideoChatAccept"===r.type||"visitorAudioChatAccept"===r.type)return fp(n,r,function(e){return"pendingAccept"===e.type});if("visitorSubmitSecureForm"===r.type)return fp(n,r,function(e){return"pendingSubmitSecureForm"===e.type});if("visitorCancelSecureForm"===r.type)return fp(n,r,function(e){return"pendingCancelSecureForm"===e.type});if("visitorGetSecureFormFailure"===r.type)return fp(n,r,function(e){return"pendingGetSecureFormFailure"===e.type});if("visitorAudioChatRefuse"===r.type||"visitorAudioChatStop"===r.type||"visitorAudioChatCancelRequest"===r.type||"visitorVideoChatRefuse"===r.type||"visitorVideoChatStop"===r.type||"visitorVideoChatCancelRequest"===r.type)return pp(n.filter(mp),r);if("agentTyping"===r.type){var d=n.filter(function(e){return"agentTyping"!==e.type});return pp(d,r)}if("agentSendText"===r.type&&n.length>0){if("autoInvMsg"===n[0].type&&!n.find(function(e){return"chatbotJoinChat"===e.type}))return n.map(function(e,t){return 0===t?Object.assign({},e,{type:"agentSendText",id:r.id}):e});var l=n.filter(function(e){return"agentTyping"!==e.type});return pp(l,r)}if("chatbotSetAnswerIfHelpful"===r.type){var u=n.map(function(e){return"chatbotHighConfidenceAnswer"===e.type&&e.content.GUID===r.content.guid?Object.assign({},e,{disableRate:!0}):e});return pp(u,r)}return pp(n,r)}},gp=function(e,t){return e.messages.filter(function(e){return e.type===t}).length>0},wp=function(e){return function(t,n){var i=t.messages.concat({type:e,time:new Date,content:n.message||"",sender:{type:"visitor"}});return n.ifCardMasking&&(i=i.concat({type:"creditCardMasked",time:new Date,content:"",sender:{type:"visitor"}})),Object.assign({},t,{messages:i})}},vp=function(e){return function(t,n){return Object.assign({},t,{isUploading:!0,error:"",warning:"",messages:t.messages.concat({type:e,time:new Date,content:{fileName:n.name,percent:0,onCancel:void 0},sender:{type:"visitor"}})})}},yp=function(e,t){sp()||ap();var n=e.involvedAgents||[];return n.filter(function(e){return e===t}).length>0?Ni(e,{chatStatus:bo}):(n=(e.involvedAgents||[]).concat([t]),Ni(e,{involvedAgents:n,chatStatus:bo,isChatBot:!1}))},xp=function(e){return Ni(e,{isChatBot:!0,chatStatus:bo})},_p=function(e,t,n){var i=e.fields||{};return i[t]=n,{fields:i}},Cp=function(e,t){var n=e.expandWindowItems;return n&&n.some(function(e){return e.id===t.id})?{}:(n?n.push(t):n=[t],{expandWindowItems:n,expandWindowSelectedTab:t.id})},kp=function(e,t){var n=e.expandWindowItems;if(n){var i=-1;if(n.some(function(e,n){var o=e.id===t;return o&&(i=n),o}),i>-1){var o={};return 1===n.length?o.expandWindowSelectedTab=null:e.expandWindowSelectedTab===t&&(o.expandWindowSelectedTab=n.find(function(e){return e.id!==t}).id),n.splice(i,1),o.expandWindowItems=n,o}}return{}},Sp=function(e,t,n){return t?Cp(e,{id:n,isSystem:!0}):kp(e,n)},Ap=function(e,t){return Ni(e,Object.assign({},Sp(e,"videoRequesting"===t.status||"videoIncoming"===t.status||"videoChatting"===t.status,"media"),Sp(e,"audioRequesting"===t.status||"audioIncoming"===t.status||"audioChatting"===t.status,"voice"),{vChatStatus:t.status,audioVideoChatStartTime:t.startTime||0,audio_video_disabled:"notStart"!==t.status}))},Tp=function(e){return Ni(Ap(e,{status:"notStart",startTime:0}),{audioVideoAgentId:0})},Ip=function(e){if(!e)return e;var t=e.messages.filter(hp);return Ni(e,{chatStatus:go,autoEjectTranscript:!0,error:"",warning:"",messages:t})},Rp=function(e,t){return up(e.chatGuid)?t():e},Pp=function(e,t,n,i){var o,r=(o={},o.agentAcceptChat=function(e){return yp(e,t.content.agent.id)},o.agentJoinChat=function(e){return yp(e,t.content.agent.id)},o.agentRefuseChat=function(e){return Ni(e,{chatStatus:go})},o.systemEndChat=function(t){var o=n.postchat;return o?o.every(function(t){var n=i[t].type;return"rating"===n?e.fields.rating:"comment"===n&&e.fields.comment})?Ip(t):Ni(t,{chatStatus:go,tab:Ao}):Ip(t)},o.visitorRequestChat=function(e){return Ni(e,{chatStatus:ho})},o.chatbotJoinChat=function(e){return xp(e)},o.visitorVideoChatRequest=function(e){return Rp(e,function(){return Ap(e,{status:"videoRequesting"})})},o.visitorVideoChatAccept=function(e,t){return Rp(e,function(){return Ap(e,{status:"videoChatting",startTime:t.time-e.timeDelay})})},o.visitorAudioChatRequest=function(e){return Rp(e,function(){return Ap(e,{status:"audioRequesting"})})},o.visitorAudioChatAccept=function(e,t){return Rp(e,function(){return Ap(e,{status:"audioChatting",startTime:t.time-e.timeDelay})})},o.agentVideoChatRequest=function(e,t){return"notStart"!==e.vChatStatus?e:Rp(e,function(){return Ni(Ap(e,{status:"videoIncoming"}),{audioVideoAgentId:t.sender.id})})},o.agentVideoChatAccept=function(e,t){return Rp(e,function(){return Ni(Ap(e,{status:"videoChatting",startTime:t.time-e.timeDelay}),{audioVideoAgentId:t.sender.id})})},o.agentAudioChatRequest=function(e,t){return"notStart"!==e.vChatStatus?e:Rp(e,function(){return Ni(Ap(e,{status:"audioIncoming"}),{audioVideoAgentId:t.sender.id})})},o.agentAudioChatAccept=function(e,t){return Rp(e,function(){return Ni(Ap(e,{status:"audioChatting",startTime:t.time-e.timeDelay}),{audioVideoAgentId:t.sender.id})})},o.agentVideoChatCancelRequest=Tp,o.agentVideoChatRefuse=Tp,o.agentVideoChatStop=Tp,o.agentAudioChatStop=Tp,o.agentAudioChatRefuse=Tp,o.agentAudioChatCancelRequest=Tp,o.systemAudioChatNoAnswer=Tp,o.systemAudioChatEnd=Tp,o.systemVideoChatNoAnswer=Tp,o.systemVideoChatEnd=Tp,o.visitorAudioChatCancelRequest=Tp,o.visitorAudioChatRefuse=Tp,o.visitorAudioChatStop=Tp,o.visitorVideoChatCancelRequest=Tp,o.visitorVideoChatRefuse=Tp,o.visitorVideoChatStop=Tp,o.agentTyping=function(e){return e.limitClockerCount>0?Ni(e,{warning:"",limitClockerCount:0,stopLimitClocker:!0}):e},o),a=r[t.type],s=e;return a&&(s=a(e,t)),s.isFocused&&(s=Object.assign({},s,{maxReadId:Math.max(e.maxReadId,e.maxId)})),s},Mp=function(e){return Ni({fields:{name:"",email:"",phone:"",company:"",product:"",department:void 0,ticketId:void 0,custom:{}},forms:{prechat:"none",postchat:"none",offline:"none"},chatStatus:"none",messages:[],maxId:-1,involvedAgents:[],draft:"",maxReadId:-1,isFocused:!1,isFrequencyLimited:!1,showPrelogin:!1,ssoUrl:"",queue:{},error:"",warning:"",fileUploadCount:0,disabled:!1,vChatStatus:"notStart",audioVideoChatStartTime:0,stopLimitClocker:!1,limitClockerCount:0,popupBubble:!1},e)},Op=function(e,t){var n=t.isManual,i=n&&(t.type===Rc||t.type===Ic),o=t.chat;return Mp({id:e,tab:So,chatStatus:mo,chatId:o&&o.id,chatGuid:o&&o.guid,messages:i?[]:[{id:-1,time:new Date,type:"autoInvMsg",sender:{id:t.agent?t.agent.id:0,type:"agent"},content:t.text}],involvedAgents:t.agent?[t.agent.id]:[]})},Ep=(Zl={},Zl["chatWindow/open"]=function(e,t){return Mp({id:t,tab:"loading"})},Zl["web/startChatAgain"]=function(e){return Mp({id:e.id,tab:"loading"})},Zl[au]=function(e,t,n){var i=n.campaignId;return e||(t.type===Ic||t.type===Rc&&t.isManual?Op(i,t):e)},Zl["sso/updateSSO"]=function(e,t){return Ni(e,t)},Zl[su]=function(e,t,n){var i=n.campaign,o=n.fields,r=t.find(function(e){return"visitorTyping"===e.type}),a=e.visitorTyping;r&&(a=!1);var s=t.find(function(e){return"visitorRequestChat"===e.type})&&e.messages.find(function(e){return"visitorRequestChat"===e.type}),c=t.find(function(e){return"systemPromoteOfflineMesage"===e.type})&&e.messages.find(function(e){return"systemPromoteOfflineMesage"===e.type}),d=t.filter(function(t){var n=(void 0===t.id||t.id>e.maxId)&&"visitorTyping"!==t.type;return(!n||!s||"visitorRequestChat"!==t.type)&&((!n||!c||"systemPromoteOfflineMesage"!==t.type)&&n)}),l=d.reduce(bp(i.languages,e.timeDelay||0),e.messages);if(l!==e.messages){var u=l.filter(function(e){return"visitorImage"===e.type||"visitorFile"===e.type});if(u.length>0){l=l.filter(function(e){return"visitorImage"!==e.type&&"visitorFile"!==e.type}).concat(u)}return d.reduce(function(e,t){return Pp(e,t,i,o)},Object.assign({},e,{messages:l,visitorTyping:a,maxId:Math.max(e.maxId,t[t.length-1].id)}))}return a!==e.visitorTyping?Object.assign({},e,{visitorTyping:a,maxId:Math.max(e.maxId,t[t.length-1].id)}):jt({},e,{maxId:Math.max(e.maxId,t[t.length-1].id)})},Zl["window/sendText"]=function(e,t){var n=wp("visitorText")(e,t);return Object.assign({},n,{visitorTyping:!1,draft:""})},Zl["window/sendImage"]=vp("visitorImage"),Zl["window/sendFile"]=vp("visitorFile"),Zl["chatinput/setVisitorIsTyping"]=function(e,t){var n=Object.assign({},e);return e.chatStatus!==bo?n:e.chatStatus===bo&&e.isChatBot?n:(n.visitorTyping=!0,n.draft=t.message,n)},Zl["window/update-upload"]=function(e,t){var n=!1,i=e.messages.map(function(e){return"visitorFile"===e.type||"visitorImage"===e.type?(n=!0,Object.assign({},e,{content:Object.assign({},e.content,{filename:t.name,percent:t.percent,onCancel:t.onCancel})})):e});return n?Object.assign({},e,{messages:i}):e},Zl["window/fail-file"]=function(e,t){var n=e.messages.filter(function(e){return"visitorFile"!==e.type&&"visitorImage"!==e.type}),i="";return"string"==typeof t?i=t:"object"===(void 0===t?"undefined":Dt(t))&&null!==t&&(i=t.message||""),e.chatStatus===go&&(i=""),Object.assign({},e,{messages:n,error:i,isUploading:!1})},Zl["window/sucess-file"]=function(e){return Object.assign({},e,{error:"",isUploading:!1,fileUploadCount:e.fileUploadCount+1})},Zl["form/submit-start"]=function(e,t){var n;return Object.assign({},e,{forms:Object.assign({},e.forms,(n={},n[t]="pending",n)),error:"",warning:""})},Zl["form/submit-success"]=function(e,t,n){var i;return Object.assign({},e,{autoEjectTranscript:"postchat"===t,forms:Object.assign({},e.forms,(i={},i[t]="success",i)),messages:"postchat"!==t?e.messages:e.messages.concat({type:"postChatSuccess",content:n.eventRatingSubmitSuccess,sender:{type:"system"}})})},Zl["window/addSystemMessage"]=function(e,t){return Ni(e,{messages:e.messages.concat([{type:"systemPrompt",sender:{type:"system"},content:t}])})},Zl["form/submit-fail"]=function(e,t){var n;return Ni(e,{forms:Ni(e.forms,(n={},n[t]="fail",n))})},Zl["form/update"]=function(e,t){var n=void 0;if(t.custom){var i=Object.assign({},e.fields.custom,t.custom);n=Object.assign({},e.fields,t,{custom:i})}else n=Object.assign({},e.fields,t);return Object.assign({},e,{fields:n})},Zl["form/fill-default"]=function(e,t){var n=e.fields.custom;t.custom&&(n=Object.assign({},e.fields.custom,t.custom),Object.keys(e.fields.custom).forEach(function(t){e.fields.custom[t]&&(n[t]=e.fields.custom[t])}));var i=Object.assign({},e.fields,t,{custom:n});return Object.keys(e.fields).forEach(function(t){"custom"!==t&&e.fields[t]&&(i[t]=e.fields[t])}),Object.assign({},e,{fields:i})},Zl["chatWindow/showTab"]=function(e,t,n){var i=Ni(e,{tab:t});if(t===To&&n){var o=i.messages.filter(function(e){return"visitorAddTextMessage"===e.type}).map(function(e){return e.content}).join(",");i=Object.assign({},i,{fields:Object.assign({},i.fields,{content:o})})}return i},Zl["window/startWaiting"]=function(e){return Ni(e,{chatStatus:ho,allowWaitingSendMessage:e.isChatBot||e.chatStatus===mo})},Zl["window/removeForm"]=function(e,t){return Ni(e,{messages:e.messages.map(function(e){return"agentRequestSecureForm"!==e.type?e:e.content.url.indexOf("otk="+t)>0?Object.assign({},e,{isHidden:!0}):e})})},Zl["window/startChatBot"]=function(e){return xp(e)},Zl["window/toggle-error"]=function(e,t){return e&&e.error!==t?Object.assign({},e,{error:t}):e},Zl["window/toggle-warning"]=function(e,t){return e&&e.warning!==t?Object.assign({},e,{warning:t,stopLimitClocker:""===t||e.stopLimitClocker,limitClockerCount:""===t?0:e.limitClockerCount}):e},Zl["window/endchat"]=Ip,Zl["window/updateChatIdentity"]=function(e,t){var n=0;return t.serverTime>0&&(n=Zi(t.serverTime)),Ni(e,{chatId:t.chatId,chatGuid:t.chatGuid,timeDelay:n})},Zl["window/toggleFocus"]=function(e,t){return null==e?e:e.isFocused===t?e:Ni(e,{isFocused:t,maxReadId:t?Math.max(e.maxId,e.maxReadId):e.maxReadId})},Zl[cu]=function(e,t){return t===Fo?null:t===Lo?Ni(e,{isFocused:!1,maxReadId:Math.max(e.maxId,e.maxReadId)}):t===zo||t===qo?Ni(e,{isFocused:!0,maxReadId:Math.max(e.maxId,e.maxReadId)}):e},Zl["window/contentScrollStatusUpdate"]=function(e,t){return Ni(e,{ifHideBio:t})},Zl["web/chatBotAnswerHelpful"]=function(e,t){if(e.chatStatus===bo&&e.isChatBot){var n=e.messages.map(function(e){return"chatbotHighConfidenceAnswer"===e.type&&e.content.GUID===t.actionGuid?Object.assign({},e,{disableRate:!0}):e});return Object.assign({},e,{messages:n})}return e},Zl["chatWindow/chatInputWarning"]=function(e,t,n){var i,o=(i={},i.maxLengh=function(){return n.promptInputLimit},i.emptyFile=function(){return"File must not be empty."},i.maxFileSize=function(){return n.promptFileSizeExceed.replace("{fileSize}",t.params.fileSize)},i.limited=function(){return"You're sending messages too frequently. Please wait for "+t.params.seconds+" second(s) and try again."},i.maxFileCount=function(){return n.promptSendFileCountLimit.replace("{fileCount}",t.params.fileCount)},i);return"limited"===t.type&&t.params.fromClocker&&e.stopLimitClocker?e:"limited"===t.type&&e.limitClockerCount>=10?Ni(e,{warning:"",limitClockerCount:0,stopLimitClocker:!0}):o[t.type]?Ni(e,{warning:o[t.type](),stopLimitClocker:"limited"!==t.type&&e.stopLimitClocker,limitClockerCount:"limited"===t.type?e.limitClockerCount+1:e.limitClockerCount}):e},Zl["web/fromChatbotToAgent"]=function(e){return Ni(e,{chatWithAgentClicked:!0})},Zl["window/toggle-disable"]=function(e,t){return t===e.disabled?e:Ni(e,{disabled:t})},Zl["chatWindow/popOut"]=function(){return null},Zl["window/updateQueue"]=function(e,t){return 0===t.position&&0===t.waitTime?e:jt({},e,{queue:{position:t.position,waitTime:Math.ceil(t.waitTime/60)}})},Zl["window/updateVideoStatus"]=Ap,Zl["footer/chatToolVideo"]=function(e,t){return Ni(e,{showChatWindowInExpandwindow:e.showChatWindowInExpandwindow&&!t,maxReadId:e.showChatWindowInExpandwindow&&!t?Math.max(e.maxReadId,e.maxId):e.maxReadId,audio_video_disabled:!0,isFocused:e.showChatWindowInExpandwindow&&!t})},Zl["footer/chatToolAudio"]=function(e,t){return Ni(e,{showChatWindowInExpandwindow:e.showChatWindowInExpandwindow&&!t,maxReadId:e.showChatWindowInExpandwindow&&!t?Math.max(e.maxReadId,e.maxId):e.maxReadId,audio_video_disabled:!0,isFocused:e.showChatWindowInExpandwindow&&!t})},Zl["footer/chatToolRating"]=function(e,t){var n=Object.assign({},e.fields,{rating:t.score,comment:t.comment});return Object.assign({},e,{fields:n})},Zl["window/sendChatMessages"]=function(e,t){var n=[];return t.forEach(function(t){("pendingAccept"!==t.type||gp(e,"pendingAccept"))&&("pendingHangup"!==t.type||gp(e,"pendingHangup"))&&("pendingGetSecureFormFailure"!==t.type||gp(e,"pendingGetSecureFormFailure"))?"pendingHangup"!==t.type&&"pendingAccept"!==t.type&&"pendingGetSecureFormFailure"!==t.type&&n.push(t):n.push(t)}),Ni(e,{messages:e.messages.concat(n)})},Zl["expandWindow/expandWidowTabSelect"]=function(e,t){var n={};return n.showChatWindowInExpandwindow="bubble"===t,n.isFocused=n.showChatWindowInExpandwindow,n.maxReadId=n.showChatWindowInExpandwindow?Math.max(e.maxReadId,e.maxId):e.maxReadId,n.expandWindowSelectedTab=t,Ni(e,n)},Zl["expandWindow/toggleExtendedWindow"]=function(e,t){return t?e.expandWindowSelectedTab?e:e.expandWindowItems&&0!==e.expandWindowItems.length?Ni(e,{expandWindowSelectedTab:e.expandWindowItems[0].id}):e:e.expandWindowSelectedTab?Ni(e,{expandWindowSelectedTab:void 0}):e},Zl["window/hangupAudioVideoChat"]=function(e){return Tp(e)},Zl["window/updateMaxReadId"]=function(e,t){return Ni(e,{maxReadId:t})},Zl["window/updateWindowId"]=function(e,t){return Ni(e,{id:t})},Zl["window/closeMinimizeBubble"]=function(e,t,n){return n?null:e},Zl["window/togglePopupBubble"]=function(e,t){return e?e.popupBubble===t?e:Ni(e,{popupBubble:t,autoEjectTranscript:!1}):e},Zl["expandWindow/setWindowTabs"]=function(e,t){return Ni(e,{expandWindowItems:t})},Zl["window/setFrequencyLimitState"]=function(e,t){return e.frequencyLimitState===t?e:Ni(e,{frequencyLimitState:t})},Zl["web/emailTranscript"]=function(e,t){return Ni(e,_p(e,fo,t))},Zl["window/setId"]=function(e,t){return null==e?e:e.id===t?e:Object.assign({},e,{id:t})},Zl["window/remove-agent-is-typing"]=function(e){return Object.assign({},e,{messages:e.messages.filter(function(e){return"agentTyping"!==e.type})})},Zl["window/chatbotTimeout"]=function(e,t,n){if(null==e)return e;if(null==e.messages)return e;var i=e.messages.map(function(e){return"chatbotRequestQuestionGuid"===e.type&&e.content===t?Object.assign({},e,{timeout:!0,content:{GUID:e.content,
Message:"Oops. I'm having trouble connecting to the server. ",TextChatWithAgent:n.buttonChatbotChatWithAgent},sender:{type:"chatbot"}}):e});return Object.assign({},e,{messages:i})},Zl["window/resetMaxId"]=function(e){var t=e.messages.length,n=e.messages.map(function(e,n){return Object.assign({},e,{id:n-t})});return Object.assign({},e,{maxId:-1,maxReadId:-1,messages:n})},Zl),Np=Ei(null,Ep),Wp={},Bp=($l={},$l["config/updateConfig"]=Ni,$l),Dp=Ei(Wp,Bp),zp=function(){return{type:du}},jp=function(e){return{type:"app/switchServer",payload:e}},qp=function(){return{type:"app/ready"}},Lp=function(){return{type:"app/setIsOpenerExists"}},Vp=function(e){return{type:"app/setIsActive",payload:e}},Fp=function(e,t){return{type:"page/setButtonIsOnline",payload:{campaignId:e,ifOnline:t}}},Up=function(e){return{type:au,payload:e}},Hp=function(e){return{type:"page/updateVisitor",payload:e}},Gp=function(e){return{type:"invitaton/accept",payload:e}},Yp=function(e){return{type:"page/buttonClick",payload:e}},Qp=function(){return{type:"invitaton/refuse"}},Jp=function(e){return{type:"chatWindow/open",payload:e}},Xp=function(e){return{type:cu,payload:e}},Zp=(P(Xp,Do),P(Xp,jo)),$p=P(Xp,zo),Kp=P(Xp,Vo),ef=P(Xp,Lo),tf=P(Xp,Fo),nf=P(Xp,qo),of=function(e){return{type:"page/setSkipPreChat",payload:e}},rf=function(e){return{type:"page/updateSize",payload:e}},af=function(e){return{type:"page/updateOrientation",payload:e}},sf=P(af,"landscape"),cf=P(af,"portrait"),df=function(e){return{type:"page/setCampaignId",payload:e}},lf=function(e){return{type:"config/updateConfig",payload:e}},uf=function(e){return{type:"entities/updateCampaign",payload:e}},pf=function(e){return{type:"entities/updateButton",payload:e}},ff=function(e,t){return{type:"entities/button/visible",payload:{isHidden:!e,campaignId:t}}},hf=function(e){return{type:"entities/updateAgent",payload:e}},mf=function(e){return{type:"entities/updateDepartment",payload:e}},bf=function(e,t,n){return{type:"entities/updateFields",payload:{type:e,fields:t,campaignId:n}}},gf=function(e,t,n){return{type:"window/update-upload",payload:{name:e,percent:t,onCancel:n}}},wf=function(){return{type:"window/sucess-file"}},vf=function(e){return{type:"window/fail-file",payload:e}},yf=function(e){return{type:"chatWindow/showTab",payload:e}},xf=function(e,t){return{type:"sso/updateSSO",payload:{ssoUrl:e,showPrelogin:t}}},_f=function(e){return{type:su,payload:e}},Cf=function(e){return{type:"window/addSystemMessage",payload:e}},kf=function(e,t){return{type:"window/sendText",payload:{message:e,ifCardMasking:t}}},Sf=function(e){return{type:"window/sendFile",payload:e}},Af=function(){return{type:"window/startWaiting"}},Tf=function(){return{type:"window/startChatBot"}},If=function(e){return{type:"window/removeForm",payload:e}},Rf=If,Pf=function(e){return{type:"window/toggle-warning",payload:e}},Mf=function(e){return{type:"window/toggleFocus",payload:e}},Of=P(Pf,""),Ef=function(e){return{type:"window/toggle-error",payload:e}},Nf=function(){return{type:"window/endchat"}},Wf=Ef,Bf=P(Ef,""),Df=function(){return{type:"web/fromChatbotToAgent"}},zf=function(e){return{type:"web/chatBotSelectQuestion",payload:e}},jf=function(e,t){return{type:"web/chatBotAnswerHelpful",payload:{ifHelpful:e,actionGuid:t}}},qf=function(e,t,n){return{type:"window/updateChatIdentity",payload:{chatId:e,chatGuid:t,serverTime:n}}},Lf=function(e,t){return{type:"chatWindow/chatInputWarning",payload:{type:e,params:t}}},Vf=function(e){return{type:"window/setFrequencyLimitState",payload:e}},Ff=function(){return{type:"web/startChatAgain"}},Uf=function(e){return{type:"window/contentScrollStatusUpdate",payload:e}},Hf=function(e){return{type:"window/toggle-disable",payload:e}},Gf=P(Hf,!0),Yf=(P(Hf,!1),function(){return{type:"chatWindow/popOut"}}),Qf=function(){return{type:"chatWindow/popIn"}},Jf=function(e){return{type:"window/updateQueue",payload:e}},Xf=function(e){return{type:"chatinput/setVisitorIsTyping",payload:{message:e}}},Zf=function(e,t){return{type:"window/prepareP2pChat",payload:{localVideo:e,remoteVideo:t}}},$f=function(){return{type:"window/acceptAudioVideoChat"}},Kf=function(e){return{type:"expandWindow/expandWidowTabSelect",payload:e}},eh=function(e){return{type:"expandWindow/toggleExtendedWindow",payload:e}},th=function(e){return{type:"expandWindow/setWindowTabs",payload:e}},nh=function(e){return{type:"window/updateMaxReadId",payload:e}},ih=function(){return{type:"window/closeMinimizeBubble"}},oh=function(e){return{type:"window/togglePopupBubble",payload:e}},rh=function(){return{type:"window/closeSliently"}},ah=function(e){return{type:"window/setId",payload:e}},sh=function(){return{type:"window/remove-agent-is-typing"}},ch=function(){return{type:"window/mounted"}},dh=function(e){return{type:"window/chatbotTimeout",payload:e}},lh=function(){return{type:"window/resetMaxId"}},uh=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:"web/sendAction",payload:1===t.length?t[0]:Xr(t)}},ph=function(){return{type:"web/pageHeartbeat"}},fh=function(){return{type:"web/chatHeartbeat"}},hh=function(e){return{type:"web/submitRating",payload:e}},mh=function(e){return{type:"web/emailTranscript",payload:e}},bh=function(){return{type:"web/endChat"}},gh=function(e,t){return{type:"web/submitPrechat",payload:{form:e,onSuccess:t}}},wh=function(e,t){return{type:"web/submitPostChat",payload:{form:e,onSuccess:t}}},vh=function(e,t){return{type:"web/submitOfflineMessage",payload:{form:e,onSuccess:t}}},yh=function(e){return{type:"web/submitSSOInfo",payload:e}},xh=function(){return{type:"web/skipLogin"}},_h=function(){return{type:"web/sendPageVisit"}},Ch=function(){return{type:"web/prechatHeartbeat"}},kh=function(){return{type:"web/offlineHeartbeat"}},Sh=function(e){return{type:"web/updateCustomVariables",payload:e}},Ah=function(e){return{type:"window/sendChatMessages",payload:e}},Th=function(){return{type:"window/hangupAudioVideoChat"}},Ih=function(e){return{type:"web/getChatButton",payload:e}},Rh=function(){return{type:"web/getConfig"}},Ph=function(){return{type:"web/getChatWindowConfig"}},Mh=function(e){return e.entities.campaigns.entities[e.window.id].languages},Oh=function(e,t){return Object.assign({},t,{config:Mh(e)})},Eh=(Kl={},Kl["chatWindow/open"]=function(e,t){return Object.assign({},t,{config:xc(e,t.payload)})},Kl[au]=function(e,t){return Object.assign({},t,{config:{campaignId:la(e),buttonType:xc(e,la(e))}})},Kl["chatWindow/chatInputWarning"]=function(e,t){return Oh(e,t)},Kl["window/chatbotTimeout"]=function(e,t){return Oh(e,t)},Kl[su]=function(e,t){var n=Ya(e),i=e.entities.fields.entities;return Object.assign({},t,{config:{campaign:n,fields:i}})},Kl["form/submit-success"]=Oh,Kl["window/closeMinimizeBubble"]=function(e,t){return Object.assign({},t,{config:wd(e)})},Kl["window/closeSliently"]=function(){return tf()},Kl["chatWindow/showTab"]=function(e,t){var n="autoInvitation"===ya(e);return Object.assign({},t,{config:n})},Kl),Nh=function(e,t){return Eh[t.type]?Eh[t.type](e,t):t},Wh=function(e){for(var t=Object.keys(e),n={},i=0;i<t.length;i++){var o=t[i];"function"==typeof e[o]&&(n[o]=e[o])}var r,a=Object.keys(n);try{U(n)}catch(e){r=e}return function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments[1];if(r)throw r;for(var i=!1,o={},s=0;s<a.length;s++){var c=a[s],d=n[c],l=e[c],u=d(l,t);if(void 0===u){var p=F(c,t);throw new Error(p)}o[c]=u,i=i||u!==l}return i?o:e}}({app:pu,page:bu,entities:xu,window:Np,configuration:Dp}),Bh=function(e,t){return Wh(e,Nh(e,t))},Dh=3e4,zh=18e4,jh=function(e,t){return e===t||(void 0===e?"undefined":Dt(e))===(void 0===t?"undefined":Dt(t))&&(null==e||null==t?e==t:Object.keys(e).reduce(function(n,i){return n&&e[i]===t[i]},!0)&&Object.keys(t).reduce(function(n,i){return n&&t[i]===e[i]},!0))},qh=function(e,t){return Object.keys(e).reduce(function(n,i){var o;return e[i]===t[i]?n:Object.assign({},n,(o={},o[i]=e[i],o))},{})},Lh=function(e){if(Yo(e.getState()))return null;var t=null,n=function(){if(null===t){var n=e.getState(),i=Jc(n),o=P(ue,e);t=setInterval(function(){var e=Sd(i);o(e)},1e3)}},i=function(){clearInterval(t),t=null},o=e.getState(),r=e.subscribe(function(){var t=e.getState();if(Qo(t)||Xo(t))i();else if(!Ho(o)&&Ho(t)){if(Qo(t))return;if(null==Jc(t))return;n(),setTimeout(i,1e3*ar(t))}o=t});return function(){r(),i()}},Vh=function(e){return function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return function(){for(var t=arguments.length,i=Array(t),o=0;o<t;o++)i[o]=arguments[o];return n.forEach(function(t){e.dispatch(t.apply(void 0,i))})}}},Fh=function(e,t){Oi[e]=function(){return t.apply(void 0,arguments)}},Uh=function(e){return function(){return fa(e.getState())}},Hh=function(e){return function(){return Ba(e.getState())}},Gh=function(e){return function(){return"mobile"===e.getState().page.platform}},Yh=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:la(e.getState());return!!Pa(e.getState()).find(function(e){return e.id===t})}},Qh=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:la(e.getState());return pa(e.getState())[t]?"online":"offline"}},Jh=function(e){return function(){return!!Oa(e.getState())}},Xh=function(e){return function(){return Vs(e.getState())}},Zh=function(e,t){return function(n){var i=n;return void 0===i&&(i=wl()[0]),Lc(t.getState(),e,i)}},$h=function(e){return function(){return Ha(e.getState())}},Kh=function(e){return{"livechat.siteId":Uh(e),"livechat.campaignIds":wl,"livechat.isDynamicCampaign":Hh(e),"livechat.isMobile":Gh(e),"livechat.button.isVisible":Yh(e),"livechat.button.status":Qh(e),"livechat.prechat.isSkip":Jh(e),"livechat.prechat.fields":Zh("prechat",e),"livechat.postChat.fields":Zh("postchat",e),"livechat.offlineMessage.fields":Zh("offline",e),"livechat.extendedWindow.isVisible":Xh(e),"livechat.extendedWindow.tabs":$h(e)}},em=function(e,t){return function(n,i){var o=i||wl()[0];e.dispatch(bf(t,n,o))}},tm=function(e){var t=Vh(e),n=t(ff);return{"livechat.customVariables":function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];ue(e,Array.prototype.reduce.call(t,function(e,t){var n=e;return void 0===t.value?n:(n[t.name]=""+t.value,n)},{}),!1)},"livechat.button.isVisible":function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:la(e.getState());n(t,i)},"livechat.prechat.isSkip":t(of),"livechat.prechat.fields":em(e,"prechat"),"livechat.postChat.fields":em(e,"postchat"),"livechat.offlineMessage.fields":em(e,"offline"),"livechat.extendedWindow.isVisible":t(eh),"livechat.extendedWindow.tabs":t(th)}},nm=function(e,t){return function(){return t.dispatch(Am(e,0,Lc(t.getState(),e,Ga(t.getState()))))}},im=function(e){var t=Vh(e),n=t(Kp),i=t(Zp),o=t(tf),r=t(bh),a=function(e){return t(P(pm,e))},s=function(t){return function(n){var i=O(e.getState());i&&n===i.id&&t(la(e.getState()))}},c=t(Yp,Jp);return{"livechat.button.click":function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:la(e.getState());return c(t)},"livechat.invitation.accept":s(t(Gp,Jp)),"livechat.invitation.refuse":s(t(Qp)),"livechat.prechat.minimize":n,"livechat.chat.minimize":n,"livechat.postChat.minimize":n,"livechat.offlineMessage.minimize":n,"livechat.prechat.restore":i,"livechat.chat.restore":i,"livechat.postChat.restore":i,"livechat.offlineMessage.restore":i,"livechat.prechat.close":o,"livechat.chat.close":o,"livechat.postChat.close":o,"livechat.offlineMessage.close":o,"livechat.chat.endChat":r,"livechat.prechat.field.focus":a("prechat"),"livechat.postChat.field.focus":a("postchat"),"livechat.offlineMessage.field.focus":a("offline"),"livechat.prechat.submit":nm("prechat",e),"livechat.postChat.submit":nm("postchat",e),"livechat.offlineMessage.submit":nm("offline",e),"livechat.extendedWindow.tabs.click":t(Kf)}},om={},rm=function(){return om},am={},sm=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];am[e]&&setTimeout(function(){am[e].forEach(function(e){try{e.apply(void 0,n)}catch(e){}})},0)},cm=function(e,t){return am[e]||(am[e]=[]),am[e].push(t),function(){am[e]=am[e].filter(function(e){return e!==t})}},dm=function(e){return function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];var r=e[t];if(r)return r.apply(void 0,i)}},lm=function(e){om={},am={},Oi.get=dm(Kh(e)),Oi.set=dm(tm(e)),Oi.do=dm(im(e)),Oi.render=function(e,t){om[e]=t},Oi.on=cm;var t=Vh(e),n=function(){};Fh("ban",t(zp)),Fh("end_chat",t(bh)),Fh("setIfSkipPrechat",t(of));var i=P(cm,"livechat.invitation.display");Fh("onBeforeImageInvitationDisplay",i),Fh("onAfterImageInvitationDisplay",i);var o=P(cm,"livechat.chat.display");Fh("onChatWindowLoadBegin",o),Fh("onChatWindowLoaded",o),Fh("setIfHideChatWindowLoadingAnimation",n),Fh("onChatWindowStatusChanged",n);var r=t(Yp,Jp);Fh("open_chat_window",function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:la(e.getState());return r(n)}),Fh("set_custom_variables",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return ue(e,Array.prototype.reduce.call(t,function(e,t){var n=e;return n[t.name]=""+t.value,n},{}),!1)}),Oi.setCustomVariables=Oi.set_custom_variables;var a=e.getState(),s=e.subscribe(function(){if(!Ho(a)){var t=e.getState();Ho(t)&&(s(),B()),a=t}});return function(){delete Oi.get,delete Oi.set,delete Oi.do,delete Oi.render,delete Oi.on,s()}},um=function(e,t,n){return{type:"form/update-value",payload:{id:t,value:n},meta:{formType:e}}},pm=function(e,t){return{type:"form/focus",payload:{id:t},meta:{formType:e}}},fm=function(e,t){return{type:"form/blur",payload:{id:t},meta:{formType:e}}},hm=function(e){return{type:"form/submit-start",payload:e,meta:{formType:e}}},mm=function(e){return{type:"form/submit-success",payload:e,meta:{formType:e}}},bm=function(e){return{type:"form/submit-fail",payload:e,meta:{formType:e}}},gm=function(e,t){return{type:"form/update",payload:e,meta:t}},wm=function(e){return{type:"form/reset",meta:e}},vm=function(e){return{type:"form/fill-default",payload:e}},ym=function(e,t){return{type:"form/submit-social",payload:t,meta:{formType:e}}},xm=function(e,t){return{type:"form/validate-all",payload:{ids:t},meta:{formType:e}}},_m=function(e,t){return function(n,i,o){return function(r){return new Promise(function(a,s){var c=o.filter(function(e){return""!==e.error});if(c.length>0){var d=c.map(function(e){return e.id});return r(xm(t,d)),void s(d)}var l=rl(o),u=tp(),p=u.popout;p&&p.ticketId&&!Number.isNaN(+p.ticketId)&&(l.ticketId=+p.ticketId),p&&p.departmentId&&!Number.isNaN(+p.departmentId)&&(l.department=+p.departmentId),r(hm(t)),sm(n+".submit",l),r(e(Xd(l),function(e){return new Promise(function(n){r(mm(t));var s=l;if(l.custom){var c=Object.keys(l.custom).reduce(function(e,t){var n=o.find(function(e){return e.id===+t}),i=e;return i[n.label]=l.custom[t],i},{});s=Object.assign({},l,{custom:c})}r(gm(s,t)),setTimeout(function(){r("offline"===t?Gf():wm(t)),n(e),a()},i)})}))})}}},Cm=_m(gh,"prechat"),km=_m(wh,"postchat"),Sm=_m(vh,"offline"),Am=function(e,t,n){return"prechat"===e?Cm("livechat.prechat",t,n):"postchat"===e?km("livechat.postChat",t,n):Sm("livechat.offlineMessage",t,n)},Tm=function(){var e=tp().popout;if(e){var t={};return e.ticketId&&(t.ticketId=e.ticketId),e.departmentId&&(t.department=e.departmentId),t}return{}},Im=function(e){var t=e.dispatch,n=e.getState;return function(e){return function(i){if(!n())return e(i);if(i.type===du&&md(n())<=0&&Yu({isBanned:!0}),"page/updateVisitor"===i.type){var o=i.payload,r=o.id,a=o.guid,s=o.standbyId;r>0&&ju(r,!0),s>0&&ju(s,!1),a&&Vu(a);if((r||s||0)<=0){var c=Gu(),d=c.firstVisitTime,l=c.visitTimes;Yu({firstVisitTime:d||(new Date).getTime(),visitTimes:(l||0)+1})}else Yu({firstVisitTime:void 0,visitTimes:void 0})}if("chatWindow/showTab"===i.type&&i.payload===ko){var u=void 0,p=yc(n(),Ga(n())),f=p.routeDepartment;f&&(u={department:f});var h=Gu();u=Object.assign({},h?h.form:{},u,Yo(n())?Tm():{}),Object.keys(u).length>0&&e(vm(u))}if("chatWindow/showTab"===i.type&&i.payload===To){var m=void 0,b=yc(n(),Ga(n())),g=b.routeDepartment;g&&(m={department:g}),Yo(n())&&(m=Object.assign({},m,Tm())),m&&e(vm(m))}if(i.type===au){var w=i.payload;if(w.isManual&&w.chat){var v=w.chat.guid,y=Ju(v),x=y.windowStatus,_=y.maxReadId;if(x){var C=e(Object.assign({},i,{payload:Object.assign({},i.payload,{windowStatus:x})}));return null!=_&&t(nh(_)),C}}}var k=n(),S=Es(k),A=e(i),T=n();if("form/update"===i.type&&"prechat"===i.meta){if(!Ya(T).isForgetPrechat){var I=Object.assign({},i.payload);delete I.department,delete I.ticketId,Yu({form:I})}}var R=Es(T),P=cs(T);if(!S&&R){var M=ha(T);M!==zo&&M!==Lo&&M!==qo||Xu(P,{windowStatus:M})}if(i.type===cu){var O=i.payload===Lo||i.payload===zo||i.payload===qo,E=wd(T);(R||E)&&O&&Xu(P,{windowStatus:i.payload})}if("window/toggleFocus"===i.type||i.type===cu||i.type===su||"window/resetMaxId"===i.type){var N=ms(k),W=ms(T);N!==W&&Xu(P,{maxReadId:W})}return A}}},Rm=function(){function e(){var e=Ii.createElement("div");this.addEventListener=function(t,n){e.addEventListener(t,n.bind(this))},this.removeEventListener=function(t,n){e.removeEventListener(t,n.bind(this))},this.dispatchEvent=function(t){if("string"==typeof t)try{e.dispatchEvent(new Event(t))}catch(i){var n=Ii.createEvent("Event");n.initEvent(t,!1,!0),e.dispatchEvent(n)}}}function t(){}function n(){var t=this;e.call(this);var n=a;Object.defineProperties(this,{close:{value:function(){var e=this;n===a&&(window.external.msSiteModeClearIconOverlay(),s.forEach(function(t){Ti.removeEventListener(t,e.close)}),this.dispatchEvent("click"),this.dispatchEvent("close"),n=null)}.bind(this)}}),this.close(),this.icon&&window.external.msSiteModeSetIconOverlay(c(this.icon),this.description||this.title),window.external.msSiteModeActivate(),this.dispatchEvent("show"),s.forEach(function(e){Ti.addEventListener(e,t.close)}),a+=1,n=a}function i(e,t){var n=e;if(!arguments.length)throw TypeError('Failed to construct "Notification": 1 argument required, but only 0 present.');if(""===n&&(n="\b"),arguments.length>1&&"object"!==(void 0===t?"undefined":Dt(t)))throw TypeError('Failed to construct "Notification": parameter 2 ("options") is not an object.');var i=Object(t),o=i.dir;if(void 0!==o&&-1===r.indexOf(o))throw TypeError('Failed to construct "Notification": The provided value "'+o+'" is not a valid enum value of type NotificationDirection.');var a=new d(n,i);return a.body||Object.defineProperty(a,"body",{value:String(i.body||"")}),a.data||Object.defineProperty(a,"data",{value:i.data||null}),a.dir||Object.defineProperty(a,"dir",{value:o||r[0]}),a.icon||Object.defineProperty(a,"icon",{value:String(i.icon||"")}),a.lang||Object.defineProperty(a,"lang",{value:String(i.lang||"")}),a.requireInteraction||Object.defineProperty(a,"requireInteraction",{value:Boolean(i.requireInteraction)}),a.silent||Object.defineProperty(a,"silent",{value:Boolean(i.silent)}),a.tag||Object.defineProperty(a,"tag",{value:String(i.tag||"")}),a.title||Object.defineProperty(a,"title",{value:String(n)}),a.timestamp||Object.defineProperty(a,"timestamp",{value:(new Date).getTime()}),a}var o=["granted","default","denied","notsupported"],r=["auto","ltr","rtl"],a=-1,s=["click","scroll","focus"],c=function(e){var t=e.lastIndexOf(".");return(-1!==t?e.substr(0,t):e)+".ico"},d=window.Notification||window.webkitNotifications&&t||"external"in window&&"msIsSiteMode"in window.external&&void 0!==window.external.msIsSiteMode()&&n||e;return Object.defineProperty(e,"permission",{enumerable:!0,get:function(){return"notsupported"}}),Object.defineProperty(e,"requestPermission",{enumerable:!0,writable:!0,value:function(e){e(this.permission)}}),Object.defineProperty(n,"permission",{enumerable:!0,get:function(){return window.external.msIsSiteMode()?"granted":"denied"}}),Object.defineProperty(n,"requestPermission",{enumerable:!0,writable:!0,value:function(){var e=this;return new Promise(function(t){t(e.permission)})}}),Object.defineProperty(n,"PERMISSION_REQUEST_MESSAGE",{writable:!0,value:"IE supports notifications in pinned mode only. Pin this page on your taskbar to receive notifications."}),Object.defineProperty(t,"permission",{enumerable:!0,get:function(){return o[window.webkitNotifications.checkPermission()]}}),Object.defineProperty(t,"requestPermission",{enumerable:!0,writable:!0,value:function(){return new Promise(function(e){window.webkitNotifications.requestPermission(function(t){e(t)})})}}),d.permission||Object.defineProperty(d,"permission",{enumerable:!0,get:function(){return d.permissionLevel&&d.permissionLevel()}}),Object.defineProperty(i,"permission",{enumerable:!0,get:function(){return d.permission}}),Object.defineProperty(i,"requestPermission",{enumerable:!0,value:function(){return new Promise(function(e,t){var n=d.requestPermission(function(t){e(t)});if(n)return"function"!=typeof n.then||"function"!=typeof n.catch?void t(n):void e(n)})}}),i}(),Pm=Rm.requestPermission,Mm=function(e,t){if("granted"===Rm.permission){var n=new Rm(Ri.host,{body:e,icon:t,tag:"comm100_notify"}),i=null;n.onclick=function(){Ti.focus(),n.close()},n.onshow=function(){i=setTimeout(function(){n.close(),i=null},5e3)},n.onclose=function(){i&&clearTimeout(i)}}},Om=function(){var e={},t=function(t){if(null==t)return Promise.reject("sound url is null");if(e[t])return Promise.resolve(e[t]);var n=new Promise(function(e,n){var i=new Audio(t);i.oncanplay=function(){i.oncanplay=null,e(i)},i.onerror=n});return e[t]=n,n};return{play:function(e,n){return t(e).then(function(e){return e.loop=n?"loop":"",e.play()})},stop:function(e){return t(e).then(function(e){e.loop=""})}}}(),Em=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=void 0,o=void 0,r=void 0,a=null,s=0,c=!1,d=function(){s=!1===n.leading?0:Date.now(),a=null,r=e.apply(i,o),Ji(r)&&(c=!0,r.then(function(){c=!1},function(){c=!1})),i=null,o=null};return function(){if(c)return r;for(var l=arguments.length,u=Array(l),p=0;p<l;p++)u[p]=arguments[p];o=u;var f=Date.now();s||!1!==n.leading||(s=f);var h=t-(f-s);return i=this,h<=0||h>t?(clearTimeout(a),a=null,s=f,r=e.apply(i,o),Ji(r)&&(c=!0,r.then(function(){c=!1},function(){c=!1})),o=null,i=null):a||!0!==n.trailing||(a=setTimeout(d,h)),r}}(Om.play,500),Nm=Xi(Mm,50),Wm=function(e){return function(t){return function(n){var i=e.getState();"chatWindow/popOut"!==n.type&&"chatWindow/popIn"!==n.type||Om.stop(pd(i,"video-request"));var o=t(n),r=e.getState();if(!Ho(r))return null;var a=Ls(r),s=ms(i);if("window/endchat"===n.type&&sm("livechat.chat.end"),n.type===su){var c=ja(i),d=ja(r);c!==d&&(d===bo?sm("livechat.chat.start",ds(r)):d===go&&sm("livechat.chat.end"));var l=0,u=0;n.payload.forEach(function(e){if(Kd(e)&&e.id&&!(e.id<=s)&&(nl(e.type)&&(u+=1),!Pd||"visitorAudioChatRequest"!==e.type&&"agentAudioChatRequest"!==e.type&&"visitorVideoChatRequest"!==e.type&&"agentVideoChatRequest"!==e.type?Em(nl(e.type)&&"visitorAudioChatAccept"!==e.type&&"visitorVideoChatAccept"!==e.type&&"agentAudioChatAccept"!==e.type&&"agentVideoChatAccept"!==e.type?pd(r,"video-end"):pd(r,"new-response")):l+=1,"agentAcceptChat"!==e.type&&a)){var t="string"==typeof e.content?e.content:e.content.text,n=Ko(r,"Images/logo60.png");Nm(t,n)}}),(l>0||u>0)&&(l>u?Om.play(pd(r,"video-request"),!0):Om.stop(pd(r,"video-request")))}if(a&&Ss(r)&&!Ss(i)&&Pm(),"page/setButtonIsOnline"===n.type){var p=n.payload.campaignId;if(_a(i,p)!==_a(r,p)){var f=yc(r,n.payload.campaignId),h=_a(r,p);sm(h?"livechat.button.online":"livechat.button.offline",f)}}if("window/updateQueue"===n.type){var m=rs(i),b=rs(r);b.position===m.position&&b.waitTime===m.waitTime||sm("livechat.chat.waitingQueue.update",b)}return o}}},Bm=(eu={},eu.prechat=function(e){e(yf(ko))},eu.chat=function(e,t,n){var i=n.chatId,o=n.chatGuid,r=n.serverTime;Es(t)||(e(qf(i,o,r)),e(Af()),e(yf(So)))},eu.chatbot=function(e,t,n){var i=n.chatId,o=n.chatGuid,r=n.serverTime;e(qf(i,o,r)),e(Tf()),e(yf(So))},eu.offline=function(e){e(yf(To))},eu.sso=function(e,t,n){e(xf(n.url,n.showPrelogin)),e(n.showPrelogin?yf(Co):yf("ssoLogin"))},eu),Dm=function(e,t,n){if("chat"===n.next||"chatbot"===n.next){var i=n.chatId,o=n.chatGuid;e(qf(i,o))}e(Fp(Ga(t),"offline"!==n.next)),(Bm[n.next]||function(){})(e,t,n)},zm={},jm=function(e){return function(t){return t.forEach(function(t){return zm[t.type](e,t)})}},qm=4342338,Lm="GET",Vm=P(ge,Lm),Fm=P(ge,"POST"),Um=function(e,t,n,i){var o=new FormData;return o.append("file",t),o.append("json",JSON.stringify(n)),Fm(e,o,i)},Hm="{email}",Gm="eventSendTranscript",Ym="eventRatingSubmitSuccess",Qm=0,Jm=new Date,Xm=function(){return 0===Qm||!(Qm>=3||M(Jm,2e4))},Zm=function(){Qm+=1},$m=function(){return Qm},Km=function(e,t,n){return Vm([e,"&action=4","&mainDisconnected="+(n?"1":"0"),"&visitorId="+t].join(""))},eb=function(e){return Vm(e+"&action=1").then(function(e){return"0"===e.output?"standby":"main"}).catch(function(){return"main"})},tb=function(e,t){return setInterval(function(){return Km(e,t,$m()>0)},6e4)},nb=hr,ib=function(e,t,n){var i=P(Ko,t),o=fa(t),r=yc(t,n).lastUpdateTime,a=function(e){return Ni(e,{sounds:e.sounds&&Object.keys(e.sounds).reduce(function(t,n){var o;return Ni(t,(o={},o[n]=i(e.sounds[n]),o))},{}),chatBot:e.chatBot&&Ni(e.chatBot,{avatar:i(e.chatBot.avatar)}),chat:e.chat&&Ni(e.chat,{texture:i(e.chat.texture)}),header:e.header&&Ni(e.header,{banner:e.header.banner&&i(e.header.banner),logo:e.header.logo&&i(e.header.logo)})})};return e(uf({id:n,entity:null,fetchStatus:"fetching"})),Vm(i("/campaign.ashx?siteId="+o+"&campaignId="+n+"&lastUpdateTime="+r)).then(function(t){var i=a(t.output);return e(uf({id:n,entity:i,error:null,fetchStatus:Ro})),i}).catch(function(t){throw e(uf({id:n,entity:null,error:t.error.message,fetchStatus:"error"})),t})},ob=function(){};ob.thatReturns=ve,ob.thatReturnsFalse=ve(!1),ob.thatReturnsTrue=ve(!0),ob.thatReturnsNull=ve(null),ob.thatReturnsThis=function(){return this},ob.thatReturnsArgument=function(e){return e};var rb=ob,ab=function(e){},sb=ye,cb="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",db=function(){function e(e,t,n,i,o,r){r!==cb&&sb(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t};return n.checkPropTypes=rb,n.PropTypes=n,n},lb=e(function(e){e.exports=db()}),ub=lb.arrayOf,pb=lb.oneOfType,fb=lb.objectOf,hb=lb.string,mb=lb.bool,bb=lb.func,gb=lb.number,wb=lb.oneOf,vb=lb.element,yb=lb.shape,xb=(lb.checkPropTypes,lb.instanceOf),_b=function(e){function t(){return zt(this,t),Vt(this,e.apply(this,arguments))}return qt(t,e),t.prototype.getChildContext=function(){return this.props.context},t.prototype.render=function(){return this.props.children[0]},t}(I),Cb=function(e,t){return{unmount:function(){for(var e=0;e<t.children.length;e+=1)t.removeChild(t.children[e])},render:function(i,o){var r=void 0;r=Array.isArray(i)?1===i.length?i[0]:n("div",null,i):i,R(n(_b,{context:e.context},r),t,t.children[0]),"function"==typeof o&&o()}}},kb=function(e,t){return"string"==typeof t?e[t]:t.reduce(function(e,t){return void 0===e?e:e[t]},e)},Sb=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return n.some(function(n){var o=!1,r=kb(e[t],n),a=kb(i,n);a instanceof Date&&r instanceof Date?o=JSON.stringify(a)!==JSON.stringify(r):a!==r&&(o=!0);return o})},Ab=function(e){var t=e.split(".");return 1===t.length?e:t},Tb=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=t.map(Ab),o=n.map(Ab);return function(t,n){var r=Sb(e,"props",i,t)||Sb(e,"state",o,n);return r}},Ib=function(e,t){var n=e.contentDocument;return n.open(),n.write(t),n.close(),n.getElementById("container")},Rb=function(e,t,n){var i=e.contentDocument;if(i){var o=i.head,r=o.querySelector("style#"+t);r||(r=i.createElement("style"),r.id=t,o.appendChild(r)),r.innerHTML=n}},Pb=function(e,t,n){var i=[].concat(t),o=n?[].concat(n):[];i.forEach(function(t,n){t&&t!==o[n]&&Rb(e,"id-"+n,i[n])})},Mb=function(e){no&&e.addEventListener("selectionchange",function(){var t=e.activeElement;if(t&&("TEXTAREA"===t.tagName||"INPUT"===t.tagName&&"text"===t.type)){var n=e.createEvent("CustomEvent");n.initCustomEvent("input",!0,!0,{}),t.dispatchEvent(n)}})},Ob=function(e){function t(){return zt(this,t),Vt(this,e.apply(this,arguments))}return qt(t,e),t.prototype.componentDidMount=function(){var e=this;this.container=Ib(this.iframe,'<!doctype html><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /></head><body><div id="container"></div></body>');var t=Cb(this,this.container),n=t.render,i=t.unmount,o=Tb(this,["style","innerCss","className"]);this.shouldComponentUpdate=function(t){var i=o(t);return i||n(t.children,function(){return t.callback&&t.callback(e.iframe)}),i},this.componentDidUpdate=function(t){n(e.props.children,function(){return e.props.callback&&e.props.callback(e.iframe)}),t.innerCss!==e.props.innerCss&&e.iframe&&Pb(e.iframe,e.props.innerCss,t.innerCss)},this.componentWillUnmount=i,n(this.props.children),Pb(this.iframe,this.props.innerCss),this.props.onMounted&&this.props.onMounted(this.iframe),this.props.callback&&this.props.callback(this.iframe),Mb(this.iframe.contentDocument)},t.prototype.render=function(){var e=this,t=this.props,i=(t.children,t.innerCss,Lt(t,["children","innerCss"]));return n("iframe",jt({allowFullScreen:"1"},i,{ref:function(t){e.iframe=t}}))},t}(I);Ob.propTypes={innerCss:pb([hb.isRequired,ub(hb).isRequired]).isRequired,children:ub(vb).isRequired,onMounted:bb,callback:bb};var Eb=function(e){var t=e.split(/\/|\\/);return t[t.length-1]},Nb=void 0,Wb=function(e){var t=Date.now().toString();return n(Ob,{id:t,src:"about:blank",style:e.style,frameborder:0,scrolling:"no",innerCss:"body{margin:0;padding:0}",onMounted:function(e){Nb=e.ownerDocument}},n("form",{id:"form",method:"post",encType:"multipart/form-data",encoding:"multipart/form-data"},n("input",{ref:function(t){e.onMounted&&e.onMounted(t)},type:"file",name:"file",onChange:function(n){e.onChange&&e.onChange({formId:t,name:Eb(n.target.value)})},onBlur:e.onBlur,onFocus:e.onFocus})))};Wb.propTypes={onMounted:bb,onChange:bb,onBlur:bb,onFocus:bb};var Bb,Db,zb,jb=function(e,t){R(n(Wb,t),e)},qb=hr,Lb=0,Vb=[],Fb={},Ub={},Hb=null,Gb=function(e,t,n){if(null==t.type)throw new Error("action.type is required");return t.type===qb.uploadFileAction?new Promise(function(i,o){(t.file.formId?xe:Um)(e+"&file=1",t.file,t.action,n).then(function(e){var n=e.output;n[0].error&&o({input:t.action,error:n[0].error}),i({input:t.action,output:n[0]})}).catch(function(e){if(e instanceof Error)throw e;o({input:t.action,error:e.error})})}):new Promise(function(n,i){null==Hb&&(Hb=Gd());var o=Hb();Vb.push(Object.assign({},t,{id:o})),Fb[o]=n,Ub[o]=i,clearTimeout(Lb),Lb=setTimeout(function(){Fm(e,Vb.splice(0,Vb.length)).then(function(e){var t=e.input,n=e.output;t.forEach(function(e,t){n[t].error?Ub[e.id]({input:e,error:n[t].error}):Fb[e.id]({input:e,output:n[t]}),delete Fb[e.id],delete Ub[e.id]})}).catch(function(e){if(e instanceof Error)throw e;var t=e.input,n=e.error;t.forEach(function(e){Ub[e.id]({input:e,error:n}),delete Fb[e.id],delete Ub[e.id]})})},0)})},Yb=hr,Qb=function(e){var t=e.getState,n=function(){return new Promise(function(e){var n=setInterval(function(){return Gb(hd(t()),ta()).then(function(t){t.output.payload&&(clearInterval(n),e(t))})},2e3)})},i=function(e,t){return Ni(e,{output:Kr(function(e){return e.type===Yb.requestChat?Ni(e,t):e},e.output)})},o=function(e){return n().then(function(t){var n=t.output;return i(e,n)})};return function(e){var t=$r(e.output,Yb.requestChat);return t&&"systemProcessing"===t.payload.next?o(e):e}},Jb=function(e){var t=e.dispatch,n=e.getState;return function(e){
throw 1004===e.error.code&&Gb(hd(n()),ea(md(n()))).catch(function(e){var n=e.error.code;throw 1024!==n&&1032!==n||t(zp()),e}),e}},Xb=function(e){var t=e.getState,n=e.dispatch;return function(e){var i=e.error.code;if(-1!==[314,1004,1036].indexOf(i))n(Wf(Cd(t(),"errorVisitorNotExist"))),n(Vp(!1));else if(1024===i||1032===i)n(zp());else if(7601===i)e.error.message&&n(Wf(e.error.message));else if(4342339===i)n(Wf("Oops.We're getting problems to the chatbot. Please refresh this page to chat with a live agent.")),n(Vp(!1));else if(1037===i)n(Wf(e.error.message)),n(Vp(!1));else if(i!==qm){var o=Cd(t(),"promptServerException");o&&n(Wf(o.replace("{errorCode}",i)))}throw e}},Zb=hr,$b=!1,Kb=function(e){return 1004===e||1036===e},eg=function(e){var t=e.getState;return function(e){return nr(t())?($b&&$r(e.output,Zb.getChatMessages)&&($b=!1),e):e}},tg=function(e,t){var n=e.dispatch,i=e.getState,o=function(e){return eb(fd(i())).then(function(o){if(o!==$o(i()))return n(jp(o)),!Go(i())&&Ns(i())?Promise.reject({input:e.input,error:{code:4342339}}):(!Go(i())&&Ws(i())&&n(lh()),Es(i())?($b=!0,null):$r(e.input,Zb.getConfig)?t(e.input):n(_h()).then(function(){return $r(e.input,Zb.sendFile)?Promise.reject({input:e.input,error:{code:qm}}):t(e.input)}));if(314===e.error.code)return null;throw e})};return function(e){if(!nr(i()))throw e;ha(i())===Fo&&($b=!1);var t=e.error;if(Kb(t.code)&&$b)return null;if(314===e.error.code)return o(e);if(t.code===qm){if(Go(i())&&$r(e.input,Zb.getConfig))return o(e);if(Zm(),Km(fd(i()),ba(i()),!0),!Xm())return o(e)}throw e}},ng=function(e){return[ea(md(e)),br(la(e),md(e),Ii.referrer,ga(e),Ad(),Md(),Pd,Gu())]},ig=function(e){var t=la(e),n=ba(e),i=!Yo(e)&&!$u(ba(e)).isEmbeddedPoppedOut,o=Xc(e);return Xr([].concat(n?[]:ng(e),[o&&vr(o,t),0!==t||o?null:oa(),gr(t,ga(e)),Tr(t),xr(t),i?na():null,kr(t),_r(t)]))},og=function(e,t){var n=wa(e,Ba(e)?0:t),i=n.source;return Object.assign({},n,{isPrechatDone:"manualInvitation"===i.type||"button"!==i.type&&n.invitationtype===Ic})},rg=function(e){var t=[];return gc(e)<3&&t.push(Jr()),ir(e)&&t.push(Qr()),t},ag=hr,sg=function(e,t,n,i){var o=e.getState,r=e.dispatch;return function(e){var a=e.input;if(1004===e.error.code&&!$r(a,ag.newVisitor)&&($r(a,ag.pageVisit)||$r(a,ag.requestChat)))return r(Vp(!0)),t(Xr(ng(o()).concat(a.actions)),n,i);throw e}},cg=function(e){return Fr(cs(e),ps(e))},dg=ci(1)(function(e,t){var n,i;if(null==e)return[];for(var o=[],r=(n={},n.audioIncoming="visitorAudioChatRefuse",n.audioChatting="visitorAudioChatStop",n.audioRequesting="visitorAudioChatCancelRequest",n.videoIncoming="visitorVideoChatRefuse",n.videoChatting="visitorVideoChatStop",n.videoRequesting="visitorVideoChatCancelRequest",n),a=(i={},i.visitorText="visitorAddTextMessage",i.creditCardMasked="visitorCreditCardMasked",i.pendingAudioRequesting="visitorAudioChatRequest",i.pendingVideoRequesting="visitorVideoChatRequest",i.pendingSubmitSecureForm="visitorSubmitSecureForm",i.pendingCancelSecureForm="visitorCancelSecureForm",i.pendingGetSecureFormFailure="visitorGetSecureFormFailure",i),s=e.length-1;s>=0;s-=1){var c=e[s],d=void 0;if("pendingAccept"===c.type||"pendingHangup"===c.type){var l=c.content;"pendingAccept"===c.type&&(d="audioIncoming"===l?"visitorAudioChatAccept":"visitorVideoChatAccept"),"pendingHangup"===c.type&&(d=r[l])}else d=a[c.type];d&&o.push(Ni(c,{id:t+s+1,type:d}))}return o.reverse()}),lg=function(e){var t=ps(e),n=cs(e),i=os(e),o=dg(i,t),r=[].concat(o);if(ls(e)){var a=us(e);r.push({type:"visitorTyping",time:new Date,content:a,sender:{type:"visitor"},id:i.length+t+1})}return[0===r.length?null:Hr(n,r),Fr(n,t)]},ug=(Bb={},Bb["chatWindow/open"]=function(e,t){var n=Oa(t),i=void 0;if(n){var o=Lc(t,"prechat",e);if(!o.some(function(e){return""!==e.error})){var r=tp(),a=r.popout;a&&a.ticketId&&!Number.isNaN(+a.ticketId)&&(i.ticketId=+a.ticketId),a&&a.departmentId&&!Number.isNaN(+a.departmentId)&&(i.department=+a.departmentId),i=Xd(rl(o))}}return Xr([yd(t)?ia():null,sa(),i?Rr(i,e):null,Object.assign(og(t,e),i?{isPrechatDone:!0}:{}),Ba(t)?ra():null,Jc(t)?ca():null].concat(rg(t),[Fr(null,-1)]))},Bb["invitaton/refuse"]=function(e,t){var n=la(t),i=Dc(t);return Sr(n,i.isManual,i.id)},Bb["web/prechatHeartbeat"]=function(e,t){return Xo(t)?null:Pr()},Bb["web/offlineHeartbeat"]=function(e,t){return Xo(t)?null:Mr()},Bb["web/chatHeartbeat"]=function(e,t){if(Xo(t))return null;if(!Da(t))return null;var n=ja(t);if(n===mo){var i=ya(t);if("autoInvitation"===i)return aa();if("manualInvitation"===i)return Xr([Er(cs(t)),cg(t)])}var o=[];return n===ho&&o.push(Ur(cs(t))),Xr(o.concat(lg(t)))},Bb[cu]=function(e,t){if(e!==Fo)return null;if(Xo(t))return null;var n=Ua(t),i=ja(t),o=Ga(t);if(n===ko||n===To)return Lr();if(n===So){if(i===mo){var r=wa(t,o).source,a=r.type,s=r.invitationId;return sm("livechat.invitation.refuse",s),Sr(o,"manualInvitation"===a,s)}if(i===ho)return Xr([Vr(cs(t)),cg(t)])}return null},Bb["form/submit-social"]=function(e,t){return Xr([jr(e),Ni(wa(t,Ga(t)),{isPrechatDone:!0})])},Bb["web/submitSSOInfo"]=function(e,t){return Xr([Ir(e,Ga(t)),wa(t,Ga(t))])},Bb[au]=function(e,t){return Xr([e.isManual?Ar(e.id):null].concat(rg(t)))},Bb["web/skipLogin"]=function(e,t){var n=wa(t,Ga(t));return Ni(n,{skipSSO:!0})},Bb["web/startChatAgain"]=function(e,t){return qr(Ba(t)?0:Ga(t),{type:"button",page:ga(t)})},Bb["web/fromChatbotToAgent"]=function(e,t){var n=Ds(t);return Ns(t)&&!n?Object.assign({},wa(t,Ga(t)),{isFromChatbot:!0}):null},Bb["web/submitRating"]=function(e,t){var n=ds(t);return Dr(n,e)},Bb["web/emailTranscript"]=function(e){return zr(e)},Bb["web/sendAction"]=function(e){return e},Bb["web/endChat"]=function(e,t){return Xr([Vr(cs(t)),cg(t)])},Bb["web/chatBotAnswerHelpful"]=function(e,t){return Ns(t)?Gr(e.ifHelpful,e.actionGuid):null},Bb["web/chatBotSelectQuestion"]=function(e,t){return Ns(t)?Yr(e):null},Bb["chatWindow/showTab"]=function(e){return e===To?Or():null},Bb["web/updateCustomVariables"]=function(e,t){var n=Ba(t)?0:la(t);return Xr([vr(e,n),Ba(t)?ra():null,xr(n),_r(n)])},Bb["window/closeMinimizeBubble"]=function(e,t){return wd(t)?(sm("livechat.invitation.refuse"),Sr(Ga(t),!0)):null},Bb["web/getChatButton"]=function(e){return Xr([Tr(e),xr(e)])},Bb["web/sendPageVisit"]=function(e,t){return ig(t)},Bb["web/getConfig"]=function(){return wr()},Bb["web/getChatWindowConfig"]=function(){return sa()},Bb),pg=(Db={},Db["window/sendText"]=function(e,t){if(ja(t)===mo){wd(t)?sm("livechat.invitation.accept"):sm("livechat.invitation.accept",xa(t));var n=wa(t,Ga(t));return Xr([Ni(n,{isPrechatDone:!0})].concat(lg(t)))}return Xr(lg(t))},Db),fg=function(e){return function(t){if(t instanceof Error)throw t;return e(t)}},hg=function(e){var t=e.getState;return null==t()?function(e){return function(t){return e(t)}}:function(n){var i=function n(i,o){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return Promise.resolve(e)};return Gb(hd(t()),i,o).then(eg(e)).then(Qb(e)).then(r).then(function(t){return we(e,t,n),t}).catch(fg(tg(e,n))).catch(fg(sg(e,n,o,r))).catch(fg(Xb(e))).catch(fg(Jb(e)))},o=function(e,t,o){return i(t,null,o).catch(function(t){throw n(bm(e)),n(Wf(t.error.message)),t})};return function(e){var r=ug[e.type];if(r){var a=r(e.payload,t());if(a){var s=i(a);if("web/getConfig"===e.type||"web/sendPageVisit"===e.type||"web/prechatHeartbeat"===e.type||"web/getChatButton"===e.type||"web/getChatWindowConfig"===e.type)return s;if(e.type===cu&&e.payload===Fo&&Yo(t()))return s}return n(e)}if("web/pageHeartbeat"===e.type)return Xo(t())?null:(i(kr(la(t()))),ma(t()).forEach(function(e){return i(yr(+e))}),null);if("window/sendFile"===e.type){var c=e.payload;if(!c)return null;if(_s(t()))return null;var d=dr(t()),l=zs(t()),u=lr(t());return l>=u?(n(Lf("maxFileCount",{fileCount:u})),Promise.resolve()):c.size>d*Math.pow(2,20)?(n(Lf("maxFileSize",{fileSize:d})),Promise.resolve()):0===c.size?(n(Lf("emptyFile")),Promise.resolve()):(n(e),i(Wr(c),function(e,t){return n(gf(c.name,e,t))}).then(function(){return n(wf())}).catch(fg(function(e){var t=e.error;return n(vf(t))})).catch(function(e){return n(vf({message:e.message}))}))}if("web/submitPrechat"===e.type){var p=e.payload,f=p.form,h=p.onSuccess,m=wa(t(),Ga(t())),b=Ni(m,{ticketId:f.ticketId||m.ticketId,departmentId:null==f.department?m.departmentId:void 0,isPrechatDone:!0,skipSSO:!0});o("prechat",Xr([Rr(f,Ga(t())),b]),h)}else if("web/submitOfflineMessage"===e.type){var g=Ga(t()),w=e.payload,v=w.form,y=w.onSuccess,x=ds(t()),_=Ni(va(t()),x&&{chatId:x});o("offline",Nr(g,v,_),y)}else if("web/submitPostChat"===e.type){var C=ds(t()),k=e.payload,S=k.form,A=k.onSuccess;o("postchat",Br(C,S,Ga(t())),A).then(function(){return n(yf(So))})}var T=n(e),I=pg[e.type];if(I){var R=I(e.payload,t());R&&i(R)}return T}}},mg=function(e){var t=e.isNewWindow,n=e.url,i=Hd(n);t?Ti.open(i):Ri.href=i},bg=function(e){var t=e.dispatch,n=e.getState;return function(e){return function(i){var o=n();if("chatWindow/open"===i.type&&!_a(o,i.payload)){var r=_c(o,i.payload);if(r)return mg(r),null}if("chatWindow/showTab"===i.type&&i.payload===To){var a=Ga(o),s=_c(o,a);if(s)return mg(s),t(rh()),t(ph()),null}return e(i)}}},gg=(zb={},zb.loading="titleChatWindow",zb[Co]="titlePreChatWindow",zb[ko]="titlePreChatWindow",zb[To]="titleOfflineMessageWindow",zb[So]="titleChatWindow",zb[Ao]="titleChatWindow",zb.ssoLogin="titlePreChatWindow",zb),wg=function(e){null!=e&&(Ii.title=e)},vg=function(){try{var e=Ii.getElementById("chat_window_container");if(!e)return null;var t=e.contentWindow.document,n=t.querySelector(".whole-window").getBoundingClientRect();return{width:n.width,height:n.height}}catch(e){return null}},yg=function(e,t){var n=Sc(e,t);return n?vg()||n:{width:380,height:600}},xg=function(e,t){var n=fa(e),i=ua(e),o=ga(e),r=o.title,a=o.url,s=bd(e),c=gd(e),d=ba(e),l=xa(e),u=ya(e)||"button",p=Ko(e,["chatWindow.aspx","?siteId="+n,i?"&chatGroup="+i:null,"&planId="+t,"#","&chatSource="+u,l?"&invitationId="+l:null,s?"&visitorId="+s:null,c?"&standbyVisitorId="+c:null,d?"&visitorGuid="+d:null,Go(e)?null:"&isStandbyServer=1",r?"&title="+encodeURIComponent(r):null,a?"&url="+encodeURIComponent(a):null].join("")),f=yg(e,t),h=f.width,m=f.height;return{win:Ti.open(p,"Comm100ChatWindow"+n,"width="+h+",height="+m+",left=200,top=100,status=no,toolbar=no,menubar=no,resizable=yes,location=no,titlebar=no"),url:p}},_g=!1,Cg=function(){Ti.opener&&(Ti.opener=null),_g=!0,Ti.close()},kg=function(e){var t=e.getState;return function(e){var n=null,i=function(e){return function(t){return e(JSON.parse(t.data))}},o=function(o){var r=o.win,a=o.url;if(!n){n=_e(r,a,!0);var s=n.subscribe(i(function(i){"popin"===i.type&&(s(),n=null,Ti.focus(),e(Jp(i.payload)),e($p()),Ku({isEmbeddedPoppedOut:!1},ba(t())))}))}},r=function(e){n&&n.dispatch({type:"popin",payload:e})};return Ti.addEventListener("beforeunload",function(){var e=t();Yo(e)&&Cc(e,la(e))&&!_g&&r(la(e))}),function(a){var s=t();if(!s)return e(a);if("app/ready"===a.type&&null==n&&xd(s)){var c=ga(s).url||Ii.referrer;n=_e(Ti.opener,c);var d=n.subscribe(i(function(t){"removeOpener"===t.type&&(d(),Ti.opener=null,e(Lp()))}))}if("chatWindow/showTab"===a.type&&Yo(s)&&wg(Cd(s,gg[a.payload])),"window/mounted"===a.type&&Yo(s)){var l=Ua(s);wg(Cd(s,gg[l]))}if("chatWindow/open"===a.type){var u=a.payload,p=$u(ba(s))||{},f=p.isEmbeddedPoppedOut,h=Cc(s,u);if(!Yo(s)&&(f||!h)){var m=xg(s,u);return f&&o(m),null}}if("chatWindow/popOut"===a.type){var b=Ga(s);!Yo(s)&&Cc(s,b)&&(o(xg(s,b)),Ku({isEmbeddedPoppedOut:!0},ba(s)),n&&Ti.addEventListener("beforeunload",function(){n.dispatch({type:"removeOpener"})}))}if("chatWindow/popIn"===a.type&&Yo(s))return r(Ga(s)),Cg(),null;if(("window/closeSliently"===a.type||a.type===cu&&a.payload===Fo)&&Yo(s)){var g=e(a);return g&&g.catch?(Promise.race([g.catch(function(){}),zi(3e3)]).then(Cg),null):(Cg(),null)}return e(a)}}},Sg=!0,Ag=!0,Tg={disableLog:function(e){return"boolean"!=typeof e?new Error("Argument type: "+(void 0===e?"undefined":Dt(e))+". Please use a boolean."):(Sg=e,e?"adapter.js logging disabled":"adapter.js logging enabled")},disableWarnings:function(e){return"boolean"!=typeof e?new Error("Argument type: "+(void 0===e?"undefined":Dt(e))+". Please use a boolean."):(Ag=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))},log:function(){"undefined"==typeof window||Dt(window)},deprecated:function(e,t){},extractVersion:function(e,t,n){var i=e.match(t);return i&&i.length>=n&&parseInt(i[n],10)},detectBrowser:function(e){var t=e&&e.navigator,n={};if(n.browser=null,n.version=null,void 0===e||!e.navigator)return n.browser="Not a browser.",n;if(t.mozGetUserMedia)n.browser="firefox",n.version=this.extractVersion(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia)if(e.webkitRTCPeerConnection)n.browser="chrome",n.version=this.extractVersion(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!t.userAgent.match(/Version\/(\d+).(\d+)/))return n.browser="Unsupported webkit-based browser with GUM support but no WebRTC support.",n;n.browser="safari",n.version=this.extractVersion(t.userAgent,/AppleWebKit\/(\d+)\./,1)}else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))n.browser="edge",n.version=this.extractVersion(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!t.mediaDevices||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return n.browser="Not a supported browser.",n;n.browser="safari",n.version=this.extractVersion(t.userAgent,/AppleWebKit\/(\d+)\./,1)}return n},shimCreateObjectURL:function(e){var t=e&&e.URL;if("object"===(void 0===e?"undefined":Dt(e))&&e.HTMLMediaElement&&"srcObject"in e.HTMLMediaElement.prototype){var n=t.createObjectURL.bind(t),i=t.revokeObjectURL.bind(t),o=new Map,r=0;t.createObjectURL=function(e){if("getTracks"in e){var t="polyblob:"+ ++r;return o.set(t,e),Tg.deprecated("URL.createObjectURL(stream)","elem.srcObject = stream"),t}return n(e)},t.revokeObjectURL=function(e){i(e),o.delete(e)};var a=Object.getOwnPropertyDescriptor(e.HTMLMediaElement.prototype,"src");Object.defineProperty(e.HTMLMediaElement.prototype,"src",{get:function(){return a.get.apply(this)},set:function(e){return this.srcObject=o.get(e)||null,a.set.apply(this,[e])}});var s=e.HTMLMediaElement.prototype.setAttribute;e.HTMLMediaElement.prototype.setAttribute=function(){return 2===arguments.length&&"src"===(""+arguments[0]).toLowerCase()&&(this.srcObject=o.get(arguments[1])||null),s.apply(this,arguments)}}}},Ig={log:Tg.log,deprecated:Tg.deprecated,disableLog:Tg.disableLog,disableWarnings:Tg.disableWarnings,extractVersion:Tg.extractVersion,shimCreateObjectURL:Tg.shimCreateObjectURL,detectBrowser:Tg.detectBrowser.bind(Tg)},Rg=Ig.log,Pg=function(e){var t=Ig.detectBrowser(e),n=e&&e.navigator,i=function(e){if("object"!==(void 0===e?"undefined":Dt(e))||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var i="object"===Dt(e[n])?e[n]:{ideal:e[n]};void 0!==i.exact&&"number"==typeof i.exact&&(i.min=i.max=i.exact);var o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==i.ideal){t.optional=t.optional||[];var r={};"number"==typeof i.ideal?(r[o("min",n)]=i.ideal,t.optional.push(r),r={},r[o("max",n)]=i.ideal,t.optional.push(r)):(r[o("",n)]=i.ideal,t.optional.push(r))}void 0!==i.exact&&"number"!=typeof i.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",n)]=i.exact):["min","max"].forEach(function(e){void 0!==i[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,n)]=i[e])})}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},o=function(e,o){if((e=JSON.parse(JSON.stringify(e)))&&"object"===Dt(e.audio)){var r=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};e=JSON.parse(JSON.stringify(e)),r(e.audio,"autoGainControl","googAutoGainControl"),r(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=i(e.audio)}if(e&&"object"===Dt(e.video)){var a=e.video.facingMode;a=a&&("object"===(void 0===a?"undefined":Dt(a))?a:{ideal:a});var s=t.version<61;if(a&&("user"===a.exact||"environment"===a.exact||"user"===a.ideal||"environment"===a.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||s)){delete e.video.facingMode;var c;if("environment"===a.exact||"environment"===a.ideal?c=["back","rear"]:"user"!==a.exact&&"user"!==a.ideal||(c=["front"]),c)return n.mediaDevices.enumerateDevices().then(function(t){t=t.filter(function(e){return"videoinput"===e.kind});var n=t.find(function(e){return c.some(function(t){return-1!==e.label.toLowerCase().indexOf(t)})});return!n&&t.length&&-1!==c.indexOf("back")&&(n=t[t.length-1]),n&&(e.video.deviceId=a.exact?{exact:n.deviceId}:{ideal:n.deviceId}),e.video=i(e.video),Rg("chrome: "+JSON.stringify(e)),o(e)})}e.video=i(e.video)}return Rg("chrome: "+JSON.stringify(e)),o(e)},r=function(e){return{name:{PermissionDeniedError:"NotAllowedError",InvalidStateError:"NotReadableError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotReadableError",MediaDeviceKillSwitchOn:"NotReadableError"}[e.name]||e.name,message:e.message,constraint:e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},a=function(e,t,i){o(e,function(e){n.webkitGetUserMedia(e,t,function(e){i(r(e))})})};n.getUserMedia=a;var s=function(e){return new Promise(function(t,i){n.getUserMedia(e,t,i)})};if(n.mediaDevices||(n.mediaDevices={getUserMedia:s,enumerateDevices:function(){return new Promise(function(t){var n={audio:"audioinput",video:"videoinput"};return e.MediaStreamTrack.getSources(function(e){t(e.map(function(e){return{label:e.label,kind:n[e.kind],deviceId:e.id,groupId:""}}))})})},getSupportedConstraints:function(){return{deviceId:!0,echoCancellation:!0,facingMode:!0,frameRate:!0,height:!0,width:!0}}}),n.mediaDevices.getUserMedia){var c=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(e){return o(e,function(e){return c(e).then(function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach(function(e){e.stop()}),new DOMException("","NotFoundError");return t},function(e){return Promise.reject(r(e))})})}}else n.mediaDevices.getUserMedia=function(e){return s(e)};void 0===n.mediaDevices.addEventListener&&(n.mediaDevices.addEventListener=function(){Rg("Dummy mediaDevices.addEventListener called.")}),void 0===n.mediaDevices.removeEventListener&&(n.mediaDevices.removeEventListener=function(){Rg("Dummy mediaDevices.removeEventListener called.")})},Mg=Ig.log,Og={shimMediaStream:function(e){e.MediaStream=e.MediaStream||e.webkitMediaStream},shimOnTrack:function(e){if("object"===(void 0===e?"undefined":Dt(e))&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return n._ontrackpoly||(n._ontrackpoly=function(t){t.stream.addEventListener("addtrack",function(i){var o;o=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find(function(e){return e.track&&e.track.id===i.track.id}):{track:i.track};var r=new Event("track");r.track=i.track,r.receiver=o,r.streams=[t.stream],n.dispatchEvent(r)}),t.stream.getTracks().forEach(function(i){var o;o=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find(function(e){return e.track&&e.track.id===i.id}):{track:i};var r=new Event("track");r.track=i,r.receiver=o,r.streams=[t.stream],n.dispatchEvent(r)})},n.addEventListener("addstream",n._ontrackpoly)),t.apply(n,arguments)}}},shimGetSendersWithDtmf:function(e){if("object"===(void 0===e?"undefined":Dt(e))&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,i){var o=this,r=n.apply(o,arguments);return r||(r=t(o,e),o._senders.push(r)),r};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;i.apply(t,arguments);var n=t._senders.indexOf(e);-1!==n&&t._senders.splice(n,1)}}var o=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;n._senders=n._senders||[],o.apply(n,[e]),e.getTracks().forEach(function(e){n._senders.push(t(n,e))})};var r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;t._senders=t._senders||[],r.apply(t,[t._streams[e.id]||e]),e.getTracks().forEach(function(e){var n=t._senders.find(function(t){return t.track===e});n&&t._senders.splice(t._senders.indexOf(n),1)})}}else if("object"===(void 0===e?"undefined":Dt(e))&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var a=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=a.apply(e,[]);return t.forEach(function(t){t._pc=e}),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}},shimSourceObject:function(e){var t=e&&e.URL;"object"===(void 0===e?"undefined":Dt(e))&&(!e.HTMLMediaElement||"srcObject"in e.HTMLMediaElement.prototype||Object.defineProperty(e.HTMLMediaElement.prototype,"srcObject",{get:function(){return this._srcObject},set:function(e){var n=this;if(this._srcObject=e,this.src&&t.revokeObjectURL(this.src),!e)return void(this.src="");this.src=t.createObjectURL(e),e.addEventListener("addtrack",function(){n.src&&t.revokeObjectURL(n.src),n.src=t.createObjectURL(e)}),e.addEventListener("removetrack",function(){n.src&&t.revokeObjectURL(n.src),n.src=t.createObjectURL(e)})}}))},shimAddTrackRemoveTrack:function(e){if(!e.RTCPeerConnection.prototype.addTrack){var t=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,n=t.apply(this);return e._reverseStreams=e._reverseStreams||{},n.map(function(t){return e._reverseStreams[t.id]})};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var i=this;if(i._streams=i._streams||{},i._reverseStreams=i._reverseStreams||{},t.getTracks().forEach(function(e){if(i.getSenders().find(function(t){return t.track===e}))throw new DOMException("Track already exists.","InvalidAccessError")}),!i._reverseStreams[t.id]){var o=new e.MediaStream(t.getTracks());i._streams[t.id]=o,i._reverseStreams[o.id]=t,t=o}n.apply(i,[t])};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;t._streams=t._streams||{},t._reverseStreams=t._reverseStreams||{},i.apply(t,[t._streams[e.id]||e]),delete t._reverseStreams[t._streams[e.id]?t._streams[e.id].id:e.id],delete t._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){var i=this;if("closed"===i.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var o=[].slice.call(arguments,1);if(1!==o.length||!o[0].getTracks().find(function(e){return e===t}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(i.getSenders().find(function(e){return e.track===t}))throw new DOMException("Track already exists.","InvalidAccessError");i._streams=i._streams||{},i._reverseStreams=i._reverseStreams||{};var r=i._streams[n.id];if(r)r.addTrack(t),i.dispatchEvent(new Event("negotiationneeded"));else{var a=new e.MediaStream([t]);i._streams[n.id]=a,i._reverseStreams[a.id]=n,i.addStream(a)}return i.getSenders().find(function(e){return e.track===t})},e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;if("closed"===t.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==t)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");t._streams=t._streams||{};var n;Object.keys(t._streams).forEach(function(i){t._streams[i].getTracks().find(function(t){return e.track===t})&&(n=t._streams[i])}),n&&(1===n.getTracks().length?t.removeStream(n):n.removeTrack(e.track),t.dispatchEvent(new Event("negotiationneeded")))}}},shimPeerConnection:function(e){var t=Ig.detectBrowser(e);if(e.RTCPeerConnection){var n=e.RTCPeerConnection;e.RTCPeerConnection=function(e,t){if(e&&e.iceServers){for(var i=[],o=0;o<e.iceServers.length;o++){var r=e.iceServers[o];!r.hasOwnProperty("urls")&&r.hasOwnProperty("url")?(Ig.deprecated("RTCIceServer.url","RTCIceServer.urls"),r=JSON.parse(JSON.stringify(r)),r.urls=r.url,i.push(r)):i.push(e.iceServers[o])}e.iceServers=i}return new n(e,t)},e.RTCPeerConnection.prototype=n.prototype,Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return n.generateCertificate}})}else e.RTCPeerConnection=function(t,n){return Mg("PeerConnection"),t&&t.iceTransportPolicy&&(t.iceTransports=t.iceTransportPolicy),new e.webkitRTCPeerConnection(t,n)},e.RTCPeerConnection.prototype=e.webkitRTCPeerConnection.prototype,e.webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return e.webkitRTCPeerConnection.generateCertificate}});var i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,t,n){var o=this,r=arguments;if(arguments.length>0&&"function"==typeof e)return i.apply(this,arguments);if(0===i.length&&(0===arguments.length||"function"!=typeof arguments[0]))return i.apply(this,[]);var a=function(e){var t={};return e.result().forEach(function(e){var n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach(function(t){n[t]=e.stat(t)}),t[n.id]=n}),t},s=function(e){return new Map(Object.keys(e).map(function(t){return[t,e[t]]}))};if(arguments.length>=2){var c=function(e){r[1](s(a(e)))};return i.apply(this,[c,arguments[0]])}return new Promise(function(e,t){i.apply(o,[function(t){e(s(a(t)))},t])}).then(t,n)},t.version<51&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){var e=arguments,t=this,i=new Promise(function(i,o){n.apply(t,[e[0],i,o])});return e.length<2?i:i.then(function(){e[1].apply(null,[])},function(t){e.length>=3&&e[2].apply(null,[t])})}}),t.version<52&&["createOffer","createAnswer"].forEach(function(t){var n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){var e=this;if(arguments.length<1||1===arguments.length&&"object"===Dt(arguments[0])){var t=1===arguments.length?arguments[0]:void 0;return new Promise(function(i,o){n.apply(e,[i,o,t])})}return n.apply(this,arguments)}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}});var o=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?o.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}},Eg={shimMediaStream:Og.shimMediaStream,shimOnTrack:Og.shimOnTrack,shimAddTrackRemoveTrack:Og.shimAddTrackRemoveTrack,shimGetSendersWithDtmf:Og.shimGetSendersWithDtmf,shimSourceObject:Og.shimSourceObject,shimPeerConnection:Og.shimPeerConnection,shimGetUserMedia:Pg},Ng={};Ng.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},Ng.localCName=Ng.generateIdentifier(),Ng.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},Ng.splitSections=function(e){return e.split("\nm=").map(function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"})},Ng.matchPrefix=function(e,t){return Ng.splitLines(e).filter(function(e){return 0===e.indexOf(t)})},Ng.parseCandidate=function(e){var t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");for(var n={foundation:t[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],port:parseInt(t[5],10),type:t[7]},i=8;i<t.length;i+=2)switch(t[i]){case"raddr":n.relatedAddress=t[i+1];break;case"rport":n.relatedPort=parseInt(t[i+1],10);break;case"tcptype":n.tcpType=t[i+1];break;default:n[t[i]]=t[i+1]}return n},Ng.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),e.ufrag&&(t.push("ufrag"),t.push(e.ufrag)),"candidate:"+t.join(" ")},Ng.parseIceOptions=function(e){return e.substr(14).split(" ")},Ng.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.numChannels=3===t.length?parseInt(t[2],10):1,n},Ng.writeRtpMap=function(e){var t=e.payloadType;return void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType),"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==e.numChannels?"/"+e.numChannels:"")+"\r\n"},Ng.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},Ng.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},Ng.parseFmtp=function(e){for(var t,n={},i=e.substr(e.indexOf(" ")+1).split(";"),o=0;o<i.length;o++)t=i[o].trim().split("="),n[t[0].trim()]=t[1];return n},Ng.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var i=[];Object.keys(e.parameters).forEach(function(t){i.push(t+"="+e.parameters[t])}),t+="a=fmtp:"+n+" "+i.join(";")+"\r\n"}return t},Ng.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},Ng.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},Ng.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},i=e.indexOf(":",t);return i>-1?(n.attribute=e.substr(t+1,i-t-1),n.value=e.substr(i+1)):n.attribute=e.substr(t+1),n},Ng.getMid=function(e){var t=Ng.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},Ng.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},Ng.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:Ng.matchPrefix(e+t,"a=fingerprint:").map(Ng.parseFingerprint)}},
Ng.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),n},Ng.getIceParameters=function(e,t){var n=Ng.splitLines(e);return n=n.concat(Ng.splitLines(t)),{usernameFragment:n.filter(function(e){return 0===e.indexOf("a=ice-ufrag:")})[0].substr(12),password:n.filter(function(e){return 0===e.indexOf("a=ice-pwd:")})[0].substr(10)}},Ng.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},Ng.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=Ng.splitLines(e),i=n[0].split(" "),o=3;o<i.length;o++){var r=i[o],a=Ng.matchPrefix(e,"a=rtpmap:"+r+" ")[0];if(a){var s=Ng.parseRtpMap(a),c=Ng.matchPrefix(e,"a=fmtp:"+r+" ");switch(s.parameters=c.length?Ng.parseFmtp(c[0]):{},s.rtcpFeedback=Ng.matchPrefix(e,"a=rtcp-fb:"+r+" ").map(Ng.parseRtcpFb),t.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(s.name.toUpperCase())}}}return Ng.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(Ng.parseExtmap(e))}),t},Ng.writeRtpDescription=function(e,t){var n="";n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){n+=Ng.writeRtpMap(e),n+=Ng.writeFmtp(e),n+=Ng.writeRtcpFb(e)});var i=0;return t.codecs.forEach(function(e){e.maxptime>i&&(i=e.maxptime)}),i>0&&(n+="a=maxptime:"+i+"\r\n"),n+="a=rtcp-mux\r\n",t.headerExtensions.forEach(function(e){n+=Ng.writeExtmap(e)}),n},Ng.parseRtpEncodingParameters=function(e){var t,n=[],i=Ng.parseRtpParameters(e),o=-1!==i.fecMechanisms.indexOf("RED"),r=-1!==i.fecMechanisms.indexOf("ULPFEC"),a=Ng.matchPrefix(e,"a=ssrc:").map(function(e){return Ng.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute}),s=a.length>0&&a[0].ssrc,c=Ng.matchPrefix(e,"a=ssrc-group:FID").map(function(e){var t=e.split(" ");return t.shift(),t.map(function(e){return parseInt(e,10)})});c.length>0&&c[0].length>1&&c[0][0]===s&&(t=c[0][1]),i.codecs.forEach(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var i={ssrc:s,codecPayloadType:parseInt(e.parameters.apt,10),rtx:{ssrc:t}};n.push(i),o&&(i=JSON.parse(JSON.stringify(i)),i.fec={ssrc:t,mechanism:r?"red+ulpfec":"red"},n.push(i))}}),0===n.length&&s&&n.push({ssrc:s});var d=Ng.matchPrefix(e,"b=");return d.length&&(d=0===d[0].indexOf("b=TIAS:")?parseInt(d[0].substr(7),10):0===d[0].indexOf("b=AS:")?950*parseInt(d[0].substr(5),10)-16e3:void 0,n.forEach(function(e){e.maxBitrate=d})),n},Ng.parseRtcpParameters=function(e){var t={},n=Ng.matchPrefix(e,"a=ssrc:").map(function(e){return Ng.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);var i=Ng.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=i.length>0,t.compound=0===i.length;var o=Ng.matchPrefix(e,"a=rtcp-mux");return t.mux=o.length>0,t},Ng.parseMsid=function(e){var t,n=Ng.matchPrefix(e,"a=msid:");if(1===n.length)return t=n[0].substr(7).split(" "),{stream:t[0],track:t[1]};var i=Ng.matchPrefix(e,"a=ssrc:").map(function(e){return Ng.parseSsrcMedia(e)}).filter(function(e){return"msid"===e.attribute});return i.length>0?(t=i[0].value.split(" "),{stream:t[0],track:t[1]}):void 0},Ng.generateSessionId=function(){return Math.random().toString().substr(2,21)},Ng.writeSessionBoilerplate=function(e,t){var n=void 0!==t?t:2;return"v=0\r\no=thisisadapterortc "+(e||Ng.generateSessionId())+" "+n+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},Ng.writeMediaSection=function(e,t,n,i){var o=Ng.writeRtpDescription(e.kind,t);if(o+=Ng.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=Ng.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var r="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+r,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+r,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+r,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+Ng.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+Ng.localCName+"\r\n"),o},Ng.getDirection=function(e,t){for(var n=Ng.splitLines(e),i=0;i<n.length;i++)switch(n[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[i].substr(2)}return t?Ng.getDirection(t):"sendrecv"},Ng.getKind=function(e){return Ng.splitLines(e)[0].split(" ")[0].substr(2)},Ng.isRejected=function(e){return"0"===e.split(" ",2)[1]};var Wg,Bg=Ng,Dg=function(e,t){var n=function(n){var i=this,o=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){i[e]=o[e].bind(o)}),this.needNegotiation=!1,this.onicecandidate=null,this.onaddstream=null,this.ontrack=null,this.onremovestream=null,this.onsignalingstatechange=null,this.oniceconnectionstatechange=null,this.onicegatheringstatechange=null,this.onnegotiationneeded=null,this.ondatachannel=null,this.canTrickleIceCandidates=null,this.localStreams=[],this.remoteStreams=[],this.getLocalStreams=function(){return i.localStreams},this.getRemoteStreams=function(){return i.remoteStreams},this.localDescription=new e.RTCSessionDescription({type:"",sdp:""}),this.remoteDescription=new e.RTCSessionDescription({type:"",sdp:""}),this.signalingState="stable",this.iceConnectionState="new",this.iceGatheringState="new",this.iceOptions={gatherPolicy:"all",iceServers:[]},n&&n.iceTransportPolicy)switch(n.iceTransportPolicy){case"all":case"relay":this.iceOptions.gatherPolicy=n.iceTransportPolicy}this.usingBundle=n&&"max-bundle"===n.bundlePolicy,n&&n.iceServers&&(this.iceOptions.iceServers=ke(n.iceServers,t)),this._config=n||{},this.transceivers=[],this._localIceCandidatesBuffer=[],this._sdpSessionId=Bg.generateSessionId()};return n.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this.dispatchEvent(e),null!==this.onicegatheringstatechange&&this.onicegatheringstatechange(e)},n.prototype._emitBufferedCandidates=function(){var e=this,t=Bg.splitSections(e.localDescription.sdp);this._localIceCandidatesBuffer.forEach(function(n){if(n.candidate&&0!==Object.keys(n.candidate).length)t[n.candidate.sdpMLineIndex+1]+="a="+n.candidate.candidate+"\r\n";else for(var i=1;i<t.length;i++)-1===t[i].indexOf("\r\na=end-of-candidates\r\n")&&(t[i]+="a=end-of-candidates\r\n");if(e.localDescription.sdp=t.join(""),e.dispatchEvent(n),null!==e.onicecandidate&&e.onicecandidate(n),!n.candidate&&"complete"!==e.iceGatheringState){e.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state})&&"complete"!==e.iceGatheringStateChange&&(e.iceGatheringState="complete",e._emitGatheringStateChange())}}),this._localIceCandidatesBuffer=[]},n.prototype.getConfiguration=function(){return this._config},n.prototype._createTransceiver=function(e){var t=this.transceivers.length>0,n={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,wantReceive:!0};if(this.usingBundle&&t)n.iceTransport=this.transceivers[0].iceTransport,n.dtlsTransport=this.transceivers[0].dtlsTransport;else{var i=this._createIceAndDtlsTransports();n.iceTransport=i.iceTransport,n.dtlsTransport=i.dtlsTransport}return this.transceivers.push(n),n},n.prototype.addTrack=function(t,n){for(var i,o=0;o<this.transceivers.length;o++)this.transceivers[o].track||this.transceivers[o].kind!==t.kind||(i=this.transceivers[o]);return i||(i=this._createTransceiver(t.kind)),i.track=t,i.stream=n,i.rtpSender=new e.RTCRtpSender(t,i.dtlsTransport),this._maybeFireNegotiationNeeded(),i.rtpSender},n.prototype.addStream=function(e){var n=this;if(t>=15025)this.localStreams.push(e),e.getTracks().forEach(function(t){n.addTrack(t,e)});else{var i=e.clone();e.getTracks().forEach(function(e,t){var n=i.getTracks()[t];e.addEventListener("enabled",function(e){n.enabled=e.enabled})}),i.getTracks().forEach(function(e){n.addTrack(e,i)}),this.localStreams.push(i)}this._maybeFireNegotiationNeeded()},n.prototype.removeStream=function(e){var t=this.localStreams.indexOf(e);t>-1&&(this.localStreams.splice(t,1),this._maybeFireNegotiationNeeded())},n.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},n.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},n.prototype._createIceGatherer=function(t,n){var i=this,o=new e.RTCIceGatherer(i.iceOptions);return o.onlocalcandidate=function(e){var r=new Event("icecandidate");r.candidate={sdpMid:t,sdpMLineIndex:n};var a=e.candidate,s=!a||0===Object.keys(a).length;s?void 0===o.state&&(o.state="completed"):(a.component=1,r.candidate.candidate=Bg.writeCandidate(a));var c=Bg.splitSections(i.localDescription.sdp);c[r.candidate.sdpMLineIndex+1]+=s?"a=end-of-candidates\r\n":"a="+r.candidate.candidate+"\r\n",i.localDescription.sdp=c.join("");var d=i._pendingOffer?i._pendingOffer:i.transceivers,l=d.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});switch(i.iceGatheringState){case"new":s||i._localIceCandidatesBuffer.push(r),s&&l&&i._localIceCandidatesBuffer.push(new Event("icecandidate"));break;case"gathering":i._emitBufferedCandidates(),s||(i.dispatchEvent(r),null!==i.onicecandidate&&i.onicecandidate(r)),l&&(i.dispatchEvent(new Event("icecandidate")),null!==i.onicecandidate&&i.onicecandidate(new Event("icecandidate")),i.iceGatheringState="complete",i._emitGatheringStateChange())}},o},n.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateConnectionState()};var i=new e.RTCDtlsTransport(n);return i.ondtlsstatechange=function(){t._updateConnectionState()},i.onerror=function(){Object.defineProperty(i,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:i}},n.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var i=this.transceivers[e].dtlsTransport;i&&(delete i.ondtlsstatechange,delete i.onerror,delete this.transceivers[e].dtlsTransport)},n.prototype._transceive=function(e,n,i){var o=Se(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(o.encodings=e.sendEncodingParameters,o.rtcp={cname:Bg.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(o.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(o)),i&&e.rtpReceiver&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach(function(e){delete e.rtx}),o.encodings=e.recvEncodingParameters,o.rtcp={cname:e.rtcpParameters.cname,compound:e.rtcpParameters.compound},e.sendEncodingParameters.length&&(o.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(o))},n.prototype.setLocalDescription=function(t){var n=this;if(!Ae("setLocalDescription",t.type,this.signalingState)){var i=new Error("Can not set local "+t.type+" in state "+this.signalingState);return i.name="InvalidStateError",arguments.length>2&&"function"==typeof arguments[2]&&e.setTimeout(arguments[2],0,i),Promise.reject(i)}var o,r;if("offer"===t.type)this._pendingOffer&&(o=Bg.splitSections(t.sdp),r=o.shift(),o.forEach(function(e,t){var i=Bg.parseRtpParameters(e);n._pendingOffer[t].localCapabilities=i}),this.transceivers=this._pendingOffer,delete this._pendingOffer);else if("answer"===t.type){o=Bg.splitSections(n.remoteDescription.sdp),r=o.shift();var a=Bg.matchPrefix(r,"a=ice-lite").length>0;o.forEach(function(e,t){var i=n.transceivers[t],o=i.iceGatherer,s=i.iceTransport,c=i.dtlsTransport,d=i.localCapabilities,l=i.remoteCapabilities;if(!Bg.isRejected(e)&&!i.isDatachannel){var u=Bg.getIceParameters(e,r),p=Bg.getDtlsParameters(e,r);a&&(p.role="server"),n.usingBundle&&0!==t||(s.start(o,u,a?"controlling":"controlled"),c.start(p));var f=Se(d,l);n._transceive(i,f.codecs.length>0,!1)}})}switch(this.localDescription={type:t.type,sdp:t.sdp},t.type){case"offer":this._updateSignalingState("have-local-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+t.type+'"')}var s=arguments.length>1&&"function"==typeof arguments[1];if(s){var c=arguments[1];e.setTimeout(function(){c(),"new"===n.iceGatheringState&&(n.iceGatheringState="gathering",n._emitGatheringStateChange()),n._emitBufferedCandidates()},0)}var d=Promise.resolve();return d.then(function(){s||("new"===n.iceGatheringState&&(n.iceGatheringState="gathering",n._emitGatheringStateChange()),e.setTimeout(n._emitBufferedCandidates.bind(n),500))}),d},n.prototype.setRemoteDescription=function(n){var i=this;if(!Ae("setRemoteDescription",n.type,this.signalingState)){var o=new Error("Can not set remote "+n.type+" in state "+this.signalingState);return o.name="InvalidStateError",arguments.length>2&&"function"==typeof arguments[2]&&e.setTimeout(arguments[2],0,o),Promise.reject(o)}var r={},a=[],s=Bg.splitSections(n.sdp),c=s.shift(),d=Bg.matchPrefix(c,"a=ice-lite").length>0,l=Bg.matchPrefix(c,"a=group:BUNDLE ").length>0;this.usingBundle=l;var u=Bg.matchPrefix(c,"a=ice-options:")[0];switch(this.canTrickleIceCandidates=!!u&&u.substr(14).split(" ").indexOf("trickle")>=0,s.forEach(function(o,s){var u=Bg.splitLines(o),p=Bg.getKind(o),f=Bg.isRejected(o),h=u[0].substr(2).split(" ")[2],m=Bg.getDirection(o,c),b=Bg.parseMsid(o),g=Bg.getMid(o)||Bg.generateIdentifier();if("application"===p&&"DTLS/SCTP"===h)return void(i.transceivers[s]={mid:g,isDatachannel:!0});var w,v,y,x,_,C,k,S,A,T,I,R=Bg.parseRtpParameters(o);f||(T=Bg.getIceParameters(o,c),I=Bg.getDtlsParameters(o,c),I.role="client"),k=Bg.parseRtpEncodingParameters(o);var P=Bg.parseRtcpParameters(o),M=Bg.matchPrefix(o,"a=end-of-candidates",c).length>0,O=Bg.matchPrefix(o,"a=candidate:").map(function(e){return Bg.parseCandidate(e)}).filter(function(e){return"1"===e.component||1===e.component});("offer"===n.type||"answer"===n.type)&&!f&&l&&s>0&&i.transceivers[s]&&(i._disposeIceAndDtlsTransports(s),i.transceivers[s].iceGatherer=i.transceivers[0].iceGatherer,i.transceivers[s].iceTransport=i.transceivers[0].iceTransport,i.transceivers[s].dtlsTransport=i.transceivers[0].dtlsTransport,i.transceivers[s].rtpSender&&i.transceivers[s].rtpSender.setTransport(i.transceivers[0].dtlsTransport),i.transceivers[s].rtpReceiver&&i.transceivers[s].rtpReceiver.setTransport(i.transceivers[0].dtlsTransport)),"offer"!==n.type||f?"answer"!==n.type||f||(w=i.transceivers[s],v=w.iceGatherer,y=w.iceTransport,x=w.dtlsTransport,_=w.rtpReceiver,C=w.sendEncodingParameters,S=w.localCapabilities,i.transceivers[s].recvEncodingParameters=k,i.transceivers[s].remoteCapabilities=R,i.transceivers[s].rtcpParameters=P,l&&0!==s||((d||M)&&O.length&&y.setRemoteCandidates(O),y.start(v,T,"controlling"),x.start(I)),i._transceive(w,"sendrecv"===m||"recvonly"===m,"sendrecv"===m||"sendonly"===m),!_||"sendrecv"!==m&&"sendonly"!==m?delete w.rtpReceiver:(A=_.track,b?(r[b.stream]||(r[b.stream]=new e.MediaStream),r[b.stream].addTrack(A),a.push([A,_,r[b.stream]])):(r.default||(r.default=new e.MediaStream),r.default.addTrack(A),a.push([A,_,r.default])))):(w=i.transceivers[s]||i._createTransceiver(p),w.mid=g,w.iceGatherer||(w.iceGatherer=l&&s>0?i.transceivers[0].iceGatherer:i._createIceGatherer(g,s)),!M||!O.length||l&&0!==s||w.iceTransport.setRemoteCandidates(O),S=e.RTCRtpReceiver.getCapabilities(p),t<15019&&(S.codecs=S.codecs.filter(function(e){return"rtx"!==e.name})),C=[{ssrc:1001*(2*s+2)}],"sendrecv"!==m&&"sendonly"!==m||(_=new e.RTCRtpReceiver(w.dtlsTransport,p),A=_.track,b?(r[b.stream]||(r[b.stream]=new e.MediaStream,Object.defineProperty(r[b.stream],"id",{get:function(){return b.stream}})),Object.defineProperty(A,"id",{get:function(){return b.track}}),r[b.stream].addTrack(A),a.push([A,_,r[b.stream]])):(r.default||(r.default=new e.MediaStream),r.default.addTrack(A),a.push([A,_,r.default]))),w.localCapabilities=S,w.remoteCapabilities=R,w.rtpReceiver=_,w.rtcpParameters=P,w.sendEncodingParameters=C,w.recvEncodingParameters=k,i._transceive(i.transceivers[s],!1,"sendrecv"===m||"sendonly"===m))}),this.remoteDescription={type:n.type,sdp:n.sdp},n.type){case"offer":this._updateSignalingState("have-remote-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+n.type+'"')}return Object.keys(r).forEach(function(t){var n=r[t];if(n.getTracks().length){i.remoteStreams.push(n);var o=new Event("addstream");o.stream=n,i.dispatchEvent(o),null!==i.onaddstream&&e.setTimeout(function(){i.onaddstream(o)},0),a.forEach(function(t){var o=t[0],r=t[1];if(n.id===t[2].id){var a=new Event("track");a.track=o,a.receiver=r,a.streams=[n],i.dispatchEvent(a),null!==i.ontrack&&e.setTimeout(function(){i.ontrack(a)},0)}})}}),e.setTimeout(function(){i&&i.transceivers&&i.transceivers.forEach(function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&e.iceTransport.addRemoteCandidate({})})},4e3),arguments.length>1&&"function"==typeof arguments[1]&&e.setTimeout(arguments[1],0),Promise.resolve()},n.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._updateSignalingState("closed")},n.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this.dispatchEvent(t),null!==this.onsignalingstatechange&&this.onsignalingstatechange(t)},n.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout(function(){if(!1!==t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t.dispatchEvent(e),null!==t.onnegotiationneeded&&t.onnegotiationneeded(e)}},0))},n.prototype._updateConnectionState=function(){var e,t=this,n={new:0,closed:0,connecting:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){n[e.iceTransport.state]++,n[e.dtlsTransport.state]++}),n.connected+=n.completed,e="new",n.failed>0?e="failed":n.connecting>0||n.checking>0?e="connecting":n.disconnected>0?e="disconnected":n.new>0?e="new":(n.connected>0||n.completed>0)&&(e="connected"),e!==t.iceConnectionState){t.iceConnectionState=e;var i=new Event("iceconnectionstatechange");this.dispatchEvent(i),null!==this.oniceconnectionstatechange&&this.oniceconnectionstatechange(i)}},n.prototype.createOffer=function(){var n=this;if(this._pendingOffer)throw new Error("createOffer called while there is a pending offer.");var i;1===arguments.length&&"function"!=typeof arguments[0]?i=arguments[0]:3===arguments.length&&(i=arguments[2]);var o=this.transceivers.filter(function(e){return"audio"===e.kind}).length,r=this.transceivers.filter(function(e){return"video"===e.kind}).length;if(i){if(i.mandatory||i.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==i.offerToReceiveAudio&&(o=!0===i.offerToReceiveAudio?1:!1===i.offerToReceiveAudio?0:i.offerToReceiveAudio),void 0!==i.offerToReceiveVideo&&(r=!0===i.offerToReceiveVideo?1:!1===i.offerToReceiveVideo?0:i.offerToReceiveVideo)}for(this.transceivers.forEach(function(e){"audio"===e.kind?--o<0&&(e.wantReceive=!1):"video"===e.kind&&--r<0&&(e.wantReceive=!1)});o>0||r>0;)o>0&&(this._createTransceiver("audio"),o--),r>0&&(this._createTransceiver("video"),r--);var a=Ce(this.transceivers),s=Bg.writeSessionBoilerplate(this._sdpSessionId);a.forEach(function(i,o){var r=i.track,s=i.kind,c=Bg.generateIdentifier();i.mid=c,i.iceGatherer||(i.iceGatherer=n.usingBundle&&o>0?a[0].iceGatherer:n._createIceGatherer(c,o));var d=e.RTCRtpSender.getCapabilities(s);t<15019&&(d.codecs=d.codecs.filter(function(e){return"rtx"!==e.name})),d.codecs.forEach(function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1")});var l=[{ssrc:1001*(2*o+1)}];r&&t>=15019&&"video"===s&&(l[0].rtx={ssrc:1001*(2*o+1)+1}),i.wantReceive&&(i.rtpReceiver=new e.RTCRtpReceiver(i.dtlsTransport,s)),i.localCapabilities=d,i.sendEncodingParameters=l}),"max-compat"!==this._config.bundlePolicy&&(s+="a=group:BUNDLE "+a.map(function(e){return e.mid}).join(" ")+"\r\n"),s+="a=ice-options:trickle\r\n",a.forEach(function(e,t){s+=Bg.writeMediaSection(e,e.localCapabilities,"offer",e.stream),s+="a=rtcp-rsize\r\n"}),this._pendingOffer=a;var c=new e.RTCSessionDescription({type:"offer",sdp:s});return arguments.length&&"function"==typeof arguments[0]&&e.setTimeout(arguments[0],0,c),Promise.resolve(c)},n.prototype.createAnswer=function(){var n=Bg.writeSessionBoilerplate(this._sdpSessionId);this.usingBundle&&(n+="a=group:BUNDLE "+this.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),this.transceivers.forEach(function(e,i){if(e.isDatachannel)return void(n+="m=application 0 DTLS/SCTP 5000\r\nc=IN IP4 0.0.0.0\r\na=mid:"+e.mid+"\r\n");if(e.stream){var o;"audio"===e.kind?o=e.stream.getAudioTracks()[0]:"video"===e.kind&&(o=e.stream.getVideoTracks()[0]),o&&t>=15019&&"video"===e.kind&&(e.sendEncodingParameters[0].rtx={ssrc:1001*(2*i+2)+1})}var r=Se(e.localCapabilities,e.remoteCapabilities);!r.codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,n+=Bg.writeMediaSection(e,r,"answer",e.stream),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(n+="a=rtcp-rsize\r\n")});var i=new e.RTCSessionDescription({type:"answer",sdp:n});return arguments.length&&"function"==typeof arguments[0]&&e.setTimeout(arguments[0],0,i),Promise.resolve(i)},n.prototype.addIceCandidate=function(t){if(t){var n=t.sdpMLineIndex;if(t.sdpMid)for(var i=0;i<this.transceivers.length;i++)if(this.transceivers[i].mid===t.sdpMid){n=i;break}var o=this.transceivers[n];if(o){var r=Object.keys(t.candidate).length>0?Bg.parseCandidate(t.candidate):{};if("tcp"===r.protocol&&(0===r.port||9===r.port))return Promise.resolve();if(r.component&&"1"!==r.component&&1!==r.component)return Promise.resolve();o.iceTransport.addRemoteCandidate(r);var a=Bg.splitSections(this.remoteDescription.sdp);a[n+1]+=(r.type?t.candidate.trim():"a=end-of-candidates")+"\r\n",this.remoteDescription.sdp=a.join("")}}else for(var s=0;s<this.transceivers.length;s++)if(this.transceivers[s].iceTransport.addRemoteCandidate({}),this.usingBundle)return Promise.resolve();return arguments.length>1&&"function"==typeof arguments[1]&&e.setTimeout(arguments[1],0),Promise.resolve()},n.prototype.getStats=function(){var t=[];this.transceivers.forEach(function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(n){e[n]&&t.push(e[n].getStats())})});var n=arguments.length>1&&"function"==typeof arguments[1]&&arguments[1],i=function(e){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};return new Promise(function(o){var r=new Map;Promise.all(t).then(function(t){t.forEach(function(e){Object.keys(e).forEach(function(t){e[t].type=i(e[t]),r.set(t,e[t])})}),n&&e.setTimeout(n,0,r),o(r)})})},n},zg=function(e){var t=e&&e.navigator,n=function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}},i=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return i(e).catch(function(e){return Promise.reject(n(e))})}},jg={shimGetUserMedia:zg,shimPeerConnection:function(e){var t=Ig.detectBrowser(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var n=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){n.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}!e.RTCRtpSender||"dtmf"in e.RTCRtpSender.prototype||Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCPeerConnection=Dg(e,t.version)},shimReplaceTrack:function(e){!e.RTCRtpSender||"replaceTrack"in e.RTCRtpSender.prototype||(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}},qg=Ig.log,Lg=function(e){var t=Ig.detectBrowser(e),n=e&&e.navigator,i=e&&e.MediaStreamTrack,o=function(e){return{name:{InternalError:"NotReadableError",NotSupportedError:"TypeError",PermissionDeniedError:"NotAllowedError",SecurityError:"NotAllowedError"}[e.name]||e.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[e.message]||e.message,constraint:e.constraint,toString:function(){return this.name+(this.message&&": ")+this.message}}},r=function(e,i,r){var a=function(e){if("object"!==(void 0===e?"undefined":Dt(e))||e.require)return e;var t=[];return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var i=e[n]="object"===Dt(e[n])?e[n]:{ideal:e[n]};if(void 0===i.min&&void 0===i.max&&void 0===i.exact||t.push(n),void 0!==i.exact&&("number"==typeof i.exact?i.min=i.max=i.exact:e[n]=i.exact,delete i.exact),void 0!==i.ideal){e.advanced=e.advanced||[];var o={};"number"==typeof i.ideal?o[n]={min:i.ideal,max:i.ideal}:o[n]=i.ideal,e.advanced.push(o),delete i.ideal,Object.keys(i).length||delete e[n]}}}),t.length&&(e.require=t),e};return e=JSON.parse(JSON.stringify(e)),t.version<38&&(qg("spec: "+JSON.stringify(e)),e.audio&&(e.audio=a(e.audio)),e.video&&(e.video=a(e.video)),qg("ff37: "+JSON.stringify(e))),n.mozGetUserMedia(e,i,function(e){r(o(e))})},a=function(e){return new Promise(function(t,n){r(e,t,n)})};if(n.mediaDevices||(n.mediaDevices={getUserMedia:a,addEventListener:function(){},removeEventListener:function(){}}),n.mediaDevices.enumerateDevices=n.mediaDevices.enumerateDevices||function(){return new Promise(function(e){e([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])})},t.version<41){var s=n.mediaDevices.enumerateDevices.bind(n.mediaDevices);n.mediaDevices.enumerateDevices=function(){return s().then(void 0,function(e){if("NotFoundError"===e.name)return[];throw e})}}if(t.version<49){var c=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(e){return c(e).then(function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach(function(e){e.stop()}),new DOMException("The object can not be found here.","NotFoundError");return t},function(e){return Promise.reject(o(e))})}}if(!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var d=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},l=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"===(void 0===e?"undefined":Dt(e))&&"object"===Dt(e.audio)&&(e=JSON.parse(JSON.stringify(e)),d(e.audio,"autoGainControl","mozAutoGainControl"),d(e.audio,"noiseSuppression","mozNoiseSuppression")),l(e)},i&&i.prototype.getSettings){var u=i.prototype.getSettings;i.prototype.getSettings=function(){var e=u.apply(this,arguments);return d(e,"mozAutoGainControl","autoGainControl"),d(e,"mozNoiseSuppression","noiseSuppression"),e}}if(i&&i.prototype.applyConstraints){var p=i.prototype.applyConstraints;i.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===(void 0===e?"undefined":Dt(e))&&(e=JSON.parse(JSON.stringify(e)),d(e,"autoGainControl","mozAutoGainControl"),d(e,"noiseSuppression","mozNoiseSuppression")),p.apply(this,[e])}}}n.getUserMedia=function(e,i,o){if(t.version<44)return r(e,i,o);Ig.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(i,o)}},Vg={shimOnTrack:function(e){"object"!==(void 0===e?"undefined":Dt(e))||!e.RTCPeerConnection||"ontrack"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(e){e.stream.getTracks().forEach(function(t){var n=new Event("track");n.track=t,n.receiver={track:t},n.streams=[e.stream],this.dispatchEvent(n)}.bind(this))}.bind(this))}})},shimSourceObject:function(e){"object"===(void 0===e?"undefined":Dt(e))&&(!e.HTMLMediaElement||"srcObject"in e.HTMLMediaElement.prototype||Object.defineProperty(e.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(e){this.mozSrcObject=e}}))},shimPeerConnection:function(e){var t=Ig.detectBrowser(e);if("object"===(void 0===e?"undefined":Dt(e))&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){e.RTCPeerConnection||(e.RTCPeerConnection=function(n,i){if(t.version<38&&n&&n.iceServers){for(var o=[],r=0;r<n.iceServers.length;r++){var a=n.iceServers[r];if(a.hasOwnProperty("urls"))for(var s=0;s<a.urls.length;s++){var c={url:a.urls[s]};0===a.urls[s].indexOf("turn")&&(c.username=a.username,c.credential=a.credential),o.push(c)}else o.push(n.iceServers[r])}n.iceServers=o}return new e.mozRTCPeerConnection(n,i)},e.RTCPeerConnection.prototype=e.mozRTCPeerConnection.prototype,e.mozRTCPeerConnection.generateCertificate&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return e.mozRTCPeerConnection.generateCertificate}}),e.RTCSessionDescription=e.mozRTCSessionDescription,e.RTCIceCandidate=e.mozRTCIceCandidate),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}});var n=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())};var i=function(e){var t=new Map;return Object.keys(e).forEach(function(n){t.set(n,e[n]),t[n]=e[n]}),t},o={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,n,a){return r.apply(this,[e||null]).then(function(e){if(t.version<48&&(e=i(e)),t.version<53&&!n)try{e.forEach(function(e){e.type=o[e.type]||e.type})}catch(t){if("TypeError"!==t.name)throw t;e.forEach(function(t,n){e.set(n,Object.assign({},t,{type:o[t.type]||t.type}))})}return e}).then(n,a)}}}},Fg={shimOnTrack:Vg.shimOnTrack,shimSourceObject:Vg.shimSourceObject,
shimPeerConnection:Vg.shimPeerConnection,shimGetUserMedia:Lg},Ug={shimLocalStreamsAPI:function(e){if("object"===(void 0===e?"undefined":Dt(e))&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),"getStreamById"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getStreamById=function(e){var t=null;return this._localStreams&&this._localStreams.forEach(function(n){n.id===e&&(t=n)}),this._remoteStreams&&this._remoteStreams.forEach(function(n){n.id===e&&(t=n)}),t}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),-1===this._localStreams.indexOf(e)&&this._localStreams.push(e);var n=this;e.getTracks().forEach(function(i){t.call(n,i,e)})},e.RTCPeerConnection.prototype.addTrack=function(e,n){n&&(this._localStreams?-1===this._localStreams.indexOf(n)&&this._localStreams.push(n):this._localStreams=[n]),t.call(this,e,n)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);var t=this._localStreams.indexOf(e);if(-1!==t){this._localStreams.splice(t,1);var n=this,i=e.getTracks();this.getSenders().forEach(function(e){-1!==i.indexOf(e.track)&&n.removeTrack(e)})}})}},shimRemoteStreamsAPI:function(e){"object"===(void 0===e?"undefined":Dt(e))&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),"onaddstream"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){var t=e.streams[0];if(this._remoteStreams||(this._remoteStreams=[]),!(this._remoteStreams.indexOf(t)>=0)){this._remoteStreams.push(t);var n=new Event("addstream");n.stream=e.streams[0],this.dispatchEvent(n)}}.bind(this))}}))},shimCallbacksAPI:function(e){if("object"===(void 0===e?"undefined":Dt(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,n=t.createOffer,i=t.createAnswer,o=t.setLocalDescription,r=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){var i=arguments.length>=2?arguments[2]:arguments[0],o=n.apply(this,[i]);return t?(o.then(e,t),Promise.resolve()):o},t.createAnswer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],o=i.apply(this,[n]);return t?(o.then(e,t),Promise.resolve()):o};var s=function(e,t,n){var i=o.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i};t.setLocalDescription=s,s=function(e,t,n){var i=r.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i},t.setRemoteDescription=s,s=function(e,t,n){var i=a.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i},t.addIceCandidate=s}},shimGetUserMedia:function(e){var t=e&&e.navigator;t.getUserMedia||(t.webkitGetUserMedia?t.getUserMedia=t.webkitGetUserMedia.bind(t):t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,i){t.mediaDevices.getUserMedia(e).then(n,i)}.bind(t)))},shimRTCIceServerUrls:function(e){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){for(var i=[],o=0;o<e.iceServers.length;o++){var r=e.iceServers[o];!r.hasOwnProperty("urls")&&r.hasOwnProperty("url")?(Ig.deprecated("RTCIceServer.url","RTCIceServer.urls"),r=JSON.parse(JSON.stringify(r)),r.urls=r.url,delete r.url,i.push(r)):i.push(e.iceServers[o])}e.iceServers=i}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}},Hg={shimCallbacksAPI:Ug.shimCallbacksAPI,shimLocalStreamsAPI:Ug.shimLocalStreamsAPI,shimRemoteStreamsAPI:Ug.shimRemoteStreamsAPI,shimGetUserMedia:Ug.shimGetUserMedia,shimRTCIceServerUrls:Ug.shimRTCIceServerUrls},Gg=(function(e,t){var n=e&&e.window,i={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0};for(var o in t)hasOwnProperty.call(t,o)&&(i[o]=t[o]);var r=Ig,a=r.log,s=r.detectBrowser(n),c={browserDetails:s,extractVersion:r.extractVersion,disableLog:r.disableLog,disableWarnings:r.disableWarnings},d=Eg||null,l=jg||null,u=Fg||null,p=Hg||null;switch(s.browser){case"chrome":if(!d||!d.shimPeerConnection||!i.shimChrome)return a("Chrome shim is not included in this adapter release."),c;a("adapter.js shimming chrome."),c.browserShim=d,d.shimGetUserMedia(n),d.shimMediaStream(n),r.shimCreateObjectURL(n),d.shimSourceObject(n),d.shimPeerConnection(n),d.shimOnTrack(n),d.shimAddTrackRemoveTrack(n),d.shimGetSendersWithDtmf(n);break;case"firefox":if(!u||!u.shimPeerConnection||!i.shimFirefox)return a("Firefox shim is not included in this adapter release."),c;a("adapter.js shimming firefox."),c.browserShim=u,u.shimGetUserMedia(n),r.shimCreateObjectURL(n),u.shimSourceObject(n),u.shimPeerConnection(n),u.shimOnTrack(n);break;case"edge":if(!l||!l.shimPeerConnection||!i.shimEdge)return a("MS edge shim is not included in this adapter release."),c;a("adapter.js shimming edge."),c.browserShim=l,l.shimGetUserMedia(n),r.shimCreateObjectURL(n),l.shimPeerConnection(n),l.shimReplaceTrack(n);break;case"safari":if(!p||!i.shimSafari)return a("Safari shim is not included in this adapter release."),c;a("adapter.js shimming safari."),c.browserShim=p,r.shimCreateObjectURL(n),p.shimRTCIceServerUrls(n),p.shimCallbacksAPI(n),p.shimLocalStreamsAPI(n),p.shimRemoteStreamsAPI(n),p.shimGetUserMedia(n);break;default:a("Unsupported browser!")}}({window:Nt.window}),void 0),Yg=function(e,t){return{type:e,time:new Date,content:t,sender:{type:"visitor"}}},Qg=function(e){Gg&&e&&Gg.start(e)},Jg=function(){Gg&&(Gg.stop(),Gg=null)},Xg=function(e,t){if(Qg(tr(e,"/webrtcSignalingService/signaling.ashx")),"videoChatting"===t){var n=Gg.getRemoteVideo(),i=Gg.getLocalVideo();try{i.play(),n.play()}catch(e){}}},Zg=(Wg={},Wg.agentVideoChatAccept=function(e){Xg(e,"videoChatting")},Wg.agentAudioChatAccept=function(e){Xg(e,"audioChatting")},Wg.agentVideoChatCancelRequest=Jg,Wg.agentVideoChatRefuse=Jg,Wg.agentVideoChatStop=Jg,Wg.agentAudioChatStop=Jg,Wg.agentAudioChatRefuse=Jg,Wg.agentAudioChatCancelRequest=Jg,Wg.systemAudioChatNoAnswer=Jg,Wg.systemAudioChatEnd=Jg,Wg.systemVideoChatNoAnswer=Jg,Wg.systemVideoChatEnd=Jg,Wg.visitorAudioChatCancelRequest=Jg,Wg.visitorAudioChatRefuse=Jg,Wg.visitorAudioChatStop=Jg,Wg.visitorVideoChatCancelRequest=Jg,Wg.visitorVideoChatRefuse=Jg,Wg.visitorVideoChatStop=Jg,Wg.visitorAudioChatAccept=function(e){Xg(e,"audioChatting")},Wg.visitorVideoChatAccept=function(e){Xg(e,"videoChatting")},Wg),$g=function(e,t){return is(e).filter(function(e){return e.type===t}).length>0},Kg=function(e){var t=e.getState,n=e.dispatch;return function(e){return function(i){var o=t();if("footer/chatToolAudio"===i.type)return Gg||(Gg=new Me({chat:cs(o)})),Gg.requirePermission(!1).then(function(){var t=Yg("pendingAudioRequesting","");n(Ah([t])),e(i)}).catch(function(){}),null;if("footer/chatToolVideo"===i.type)return Gg||(Gg=new Me({chat:cs(o)})),Gg.requirePermission(!0).then(function(){var t=Yg("pendingVideoRequesting","");n(Ah([t])),e(i)}).catch(function(){}),null;"chatWindow/popOut"===i.type?(Jg(),lp(cs(o))):"chatWindow/popIn"===i.type&&(Jg(),lp(cs(o)));var r=e(i),a=t(),s=Js(a),c=Js(o);if("window/prepareP2pChat"===i.type)dp(cs(a)),Gg?(Gg.setLocalVideo(i.payload.localVideo),Gg.setRemoteVideo(i.payload.remoteVideo)):Gg=new Me({chat:cs(a),localVideo:i.payload.localVideo,remoteVideo:i.payload.remoteVideo}),Gg.onevent(function(e,t){if("error"===e)n(Th());else if("start"===e){if(!Gg)return;var i=Gg.getRemoteVideo();i&&Ee(i,"mediaChatWindow__remoteVideo--loading")}else if("remoteStreamReceived"===e){if(!Gg)return;var o=Gg.getRemoteVideo();o&&Ne(o,"mediaChatWindow__remoteVideo--loading")}}),Gg.requirePermission("videoRequesting"===s||"videoChatting"===s||"videoIncoming"===s).then(function(){if(("videoChatting"===s||"audioChatting"===s)&&(Qg(tr(a,"/webrtcSignalingService/signaling.ashx")),"videoChatting"===s)){var e=Gg.getRemoteVideo(),t=Gg.getLocalVideo();try{t.play(),e.play()}catch(e){}}}).catch(function(){});else if(i.type===su)Gg&&i.payload.forEach(function(e){var t=Zg[e.type];t&&t(a)});else if("window/acceptAudioVideoChat"===i.type)Gg&&Gg.requirePermission("videoIncoming"===s).then(function(){var e=Yg("pendingAccept",s);n(Ah([e]))}).catch(function(){});else if("window/hangupAudioVideoChat"===i.type&&(Jg(),!$g(a,"pendingHangup"))){var d=Yg("pendingHangup",c);n(Ah([d]))}return r}}},ew=function(e,t){var n=Xi(function(){return t(sh())},1e4,!1);return function(t){var i=t.type,o=t.sender,r=t.content,a=e();if("agentTyping"===i)n();else if("agentJoinChat"===i||"agentAcceptChat"===i||"agentAcceptTransfer"===i){var s=r.agent;sm("livechat.chat.agent.join",s)}else if("agentTransferChat"===i||"agentTransferChatToDepartment"===i){var c=mc(a,o.id);sm("livechat.chat.agent.transfer",c)}else if("agentEndChat"===i){var d=mc(a,o.id);sm("livechat.chat.agent.leave",d)}}},tw=function(e){var t=e.getState;return function(e){var n=ew(t,e);return function(t){var i=e(t);return t.type===su&&t.payload.forEach(n),i}}},nw=void 0;nw=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(n,i,o){var r=e(n,i,o),a=r.dispatch,s=[],c={getState:r.getState,dispatch:function(e){return a(e)}};return s=t.map(function(e){return e(c)}),a=Y.apply(void 0,s)(r.dispatch),Fl({},r,{dispatch:a})}}}(Ul,bg,kg,Kg,hg,Im,tw,Wm);var iw={only:function(e){return e&&e[0]||null}};Be.isRequired=Be;var ow={element:Be,func:Be,shape:function(){return Be},instanceOf:function(){return Be}},rw=ow.shape({trySubscribe:ow.func.isRequired,tryUnsubscribe:ow.func.isRequired,notifyNestedSubs:ow.func.isRequired,isSubscribed:ow.func.isRequired}),aw=ow.shape({subscribe:ow.func.isRequired,dispatch:ow.func.isRequired,getState:ow.func.isRequired}),sw="function"==typeof Symbol&&"symbol"===Dt(Symbol.iterator)?function(e){return void 0===e?"undefined":Dt(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":Dt(e)},cw=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},dw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},lw=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":Dt(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},uw=function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},pw=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":Dt(t))&&"function"!=typeof t?e:t},fw=!1,hw=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"store",n=arguments[1],i=n||t+"Subscription",o=function(e){function n(i,o){cw(this,n);var r=pw(this,e.call(this,i,o));return r[t]=i.store,r}return lw(n,e),n.prototype.getChildContext=function(){var e;return e={},e[t]=this[t],e[i]=null,e},n.prototype.render=function(){return iw.only(this.props.children)},n}(I);return o.prototype.componentWillReceiveProps=function(e){this[t]!==e.store&&ze()},o.childContextTypes=(e={},e[t]=aw.isRequired,e[i]=rw,e),o.displayName="Provider",o}(),mw={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},bw={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0},gw="function"==typeof Object.getOwnPropertySymbols,ww=function(e,t,n){if("string"!=typeof t){var i=Object.getOwnPropertyNames(t);gw&&(i=i.concat(Object.getOwnPropertySymbols(t)));for(var o=0;o<i.length;++o)if(!(mw[i[o]]||bw[i[o]]||n&&n[i[o]]))try{e[i[o]]=t[i[o]]}catch(e){}}return e},vw=function(){},yw=null,xw={notify:function(){}},_w=function(){function e(t,n,i){cw(this,e),this.store=t,this.parentSub=n,this.onStateChange=i,this.unsubscribe=null,this.listeners=xw}return e.prototype.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},e.prototype.notifyNestedSubs=function(){this.listeners.notify()},e.prototype.isSubscribed=function(){return Boolean(this.unsubscribe)},e.prototype.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=je())},e.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=xw)},e}(),Cw=0,kw={},Sw=Object.prototype.hasOwnProperty,Aw="object"==("undefined"==typeof global?"undefined":sw(global))&&global&&global.Object===Object&&global,Tw="object"==("undefined"==typeof self?"undefined":sw(self))&&self&&self.Object===Object&&self,Iw=Aw||Tw||Function("return this")(),Rw=Iw.Symbol,Pw=Object.prototype,Mw=Pw.hasOwnProperty,Ow=Pw.toString,Ew=Rw?Rw.toStringTag:void 0,Nw=Object.prototype,Ww=Nw.toString,Bw="[object Null]",Dw="[object Undefined]",zw=Rw?Rw.toStringTag:void 0,jw=function(e,t){return function(n){return e(t(n))}}(Object.getPrototypeOf,Object),qw="[object Object]",Lw=Function.prototype,Vw=Object.prototype,Fw=Lw.toString,Uw=Vw.hasOwnProperty,Hw=Fw.call(Object),Gw=[et,tt,nt],Yw=[it,ot],Qw=[st,ct],Jw=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.connectHOC,n=void 0===t?Ve:t,i=e.mapStateToPropsFactories,o=void 0===i?Yw:i,r=e.mapDispatchToPropsFactories,a=void 0===r?Gw:r,s=e.mergePropsFactories,c=void 0===s?Qw:s,d=e.selectorFactory,l=void 0===d?ft:d;return function(e,t,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=r.pure,d=void 0===s||s,u=r.areStatesEqual,p=void 0===u?mt:u,f=r.areOwnPropsEqual,h=void 0===f?Ue:f,m=r.areStatePropsEqual,b=void 0===m?Ue:m,g=r.areMergedPropsEqual,w=void 0===g?Ue:g,v=uw(r,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),y=ht(e,o,"mapStateToProps"),x=ht(t,a,"mapDispatchToProps"),_=ht(i,c,"mergeProps");return n(l,dw({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:y,initMapDispatchToProps:x,initMergeProps:_,pure:d,areStatesEqual:p,areOwnPropsEqual:h,areStatePropsEqual:b,areMergedPropsEqual:w},v))}}(),Xw="Comm100 Live Chat",Zw=P(bt,"Chat"),$w=P(bt,"Pre-chat"),Kw=P(bt,"Offline-Message"),ev=P(bt,"Invitation"),tv=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return n.enableGa?i.update=i.update.bind(i):i.update=function(){},i.componentDidMount=i.update,i.componentDidUpdate=i.update,i.shouldComponentUpdate=Tb(i,["invitation","windowTab","chatStatus"]),i}return qt(t,e),t.prototype.update=function(){var e=this.props;if(e.invitation||e.chatStatus===mo)return void ev();var t=this.props.windowTab;if(t===So){var n=this.props.guid;(Ju(n)||{}).gaChat||(Xu(n,{gaChat:!0}),Zw())}t===ko&&$w(),t===To&&Kw()},t.prototype.render=function(){return n("div",null)},t}(I);tv.propTypes={enableGa:mb,windowTab:hb,invitation:yb({}),guid:hb,chatStatus:hb};var nv=gt(tv),iv=function(e){function t(){return zt(this,t),Vt(this,e.apply(this,arguments))}return qt(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.name,n=(e.children,Lt(e,["name","children"])),i=Ii.createElement(t);Object.assign(i,n),Ii.head.appendChild(i)},t.prototype.shouldComponentUpdate=function(){return!1},t.prototype.render=function(){return n("div",null)},t}(I);iv.propTypes={name:hb.isRequired};var ov="render",rv=function(e,t){return function(i){return function(o){function r(t,n){zt(this,r);var i=Vt(this,o.call(this,t,n)),a=n&&n[ov]?n[ov]():{};return i.replacer=a[e],i}return qt(r,o),r.prototype.componentDidMount=function(){if(this.useOrigin=!this.replacer,!this.useOrigin){var e=this.replacer(t?this.props[t]:void 0);if(!e)return void(this.useOrigin=!0);this.element.innerHTML="",this.element.appendChild(e)}},r.prototype.shouldComponentUpdate=function(){return this.useOrigin},r.prototype.render=function(){var e=this;return this.replacer?n("div",{ref:function(t){e.element=t}},n(i,this.props)):n(i,this.props)},r}(I)}},av=function(e,t){return function(i){function o(){if(this.useOrigin=!this.replacer,!this.useOrigin){var e=this.replacer();if(!e)return void(this.useOrigin=!0);this.element.innerHTML="",this.element.appendChild(e)}}function r(e,t){var n=s[t];if(n)return e[n]}var a,s=(a={},a[ko]="livechat.prechat."+e,a[So]="livechat.chat."+e,a[Ao]="livechat.postChat."+e,a[To]="livechat.offlineMessage."+e,a);return function(e){function a(t,n){zt(this,a);var i=Vt(this,e.call(this,t,n));i.apis=n&&n[ov]?n[ov]():{},i.replacer=r(i.apis,t.tab),i.useOrigin=!0;var s=o.bind(i);return i.componentDidMount=s,i.componentDidUpdate=function(e){e.tab!==i.props.tab&&s()},i}return qt(a,e),a.prototype.componentWillReceiveProps=function(e){e.tab!==this.props.tab&&(this.useOrigin||(this.element.innerHTML="",this.useOrigin=!0),this.replacer=r(this.apis,e.tab))},a.prototype.shouldComponentUpdate=function(){return this.useOrigin},a.prototype.render=function(){var e=this;return n("div",{ref:function(t){e.element=t},className:t},n(i,this.props))},a}(I)}},sv=function(e){function t(){return zt(this,t),Vt(this,e.apply(this,arguments))}return qt(t,e),t.prototype.getChildContext=function(){var e;return e={},e[ov]=this.props.getRender,e},t.prototype.render=function(){return this.props.children[0]},t}(I),cv={border:"none"},dv=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return i.shouldComponentUpdate=Tb(i,["online"]),i}return qt(t,e),t.prototype.componentDidMount=function(){this.props.onMounted(this.props.button.id),sm("livechat.button.show",this.props.button)},t.prototype.componentWillUnmount=function(){sm("livechat.button.hide",this.props.button)},t.prototype.render=function(){var e=this.props,t=e.online,i=e.button,o=e.onClick,r=e.onlineSrc,a=e.offlineSrc;return n("a",{href:i.chatWindowLink,onClick:o},n("img",{src:t?r:a,alt:"chat button",style:cv}))},t}(I);dv.propTypes={campaignId:gb.isRequired,onlineSrc:hb.isRequired,offlineSrc:hb.isRequired,online:mb.isRequired,siteId:gb.isRequired,onClick:bb.isRequired,onMounted:bb.isRequired};var lv=function(e){return function(t){return function(i){function o(){return zt(this,o),Vt(this,i.apply(this,arguments))}return qt(o,i),o.prototype.componentDidMount=function(){if(t){var i=Cb(this,t),o=i.render,r=i.unmount;this.shouldComponentUpdate=function(t){return o(n(e,t)),!1},o(n(e,this.props)),this.componentWillUnmount=r}},o.prototype.render=function(){return n("div",null)},o}(I)}},uv=yb({type:wb(["monitor"]).isRequired,id:gb.isRequired,isHideOffline:mb}).isRequired,pv=yb({type:wb(["text"]).isRequired,text:hb.isRequired,id:gb.isRequired,isHideOffline:mb}).isRequired,fv=yb({type:wb(["image"]).isRequired,id:gb.isRequired,isHideOffline:mb,imageOnline:hb.isRequired,imageOffline:hb.isRequired}).isRequired,hv=yb({type:wb(["topLeft","topMiddle","topRight","leftMiddle","rightMiddle","bottomLeft","bottomMiddle","bottomRight","centered"]).isRequired,xoffset:pb([yb({px:gb.isRequired}),yb({percent:gb.isRequired})]),yoffset:pb([yb({px:gb.isRequired}),yb({percent:gb.isRequired})])}).isRequired,mv=yb({type:wb(["float"]).isRequired,id:gb.isRequired,isHideOffline:mb,position:hv,mobilePosition:hv,imageOnline:hb.isRequired,imageOffline:hb.isRequired,mobileImageOnline:hb.isRequired,mobileImageOffline:hb.isRequired}).isRequired,bv=yb({type:wb(["float"]).isRequired,id:gb.isRequired,isHideOffline:mb,position:hv,imageOnline:hb.isRequired,imageOffline:hb.isRequired,mobileTextOnline:hb.isRequired,mobileTextOffline:hb.isRequired,mobileColor:hb.isRequired,mobileBackgroundColor:hb.isRequired}).isRequired,gv=pb([mv,bv]),wv=yb({type:wb(["adaptive"]).isRequired,id:gb.isRequired,isHideOffline:mb,color:hb.isRequired}).isRequired,vv=rv("livechat.button","button"),yv=function(e){return n(dv,jt({},e,{campaignId:e.button.id,onlineSrc:e.button.imageOnline,offlineSrc:e.button.imageOffline}))};yv.propTypes={button:fv};var xv=lv(gt(vv(yv))),_v=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return i.shouldComponentUpdate=Tb(i,["button.text"]),i}return qt(t,e),t.prototype.componentDidMount=function(){this.props.onMounted(this.props.button.id),sm("livechat.button.show",this.props.button)},t.prototype.componentWillUnmount=function(){sm("livechat.button.hide",this.props.button)},t.prototype.render=function(){var e=this.props,t=e.button,i=e.onClick;return n("a",{href:t.chatWindowLink,onClick:i},t.text)},t}(I);_v.propTypes={button:pv,onMounted:bb.isRequired,onClick:bb.isRequired};var Cv=lv(gt(vv(_v))),kv=function(e){function t(){return zt(this,t),Vt(this,e.apply(this,arguments))}return qt(t,e),t.prototype.componentDidMount=function(){this.props.onMounted(this.props.button.id)},t.prototype.render=function(){return null},t}(I),Sv=lv(vv(kv)),Av=function(e,t){return{position:"relative",display:"block",height:44,lineHeight:"44px",padding:"0 35px",borderRadius:"5px 5px 0 0",color:e,backgroundColor:t,boxShadow:"rgba(0,0,0,.2) 0 2px 25px",fontWeight:"bold",fontSize:20,textAlign:"center",textDecoration:"none",whiteSpace:"nowrap"}},Tv=function(e){function t(){return zt(this,t),Vt(this,e.apply(this,arguments))}return qt(t,e),t.prototype.componentDidMount=function(){this.props.onMounted(this.props.button.id),sm("livechat.button.show",this.props.button)},t.prototype.componentWillUnmount=function(){sm("livechat.button.hide",this.props.button)},t.prototype.render=function(){var e=this.props,t=e.onClick,i=e.online,o=e.button,r=o.chatWindowLink,a=i?o.mobileTextOnline:o.mobileTextOffline;return a?n("a",{href:r,onClick:t,style:Av(o.mobileColor,o.mobileBackgroundColor)},a):null},t}(I);Tv.propTypes={onClick:bb.isRequired,onMounted:bb.isRequired,online:mb.isRequired,siteId:gb.isRequired,button:gv};var Iv=Math.pow(2,31),Rv=Iv-6,Pv=Iv-5,Mv=Iv-4,Ov=Iv-2,Ev=Iv-1,Nv=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return i.shouldComponentUpdate=Tb(i,["online"]),i}return qt(t,e),t.prototype.render=function(){var e=this.props.isMobile,t=void 0,i=void 0;if(e){var o=this.props.button;o.mobileImageOnline?(t=n(dv,jt({},this.props,{campaignId:o.id,onlineSrc:o.mobileImageOnline,offlineSrc:o.mobileImageOffline})),i=o.mobilePosition):(t=n(Tv,this.props),i={type:"bottomMiddle",yoffset:{px:0}})}else{var r=this.props.button;i=r.position,t=n(dv,jt({},this.props,{campaignId:r.id,onlineSrc:r.imageOnline,offlineSrc:r.imageOffline}))}return n("div",{style:qd(i,Rv)},t)},t}(I);Nv.propTypes={button:gv,isMobile:mb.isRequired};var Wv=lv(gt(vv(Nv))),Bv=e(function(e){!function(){function t(){for(var e=[],i=0;i<arguments.length;i++){var o=arguments[i];if(o){var r=void 0===o?"undefined":Dt(o);if("string"===r||"number"===r)e.push(o);else if(Array.isArray(o))e.push(t.apply(null,o));else if("object"===r)for(var a in o)n.call(o,a)&&o[a]&&e.push(a)}}return e.join(" ")}var n={}.hasOwnProperty;e.exports?e.exports=t:window.classNames=t}()}),Dv=function(e){return function(t,n){var i=function(){e(),n&&n()};0===t?i():setTimeout(i,t)}},zv=function(e,t){return function(){var n=e.props[t];n&&n()}},jv=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return i.animated=!1,i.onMinimized=Dv(zv(i,"onMinimized")),i.onOpened=Dv(zv(i,"onOpened")),i.onInitalAnimated=Dv(zv(i,"animated")),i.callback=i.callback.bind(i),i.componentDidMount=i.callback,i}return qt(t,e),t.prototype.componentDidUpdate=function(e){var t=this.props.status;e.status!==t&&this.callback()},t.prototype.callback=function(){var e=this,t=this.props,n=t.status,i=t.windowStyle,o=t.first,r=i===yo;o&&n===Fo&&this.onInitalAnimated(ro?3625:0,function(){e.animated=!0}),n!==Fo&&n!==Lo&&(n===Vo&&this.onMinimized(r||!ro?0:500),n!==jo&&n!==Do||this.onOpened(r||!ro?0:500))},t.prototype.render=function(){var e=this.props,t=e.onClick,i=e.href,o=e.count,r=e.status,a=e.first,s=e.avatar,c=e.online,d=e.ifRipple,l=e.windowStyle,u=e.isMobile,p=l===yo;return n("div",{className:Bv(r===Fo&&"chatButtonContainer",u&&"chatButtonContainer--mobile",r!==Fo&&"chatButtonMask chatButtonMask--"+l,!p&&r===Do&&"chatButtonMask--fullscreen",r===jo&&s&&"chatButton--maximizedAsChatting",r===jo&&!s&&"chatButtonMask--fullscreen",r===Vo&&s&&"chatButtonMask--top chatButton--minimizedAsChatting",r===Lo&&s&&"chatButton--avatar",r===Vo&&!s&&"chatButtonMask--fullscreen",c?"online":"offline")},n("a",{className:Bv(d&&"chatButton--ripple","chatButton",!this.animated&&a&&"chatButton--scaleAnimation",!p&&r===Do&&"chatButton--maximized",r===jo&&!s&&"chatButton--maximized",r===Vo&&!s&&"chatButton--minimized"),href:i,onClick:t},n("svg",{className:"chatButton__svg-chat",x:"0px",y:"0px",width:"38px",height:"38px",viewBox:"0 0 32 32",enableBackground:"new 0 0 32 32"},n("path",{className:"chatButton__svg-chat-path",stroke:"#fff",strokeWidth:"1",strokeMiterlimit:"5",d:"M5.1,2C2.9,2,1,3.8,1,6v15.7c0,2.3,1.9,4,4.1,4l4.2-0.3L9.2,31l8-6.9l9.8-1.3c2.3,0,4.1-1.9,4.1-4V8.6c0-2.2-1.9-4-4.1-4L5.1,2L5.1,2z"})),n("div",{className:"chatButton__dot"},n("span",{className:Bv("dot__element",r===Fo&&"animated dot__element--animation animated-frames18 animated-delayFrames36")}),n("span",{className:Bv("dot__element",r===Fo&&"animated dot__element--animation animated-frames18 animated-delayFrames39")}),n("span",{className:Bv("dot__element",r===Fo&&"animated dot__element--animation animated-frames18 animated-delayFrames42")})),!!o&&o>0&&n("div",{className:"chatButton--newMessage"},o)))},t}(I);jv.propTypes={windowStyle:wb([yo,vo,wo]).isRequired,onClick:bb.isRequired,href:hb.isRequired,count:gb,status:wb(Object.keys(Uo).map(function(e){return Uo[e]})),first:mb,avatar:hb,online:mb.isRequired,animated:bb};var qv=function(e){function t(){zt(this,t);var n=Vt(this,e.call(this));return n.state={titleColor:"#fff"},n.ele=null,n}return qt(t,e),t.prototype.componentWillMount=function(){var e=qi(this.props.invitation.themeColor,.2),t=Vi(this.props.invitation.themeColor);this.setState({titleColor:t?"#000":"#fff",buttonColor:e})},t.prototype.render=function(){var e=this,t=this.props.invitation;return n("div",{id:"Comm100-mobile-invitation",style:{position:"fixed",zIndex:Pv,width:"auto",height:"auto",overflow:"hidden",top:"0px",bottom:"0px",left:"0px",right:"0px",fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, sans-serif',backgroundColor:"rgba(0, 0, 0, 0.65)"}},n("div",{ref:function(t){e.ele=t},id:"Comm100-mobile-invitation-content",style:{position:"absolute",width:"88%",zIndex:Mv,top:"50%",left:"50%",marginLeft:"0px",marginTop:"0px",boxSizing:"border-box",maxWidth:"380px",transform:"translate(-50%, -50%)"}},n("div",{style:{height:"30px",lineHeight:"30px",width:"auto",backgroundColor:t.themeColor,fontSize:"14px",color:"white",textShadow:"rgba(0, 0, 0, 0.3) 1px 1px",paddingLeft:"14px",borderTopLeftRadius:"5px",borderTopRightRadius:"5px"}},n("span",{style:{fontWeight:"bold",color:this.state.titleColor,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"100%",display:"block"}},t.title)),n("div",{style:{backgroundColor:"white",borderBottomLeftRadius:"5px",borderBottomRightRadius:"5px",borderWidth:"1px",borderColor:t.themeColor,borderStyle:"solid",width:"auto"}},n("span",{style:{padding:"30px",textAlign:"center",fontSize:"20px",lineHeight:"25px",color:"#333",fontWeight:"bold",whiteSpace:"pre-wrap",maxHeight:"220px",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",webkitLineClamp:"10",webkitBoxOrient:"vertical"}},t.message),n("div",{style:{margin:"0 auto",width:"260px",height:"65px"}},n("a",{style:{display:"block",width:"120px",height:"35px",fontSize:"14px",color:"#333",textAlign:"center",float:"left",borderRadius:"3px",lineHeight:"35px",backgroundColor:"#ddd",marginRight:"20px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"100%"},onClick:function(){return e.props.onRefuse(t)}},t.refuseText),n("a",{style:{display:"block",width:"120px",height:"35px",fontSize:"14px",color:"#333",textAlign:"center",float:"left",borderRadius:"3px",lineHeight:"35px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"100%",backgroundColor:this.state.buttonColor},onClick:function(){e.props.onAccept(t)}},t.acceptText)))))},t}(I);qv.protoTypes={onAccept:lb.func,onRefuse:lb.func,invitation:lb.shape({style:lb.oneOf([Tc,Rc]).isRequired,message:lb.string.isRequired,ifModal:lb.bool.isRequired,themeColor:lb.string,acceptText:lb.string,refuseText:lb.string})};var Lv=rv("livechat.invitation.popupImage","invitation")(qv),Vv={minimize:"minimize",popup:"popup",embedded:"embedded",close:"close",inputSend:"input-send",plus:"plus",bubble:"bubble",bubbleContent:"bubble-content",bubbleLine:"bubble-line",sendfile:"sendfile",kb:"icon-kb",kbActive:"icon-kb-active",media:"icon-media",mediaActive:"icon-media-active"},Fv=function(e){function t(){zt(this,t);var n=Vt(this,e.call(this));return n.state={isHover:!1},n.updateHoverStatus=n.updateHoverStatus.bind(n),n.shouldComponentUpdate=Tb(n,["type","disabled","size","className","color","id","onClick"],["isHover"]),n}return qt(t,e),t.prototype.updateHoverStatus=function(e){this.setState({isHover:e})},t.prototype.render=function(){var e=this,t=this.props,i=t.type,o=t.color,r=t.size,a=t.className,s=t.hoverScale,c=t.disabled,d=t.hoverColor,l=Lt(t,["type","color","size","className","hoverScale","disabled","hoverColor"]),u={large:"icon-large",small:"icon-small",larger:"icon-larger",smaller:"icon-smaller",normal:"icon-normal"}[r]||"",p=i.split("#"),f=p[0],h=p[1],m=Bv("icon","icon-"+f,u,s&&"icon-hover",a),b=l.style||{};return d&&this.state.isHover?b.color=d:o?b.color=o:h&&(b.color="#"+h),"number"==typeof r&&(b.fontSize=r+"px"),c&&(b.color="#999"),n("i",jt({},l,{style:b,className:m,onMouseOver:function(){return e.updateHoverStatus(!0)},onMouseOut:function(){return e.updateHoverStatus(!1)}}))},t}(I);Fv.defaultProps={hoverScale:!1},Fv.propTypes={type:lb.oneOf(Object.keys(Vv).map(function(e){return Vv[e]})),color:lb.string,disabled:lb.bool,size:lb.oneOfType([lb.oneOf(["larger","large","normal","small","smaller"]),lb.number]),hoverScale:lb.bool,className:lb.string,hoverColor:lb.string},Fv.types=Vv;var Uv=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return i.refuse=null,i.timer=null,i.updateHeight=i.updateHeight.bind(i),n.onHeightChange&&n.onHeightChange(1/0),i.shouldComponentUpdate=$i("shouldComponentUpdate")(Tb(i,["invitation.ifShow","invitation.message","invitation.agentName"])),i}return qt(t,e),t.prototype.componentDidMount=function(){var e=this;so(this.element,this.updateHeight),this.props.onHeightChange&&(this.cb=setTimeout(function(){e.cb=null;var t=e.element.getBoundingClientRect();0===t.height?e.cb=setInterval(function(){if(!e.element)return clearInterval(e.cb),void(e.cb=null);var t=e.element.getBoundingClientRect();t.height>0&&(e.props.onHeightChange(t.height),clearInterval(e.cb),e.cb=null)},100):e.props.onHeightChange(t.height)},375))},t.prototype.componentDidUpdate=function(){if(this.props.onHeightChange){var e=this.element.getBoundingClientRect();this.props.onHeightChange(e.height)}},t.prototype.componentWillUnmount=function(){this.props.onHeightChange&&this.props.onHeightChange(0),this.timer&&(clearTimeout(this.timer),this.timer=null),this.cb&&(clearTimeout(this.cb),this.cb=null),co(this.element,this.updateHeight)},t.prototype.updateHeight=function(){var e=this.element.getBoundingClientRect().height;0!==e&&(clearTimeout(this.cb),
clearInterval(this.cb),this.cb=null,this.props.onHeightChange&&this.props.onHeightChange(e))},t.prototype.render=function(){var e=this,t=this.props.invitation;return n("div",{style:{"z-index":Mv},className:Bv("invitation invitation-show",t.winType===yo?"invitation--bubble":"",t.winType===vo?"invitation--circle":"",t.winType===wo?"invitation--classic":""),onClick:function(){e.props.onAccept(t)},ref:function(t){e.element=t}},t.agentName&&n("div",{className:"invitation__name"},t.agentName),n("div",{className:"invitation__message"},t.message),n("div",{className:"invitation__close",onClick:function(n){Bi(n),e.props.onRefuse(t)},ref:function(t){e.refuse=t}},n(Fv,{type:Vv.close,size:12})),n("div",{className:"invitation__type animated invitation-showType"},t.textTypeHere))},t}(I);Uv.protoTypes={onAccept:lb.func,onRefuse:lb.func,invitation:lb.shape({ifShow:lb.bool,style:lb.oneOf([Tc,Rc]).isRequired,message:lb.string.isRequired,agentName:lb.string,textTypeHere:lb.string})};var Hv,Gv=function(e){function t(){zt(this,t);var n=Vt(this,e.call(this));return n.state={backgroundImageLoad:!1},n.isInvitationViewed=!1,n}return qt(t,e),t.prototype.componentDidMount=function(){var e=this,t=new Image;t.src=this.props.invitation.image,t.onload=function(){e.setState({backgroundImageLoad:!0,imgWidth:t.width,imgheight:t.height})}},t.prototype.render=function(){var e=this,t=this.props.invitation;return n("div",null,t.ifModal&&n("div",{style:{zIndex:Pv,position:"fixed",top:0,bottom:0,left:0,right:0,background:"rgba(0, 0, 0, 0.3)",display:this.state.backgroundImageLoad?"":"none"}}),n("div",{style:Object.assign(qd(t.position,Pv),{zIndex:Mv,position:"fixed",background:"url(' "+t.image+"') no-repeat scroll 0% 0% transparent;",width:this.state.imgWidth,height:this.state.imgheight,display:this.state.backgroundImageLoad?"":"none"})},n("img",{src:t.image,onClick:function(){e.props.onAccept(t)},id:"invitationAcceptImg",style:{visibility:"show",display:"inline",zIndex:Mv},alt:""}),n("div",{onClick:function(n){e.props.onRefuse(t),n.stopPropagation(),n.cancelBubble=!0},style:{position:"absolute",cursor:"pointer",left:t.closeArea.left,top:t.closeArea.top,width:t.closeArea.width,height:t.closeArea.height,zIndex:Pv,background:"rgba(0,0,0,0)"}}),n("div",{onClick:function(){e.props.onAccept(t)},style:{position:"absolute",cursor:"pointer",left:t.messageArea.left,top:t.messageArea.top,width:t.messageArea.width,height:t.messageArea.height,textAlign:t.textAlign,fontSize:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight,textDecoration:t.textDecoration,color:t.color,fontFamily:t.fontFamily,background:"rgba(0,0,0,0)",overflow:"hidden",whiteSpace:"pre-wrap"}},t.message)))},t}(I),Yv=rv("livechat.invitation.popupImage","invitation")(Gv),Qv=(Hv={},Hv[Pc]=Lv,Hv[Rc]=Uv,Hv[Tc]=Yv,Hv),Jv=function(e){var t=Qv[e.invitation.type];return t?n(t,e):null},Xv="*,::after,::before{box-sizing:border-box}html{margin:0;font-size:15px}body{margin:0;font-family:\"SourceSans Pro\",Arial;line-height:1.42857143;overflow:hidden}.animated{-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-fill-mode:both;animation-fill-mode:both}.animated-frames18{-webkit-animation-duration:.75s;animation-duration:.75s}.animated-delayFrames36{-webkit-animation-delay:1.5s;animation-delay:1.5s}.animated-delayFrames39{-webkit-animation-delay:1.625s;animation-delay:1.625s}.animated-delayFrames42{-webkit-animation-delay:1.75s;animation-delay:1.75s}.chatButtonMask{position:fixed;right:30px;bottom:30px;width:70px;height:70px;z-index:9}.chatButtonMask--hidden{display:none}.chatButton::after,.chatButton::before{display:block;content:''}.chatButtonMask--fullscreen{width:calc(100% - 60px);height:calc(100% - 60px);overflow:hidden}.chatButtonContainer--mobile.chatButtonMask--fullscreen,.window--mobile .chatButtonMask--fullscreen{width:100%;height:100%;right:0;bottom:0}.chatButtonMask--circle.chatButtonMask--fullscreen{height:calc(100% - 75px)}.chatButtonMask--classic,.window--classic .chatButtonMask--fullscreen{border-radius:2px 2px 0 0}.chatButtonMask--circle,.window--circle .chatButtonMask--fullscreen{border-radius:20px 20px 0 0}.chatButtonMask--bubble,.window--bubble .chatButtonMask--fullscreen{border-radius:8px 8px 0 0}.chatButton,.chatButton::after,.chatButtonContainer{width:70px;height:70px;border-radius:100%}.chatButtonMask.chatButtonMask--top{width:70px;height:70px;-webkit-transform:translate3d(-315px,-485px,0) scale(.714,.714);transform:translate3d(-315px,-485px,0) scale(.714,.714);z-index:2147483638}.chatButtonMask.chatButtonMask--circle.chatButtonMask--top{-webkit-transform:translate3d(-137.5px,-475px,0) scale(1.214,1.214);transform:translate3d(-137.5px,-475px,0) scale(1.214,1.214)}.chatButtonContainer{position:fixed;bottom:30px;right:30px;z-index:2147483636}.chatButton,.chatButton::before{position:absolute;right:0;bottom:0}.chatButton{box-shadow:0 1px 6px rgba(0,0,0,.3)}.chatButton:hover{box-shadow:0 3px 10px rgba(0,0,0,.3);transition:box-shadow .4s cubic-bezier(.785,.135,.15,.86);cursor:pointer;will-change:transform}.chatButton--minimized.chatButton{box-shadow:none}.chatButton::before{top:0;left:0;border-radius:50%}.chatButton--ripple::before{-webkit-animation:at-ripple 16.417s linear 3.625s infinite;animation:at-ripple 16.417s linear 3.625s infinite}.chatButton--scaleAnimation{-webkit-animation:chatButton--scaleAnimated 3.5s both cubic-bezier(.785,.135,.15,.86);animation:chatButton--scaleAnimated 3.5s both cubic-bezier(.785,.135,.15,.86)}.chatButtonContainer--mobile .chatButton--scaleAnimation{-webkit-animation:chatButton__mobile--scaleAnimated 3.5s both cubic-bezier(.785,.135,.15,.86);animation:chatButton__mobile--scaleAnimated 3.5s both cubic-bezier(.785,.135,.15,.86)}.chatButton--maximized{-webkit-animation:xAxis .5s forwards cubic-bezier(.02,.01,.21,1);animation:xAxis .5s forwards cubic-bezier(.02,.01,.21,1)}.chatButton--maximized::after{content:'';-webkit-animation:yAxis .5s forwards cubic-bezier(.545,.075,.72,.93);animation:yAxis .5s forwards cubic-bezier(.545,.075,.72,.93)}.chatButton--maximized .chatButton__dot,.chatButton--maximized .chatButton__svg-chat{display:none}.chatButton--minimized{-webkit-animation:xAxis-back .5s forwards cubic-bezier(.785,.135,.15,.86);animation:xAxis-back .5s forwards cubic-bezier(.785,.135,.15,.86)}.chatButton--minimized::after{content:'';position:relative;box-shadow:0 1px 6px rgba(0,0,0,.3);-webkit-animation:yAxis-back .5s forwards cubic-bezier(.02,.01,.21,1);animation:yAxis-back .5s forwards cubic-bezier(.02,.01,.21,1)}.chatButton__svg-chat{position:absolute;left:17px;top:19px;z-index:9}.chatButton__svg-chat-path{stroke-dasharray:120;stroke-dashoffset:120;fill:#fff}.chatButton--scaleAnimation .chatButton__svg-chat-path{-webkit-animation-timing-function:ease-in-out;animation-timing-function:ease-in-out;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-name:dash,fillIn;animation-name:dash,fillIn;-webkit-animation-duration:417ms,167ms;animation-duration:417ms,167ms;-webkit-animation-delay:625ms,1.042s;animation-delay:625ms,1.042s}@-webkit-keyframes dash{from{stroke-dashoffset:120}to{stroke-dashoffset:0}}@keyframes dash{from{stroke-dashoffset:120}to{stroke-dashoffset:0}}@-webkit-keyframes fillIn{from{fill-opacity:0}to{fill-opacity:1}}@keyframes fillIn{from{fill-opacity:0}to{fill-opacity:1}}.chatButton__dot{position:absolute;top:22px;left:26px;z-index:9}.dot__element{display:inline-block;width:5px;height:5px;margin-left:3px;border-radius:100%;position:relative}.chatButton--avatar::after,.chatButton--maximizedAsChatting::after,.chatButton--minimizedAsChatting::after{width:70px;height:70px;background-repeat:no-repeat;background-size:cover;border-radius:100%;content:''}.dot__element:first-child{margin-left:0}@-webkit-keyframes dot--animation{0%{opacity:0;-webkit-transform:translateY(-35px);transform:translateY(-35px)}100%{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes dot--animation{0%{opacity:0;-webkit-transform:translateY(-35px);transform:translateY(-35px)}100%{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}}.dot--animation{-webkit-animation-name:dot--animation;animation-name:dot--animation;-webkit-animation-delay:1.209s;animation-delay:1.209s}@-webkit-keyframes dot__element--animation{0%{top:-35px;opacity:0}100%,39%{top:0;opacity:1}67%{top:-8px;opacity:1}}@keyframes dot__element--animation{0%{top:-35px;opacity:0}100%,39%{top:0;opacity:1}67%{top:-8px;opacity:1}}.chatButton--scaleAnimation .dot__element--animation{-webkit-animation-name:dot__element--animation;animation-name:dot__element--animation}@-webkit-keyframes xAxis{100%{-webkit-transform:translateX(-170px);transform:translateX(-170px)}}@keyframes xAxis{100%{-webkit-transform:translateX(-170px);transform:translateX(-170px)}}@-webkit-keyframes yAxis{78%{-webkit-transform:translateY(-185px) translateZ(0) scale(8.97,8.97);transform:translateY(-185px) translateZ(0) scale(8.97,8.97);background-color:#fff}89%{-webkit-transform:translateY(-185px) translateZ(0) scale(10.235,10.235);transform:translateY(-185px) translateZ(0) scale(10.235,10.235);background-color:#fff;box-shadow:0 0 2px rgba(0,0,0,.2)}100%{-webkit-transform:translateY(-185px) translateZ(0) scale(11.5,11.5);transform:translateY(-185px) translateZ(0) scale(11.5,11.5);background-color:#fff;box-shadow:0 0 2px rgba(0,0,0,.2)}}@keyframes yAxis{78%{-webkit-transform:translateY(-185px) translateZ(0) scale(8.97,8.97);transform:translateY(-185px) translateZ(0) scale(8.97,8.97);background-color:#fff}89%{-webkit-transform:translateY(-185px) translateZ(0) scale(10.235,10.235);transform:translateY(-185px) translateZ(0) scale(10.235,10.235);background-color:#fff;box-shadow:0 0 2px rgba(0,0,0,.2)}100%{-webkit-transform:translateY(-185px) translateZ(0) scale(11.5,11.5);transform:translateY(-185px) translateZ(0) scale(11.5,11.5);background-color:#fff;box-shadow:0 0 2px rgba(0,0,0,.2)}}@-webkit-keyframes xAxis-back{0%{-webkit-transform:translateX(-170px);transform:translateX(-170px)}100%{-webkit-transform:translateX(0);transform:translateX(0)}}@keyframes xAxis-back{0%{-webkit-transform:translateX(-170px);transform:translateX(-170px)}100%{-webkit-transform:translateX(0);transform:translateX(0)}}@-webkit-keyframes yAxis-back{0%{-webkit-transform:translateY(-185px) translateZ(0) scale(11.5,11.5);transform:translateY(-185px) translateZ(0) scale(11.5,11.5);background-color:#fff;box-shadow:0 0 2px rgba(0,0,0,.2);z-index:10}11%{-webkit-transform:translateY(-185px) translateZ(0) scale(10.235,10.235);transform:translateY(-185px) translateZ(0) scale(10.235,10.235);background-color:#fff;box-shadow:0 0 2px rgba(0,0,0,.2);z-index:10}22%{-webkit-transform:translateY(-185px) translateZ(0) scale(8.97,8.97);transform:translateY(-185px) translateZ(0) scale(8.97,8.97);background-color:#fff;box-shadow:none;z-index:10}99.99%{z-index:10}100%{z-index:8}}@keyframes yAxis-back{0%{-webkit-transform:translateY(-185px) translateZ(0) scale(11.5,11.5);transform:translateY(-185px) translateZ(0) scale(11.5,11.5);background-color:#fff;box-shadow:0 0 2px rgba(0,0,0,.2);z-index:10}11%{-webkit-transform:translateY(-185px) translateZ(0) scale(10.235,10.235);transform:translateY(-185px) translateZ(0) scale(10.235,10.235);background-color:#fff;box-shadow:0 0 2px rgba(0,0,0,.2);z-index:10}22%{-webkit-transform:translateY(-185px) translateZ(0) scale(8.97,8.97);transform:translateY(-185px) translateZ(0) scale(8.97,8.97);background-color:#fff;box-shadow:none;z-index:10}99.99%{z-index:10}100%{z-index:8}}@-webkit-keyframes chatButton--scaleAnimated{0%{-webkit-transform:scale(0);transform:scale(0);-webkit-transform-origin:100% 100%;transform-origin:100% 100%;opacity:0}7.04%{-webkit-transform:scale(2.5);transform:scale(2.5);-webkit-transform-origin:100% 100%;transform-origin:100% 100%;opacity:1}11.26%{-webkit-transform:scale(2);transform:scale(2);-webkit-transform-origin:100% 100%;transform-origin:100% 100%;opacity:1}15.48%{-webkit-transform:scale(2.15);transform:scale(2.15);-webkit-transform-origin:100% 100%;transform-origin:100% 100%;opacity:1}21.12%,78.87%{-webkit-transform:scale(2);transform:scale(2);-webkit-transform-origin:100% 100%;transform-origin:100% 100%;opacity:1}85.91%{-webkit-transform:scale(.8);transform:scale(.8);-webkit-transform-origin:100% 100%;transform-origin:100% 100%;opacity:1}90.13%{-webkit-transform:scale(1);transform:scale(1);-webkit-transform-origin:100% 100%;transform-origin:100% 100%;opacity:1}94.354%{-webkit-transform:scale(.97);transform:scale(.97);-webkit-transform-origin:100% 100%;transform-origin:100% 100%;opacity:1}100%{-webkit-transform:scale(1);transform:scale(1);-webkit-transform-origin:100% 100%;transform-origin:100% 100%;opacity:1}}@keyframes chatButton--scaleAnimated{0%{-webkit-transform:scale(0);transform:scale(0);-webkit-transform-origin:100% 100%;transform-origin:100% 100%;opacity:0}7.04%{-webkit-transform:scale(2.5);transform:scale(2.5);-webkit-transform-origin:100% 100%;transform-origin:100% 100%;opacity:1}11.26%{-webkit-transform:scale(2);transform:scale(2);-webkit-transform-origin:100% 100%;transform-origin:100% 100%;opacity:1}15.48%{-webkit-transform:scale(2.15);transform:scale(2.15);-webkit-transform-origin:100% 100%;transform-origin:100% 100%;opacity:1}21.12%,78.87%{-webkit-transform:scale(2);transform:scale(2);-webkit-transform-origin:100% 100%;transform-origin:100% 100%;opacity:1}85.91%{-webkit-transform:scale(.8);transform:scale(.8);-webkit-transform-origin:100% 100%;transform-origin:100% 100%;opacity:1}90.13%{-webkit-transform:scale(1);transform:scale(1);-webkit-transform-origin:100% 100%;transform-origin:100% 100%;opacity:1}94.354%{-webkit-transform:scale(.97);transform:scale(.97);-webkit-transform-origin:100% 100%;transform-origin:100% 100%;opacity:1}100%{-webkit-transform:scale(1);transform:scale(1);-webkit-transform-origin:100% 100%;transform-origin:100% 100%;opacity:1}}@-webkit-keyframes chatButton__mobile--scaleAnimated{0%{-webkit-transform:scale(0);transform:scale(0);-webkit-transform-origin:100% 100%;transform-origin:100% 100%;opacity:0}7.04%{-webkit-transform:scale(2);transform:scale(2);-webkit-transform-origin:100% 100%;transform-origin:100% 100%;opacity:1}11.26%{-webkit-transform:scale(1.5);transform:scale(1.5);-webkit-transform-origin:100% 100%;transform-origin:100% 100%;opacity:1}15.48%{-webkit-transform:scale(1.65);transform:scale(1.65);-webkit-transform-origin:100% 100%;transform-origin:100% 100%;opacity:1}21.12%,78.87%{-webkit-transform:scale(1.5);transform:scale(1.5);-webkit-transform-origin:100% 100%;transform-origin:100% 100%;opacity:1}85.91%{-webkit-transform:scale(.8);transform:scale(.8);-webkit-transform-origin:100% 100%;transform-origin:100% 100%;opacity:1}90.13%{-webkit-transform:scale(1);transform:scale(1);-webkit-transform-origin:100% 100%;transform-origin:100% 100%;opacity:1}94.354%{-webkit-transform:scale(.97);transform:scale(.97);-webkit-transform-origin:100% 100%;transform-origin:100% 100%;opacity:1}100%{-webkit-transform:scale(1);transform:scale(1);-webkit-transform-origin:100% 100%;transform-origin:100% 100%;opacity:1}}@keyframes chatButton__mobile--scaleAnimated{0%{-webkit-transform:scale(0);transform:scale(0);-webkit-transform-origin:100% 100%;transform-origin:100% 100%;opacity:0}7.04%{-webkit-transform:scale(2);transform:scale(2);-webkit-transform-origin:100% 100%;transform-origin:100% 100%;opacity:1}11.26%{-webkit-transform:scale(1.5);transform:scale(1.5);-webkit-transform-origin:100% 100%;transform-origin:100% 100%;opacity:1}15.48%{-webkit-transform:scale(1.65);transform:scale(1.65);-webkit-transform-origin:100% 100%;transform-origin:100% 100%;opacity:1}21.12%,78.87%{-webkit-transform:scale(1.5);transform:scale(1.5);-webkit-transform-origin:100% 100%;transform-origin:100% 100%;opacity:1}85.91%{-webkit-transform:scale(.8);transform:scale(.8);-webkit-transform-origin:100% 100%;transform-origin:100% 100%;opacity:1}90.13%{-webkit-transform:scale(1);transform:scale(1);-webkit-transform-origin:100% 100%;transform-origin:100% 100%;opacity:1}94.354%{-webkit-transform:scale(.97);transform:scale(.97);-webkit-transform-origin:100% 100%;transform-origin:100% 100%;opacity:1}100%{-webkit-transform:scale(1);transform:scale(1);-webkit-transform-origin:100% 100%;transform-origin:100% 100%;opacity:1}}.chatButton--maximizedAsChatting{-webkit-transform:scale(.714,.714);-ms-transform:scale(.714,.714);transform:scale(.714,.714);-webkit-animation:chatButton--maximizedAsChattingyAxis .5s cubic-bezier(.545,.075,.72,.93) 125ms both;animation:chatButton--maximizedAsChattingyAxis .5s cubic-bezier(.545,.075,.72,.93) 125ms both}.chatButtonMask--circle.chatButton--maximizedAsChatting{-webkit-transform:scale(1.214,1.214);-ms-transform:scale(1.214,1.214);transform:scale(1.214,1.214);-webkit-animation:chatButton--maximizedAsChattingyAxisCircle .5s cubic-bezier(.545,.075,.72,.93) 125ms both;animation:chatButton--maximizedAsChattingyAxisCircle .5s cubic-bezier(.545,.075,.72,.93) 125ms both}.chatButton--maximizedAsChatting .chatButton::before{-webkit-animation:none;animation:none}.chatButton--maximizedAsChatting::after{display:block;-webkit-animation:chatButton--maximizedAsChattingxAxis .5s cubic-bezier(.02,.01,.23,.76) 125ms both;animation:chatButton--maximizedAsChattingxAxis .5s cubic-bezier(.02,.01,.23,.76) 125ms both}.chatButtonMask--circle.chatButton--maximizedAsChatting::after{-webkit-animation:chatButton--maximizedAsChattingxAxisCircle .5s cubic-bezier(.02,.01,.23,.76) 125ms both;animation:chatButton--maximizedAsChattingxAxisCircle .5s cubic-bezier(.02,.01,.23,.76) 125ms both}.chatButton--maximizedAsChatting .chatButton--newMessage{display:none}.chatButton--avatar .chatButton,.chatButton--maximizedAsChatting .chatButton,.chatButton--minimizedAsChatting .chatButton{box-shadow:none}.chatButton--minimizedAsChatting{z-index:11;-webkit-animation:chatButton--minimizedAsChattingyAxis .5s cubic-bezier(.02,.01,.32,1.02) both;animation:chatButton--minimizedAsChattingyAxis .5s cubic-bezier(.02,.01,.32,1.02) both}.chatButtonMask--circle.chatButton--minimizedAsChatting{-webkit-animation:chatButton--minimizedAsChattingyAxisCircle .5s cubic-bezier(.02,.01,.32,1.02) both;animation:chatButton--minimizedAsChattingyAxisCircle .5s cubic-bezier(.02,.01,.32,1.02) both}.chatButton--minimizedAsChatting .chatButton::after,.chatButton--minimizedAsChatting .chatButton::before{-webkit-animation:none;animation:none}.chatButton--avatar::after,.chatButton--minimizedAsChatting::after{display:block;box-shadow:0 1px 6px rgba(0,0,0,.3);-webkit-animation:chatButton--minimizedAsChattingxAxis .5s cubic-bezier(.43,.17,.72,.93) both;animation:chatButton--minimizedAsChattingxAxis .5s cubic-bezier(.43,.17,.72,.93) both}.chatButton--avatar::after{-webkit-animation:none;animation:none}.chatButtonMask--circle.chatButton--minimizedAsChatting::after{-webkit-animation:chatButton--minimizedAsChattingxAxisCircle .5s cubic-bezier(.43,.17,.72,.93) both;animation:chatButton--minimizedAsChattingxAxisCircle .5s cubic-bezier(.43,.17,.72,.93) both}.chatButton--avatar .chatButton::after,.chatButton--maximizedAsChatting .chatButton::after,.chatButton--minimizedAsChatting .chatButton::after{background-color:transparent!important}.chatButton--avatar .chatButton,.chatButton--minimizedAsChatting .chatButton{z-index:1}.chatButton--avatar .chatButton .chatButton__dot,.chatButton--avatar .chatButton .chatButton__svg-chat,.chatButton--maximizedAsChatting .chatButton .chatButton__dot,.chatButton--maximizedAsChatting .chatButton .chatButton__svg-chat,.chatButton--minimizedAsChatting .chatButton .chatButton__dot,.chatButton--minimizedAsChatting .chatButton .chatButton__svg-chat{display:none}.chatButton--minimizedAsChatting .chatButton__agentAvatarImg{position:absolute;display:block;width:100%;height:100%;border-radius:100%}.chatButton--newMessage{z-index:9}@-webkit-keyframes newincoming{0%{-webkit-transform:scale(0);transform:scale(0)}75%{-webkit-transform:scale(1.2);transform:scale(1.2)}100%{-webkit-transform:scale(1);transform:scale(1)}}@-webkit-keyframes at-ripple{0%{box-shadow:0 0 0 0 #dadada}100%,8.631%{box-shadow:0 0 0 25px rgba(218,218,218,0)}}@keyframes at-ripple{0%{box-shadow:0 0 0 0 #dadada}100%,8.631%{box-shadow:0 0 0 25px rgba(218,218,218,0)}}.at-ripple{-webkit-animation-name:at-ripple;animation-name:at-ripple}.invitation{position:fixed;z-index:2147483637;cursor:pointer;right:35px;bottom:125px;width:250px;padding-top:17px;border:1px solid #ddd;background:#fff}.invitation__message,.invitation__name{font-size:1em;padding:0 25px;overflow:hidden;text-overflow:ellipsis}.invitation--bubble{border-radius:8px}.invitation--bubble .invitation__type{border-radius:0 0 8px 8px}.invitation--classic{border-radius:4px}.invitation--classic .invitation__type{border-radius:0 0 4px 4px}.invitation--circle{border-radius:20px}.invitation--circle .invitation__type{border-radius:0 0 20px 20px}.invitation__name{color:#000;font-family:\"SourceSans Pro Bold\";max-width:100%;white-space:nowrap}.invitation__message{line-height:18px;margin-bottom:19px;color:#666;max-height:180px;display:-webkit-box;-webkit-line-clamp:10;-webkit-box-orient:vertical}.invitation__close{position:absolute;top:0;right:0;padding:5px 8px;font-size:1.33em;color:#333;line-height:1;cursor:pointer}.invitation__type{height:35px;line-height:35px;padding:0 25px;background:#f0f0f0;color:#bbb;font-size:.93em;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.invitation::after,.invitation::before{content:'';position:absolute;width:0;height:0}.invitation::before{right:20px;bottom:-22px;border:11px solid transparent;border-top-color:#ddd}.invitation::after{right:22px;bottom:-18px;border:9px solid transparent;border-top-color:#f0f0f0}@-webkit-keyframes invitation-show{0%{-webkit-transform:scale(0);transform:scale(0);opacity:0;-webkit-transform-origin:calc(100% - 29px) calc(100% + 18px);transform-origin:calc(100% - 29px) calc(100% + 18px)}100%{-webkit-transform:scale(1);transform:scale(1);opacity:1;-webkit-transform-origin:calc(100% - 29px) calc(100% + 18px);transform-origin:calc(100% - 29px) calc(100% + 18px)}}@keyframes invitation-show{0%{-webkit-transform:scale(0);transform:scale(0);opacity:0;-webkit-transform-origin:calc(100% - 29px) calc(100% + 18px);transform-origin:calc(100% - 29px) calc(100% + 18px)}100%{-webkit-transform:scale(1);transform:scale(1);opacity:1;-webkit-transform-origin:calc(100% - 29px) calc(100% + 18px);transform-origin:calc(100% - 29px) calc(100% + 18px)}}.invitation-show{-webkit-animation:invitation-show 375ms cubic-bezier(.785,.135,.15,.86) both;animation:invitation-show 375ms cubic-bezier(.785,.135,.15,.86) both}@-webkit-keyframes invitation-showType{0%{-webkit-transform:translateY(35px);transform:translateY(35px);opacity:0}100%{-webkit-transform:translateY(0);transform:translateY(0);opacity:1}}@keyframes invitation-showType{0%{-webkit-transform:translateY(35px);transform:translateY(35px);opacity:0}100%{-webkit-transform:translateY(0);transform:translateY(0);opacity:1}}.invitation-showType{-webkit-animation:invitation-showType .25s cubic-bezier(.785,.135,.15,.86) 125ms both;animation:invitation-showType .25s cubic-bezier(.785,.135,.15,.86) 125ms both}@-webkit-keyframes invitation-showmessage{0%{opacity:0}100%{opacity:1}}@keyframes invitation-showmessage{0%{opacity:0}100%{opacity:1}}.invitation-showmessage{-webkit-animation-name:invitation-showmessage;animation-name:invitation-showmessage;-webkit-animation-duration:167ms;animation-duration:167ms;-webkit-animation-delay:292ms;animation-delay:292ms;white-space:pre-wrap;word-break:break-word}.chatButton--newMessage{position:absolute;right:0;top:4px;width:16px;height:16px;line-height:16px;background:rgba(222,57,57,.9);border-radius:100%;color:#fff;text-align:center;font-size:.8em;-webkit-animation:newincoming .4s cubic-bezier(.785,.135,.15,.86) both;animation:newincoming .4s cubic-bezier(.785,.135,.15,.86) both}@keyframes newincoming{0%{-webkit-transform:scale(0);transform:scale(0)}75%{-webkit-transform:scale(1.2);transform:scale(1.2)}100%{-webkit-transform:scale(1);transform:scale(1)}}",Zv=3.625,$v=function(e,t,n,i){return{border:"none",width:e,height:t,position:"fixed",right:n,bottom:i,zIndex:Rv}},Kv="chatButton",ey="dot__element",ty=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n)),o=$u()||{},r=o.animated,a=n.online&&!r;return a&&Ku({animated:!0}),i.state={showAnimation:a,invHeight:0},i.style=[n.fontCSS,Xv,".online ."+Kv+":after,.online ."+ey+"{","background-color:"+n.button.color,"}",".online ."+Kv+":before{","animation:at-ripple 16.417s linear "+Zv+"s infinite","}",".offline ."+Kv+":after,.offline ."+ey+"{","background-color:#bbb","}"].join(""),i}return qt(t,e),t.prototype.componentDidMount=function(){this.props.onMounted(this.props.button.id),sm("livechat.button.show",this.props.button);var e=Ii.querySelector("#"+this.props.button.divId+" iframe");e&&e.getBoundingClientRect()},t.prototype.componentWillUnmount=function(){sm("livechat.button.hide",this.props.button),this.timer||clearTimeout(this.timer)},t.prototype.render=function(){var e=this,t=this.state.showAnimation,i=t?200:122,o=i,r=this.props,a=r.button,s=r.onClick,c=r.onAnimated,d=r.windowStatus,l=r.messageCount,u=r.windowStyle,p=r.isMobile,f=this.props.bubbleInvitation,h=a.iframeStyle,m=h&&h.width,b=h&&h.height;d===Do?u===wo?(i=p?"100%":m||460,o=p?"100%":b||620):u===vo?(i=p?"100%":m||420,o=p?"100%":b||610):u===yo&&(i=p?"100%":m||380,o="100%"):f&&!t&&(i=290,o=this.state.invHeight===1/0?"100%":this.state.invHeight+130);var g=this.props.button.chatWindowLink,w=0,v=0;if(d===Do&&a.iframeStyle){var y=a.iframeStyle;null!=y.right&&(w=y.right),null!=y.left&&(w=this.props.width-(y.left+y.width)),null!=y.bottom&&(v=y.bottom),null!=y.top&&(v=this.props.height-(y.top+y.height))}return n(Ob,{style:$v(i,o,w,v),innerCss:this.style},f&&d===Fo&&!t&&n(Jv,{invitation:{winType:f.winType,ifShow:!0,id:f.id,type:f.type,message:f.message,agentName:f.agentName,textTypeHere:f.textTypeHere,campaignId:f.campaignId,isManual:f.isManual},onAccept:this.props.onAccept,onRefuse:this.props.onRefuse,onHeightChange:function(t){e.setState({invHeight:t})}}),n(jv,{isMobile:p,avatar:f&&f.avatar,ifRipple:!f&&this.props.online,"chatButton--ripple":!0,onClick:s,href:g,count:l,status:d,first:t,online:this.props.online,animated:function(){e.setState({showAnimation:!1})},onOpened:c,campaignId:a.id,windowStyle:a.windowStyle}))},t}(I);ty.propTypes={online:mb.isRequired,button:wv,onClick:bb.isRequired,onMounted:bb.isRequired,onAnimated:bb.isRequired,siteId:gb.isRequired,windowStatus:wb([Fo,Do]).isRequired,onAccept:bb,onRefuse:bb,bubbleInvitation:yb({ifShowInvitation:mb,message:hb,agentName:hb,textTypeHere:hb}),fontCSS:hb,chatWindowLink:hb};var ny,iy=lv(gt(vv(ty))),oy=function(e,t){if(!e&&t)return!1;if(!t&&e)return!1;if(!t&&!e)return!0;var n=[].concat(e),i=[].concat(t);return n.length===i.length&&n.every(function(e,t){return e.timespan===i[t].timespan&&e.duration===i[t].duration})},ry=function(e){var t=function(t){function i(e){zt(this,i);var n=Vt(this,t.call(this,e));return n.timer=null,n.hOnline=[].concat(e.hOnline),n.setTimespan=n.setTimespan.bind(n),n.heartbeat=n.heartbeat.bind(n),n.tick=n.tick.bind(n),n.registerStop=n.registerStop.bind(n),n.clean=n.clean.bind(n),n.initial=n.initial.bind(n),n}return qt(i,t),i.prototype.componentDidMount=function(){this.props.hOnline&&this.initial()},i.prototype.componentDidUpdate=function(e){e.hOnline&&!this.props.hOnline&&this.clean(),!e.hOnline&&this.props.hOnline&&(this.hOnline=[].concat(this.props.hOnline),this.initial()),!oy(e.hOnline,this.props.hOnline)&&e.hOnline&&this.props.hOnline&&(this.clean(),this.hOnline=[].concat(this.props.hOnline),this.initial())},i.prototype.componentWillUnmount=function(){this.clean()},i.prototype.setTimespan=function(){var e=this.hOnline.shift();e&&(this.duration=e.duration,this.timespanTimer=setTimeout(this.setTimespan,1e3*e.timespan))},i.prototype.initial=function(){this.setTimespan(),this.tick(),this.registerStop(),this.props.hDelay||this.props.hCallback(this.props)},i.prototype.heartbeat=function(){if(this.props.hCallback(this.props),!this.duration)return void(this.heartbeatTimer=null);this.tick()},i.prototype.tick=function(){var e=void 0!==this.props.hOffline?this.props.hOffline:this.duration;this.heartbeatTimer=setTimeout(this.heartbeat,1e3*e)},i.prototype.registerStop=function(){void 0!==this.props.hStop&&(this.stopTimer=setTimeout(this.clean,1e3*this.props.hStop))},i.prototype.clean=function(){this.heartbeatTimer&&clearTimeout(this.heartbeatTimer),this.timespanTimer&&clearTimeout(this.timespanTimer),this.stopTimer&&clearTimeout(this.stopTimer),this.heartbeatTimer=null,this.timespanTimer=null,this.stopTimer=null},i.prototype.render=function(){var t=this.props,i=(t.hOnline,t.hOffline,t.hCallback,t.hStop,Lt(t,["hOnline","hOffline","hCallback","hStop"]));return n(e,i)},i}(I);return t.propTypes={hCallback:bb,hOnline:pb([yb({duration:gb.isRequired,timespan:gb.isRequired}),ub(yb({duration:gb.isRequired,timespan:gb.isRequired}))]),hOffline:gb,hStop:gb,hDelay:mb},gt(t)},ay={},sy=2,cy=ci(10)(function(e,t){return t(e)}),dy=(ny={},ny.monitor=Sv,ny.text=Cv,ny.image=xv,ny.float=Wv,ny.adaptive=iy,ny),ly=function(e){var t=e.divId;if("float"===e.type)if(void 0!==ay[t])t=ay[t];else{var n="comm100-float-button-"+sy,i=Ii.createElement("div");i.id=n;var o=Ii.getElementById("comm100-container");o.appendChild(i),ay[t]=n,t=n,sy+=1}return cy(Ii.getElementById(t),dy[e.type])},uy=function(e){function t(){return zt(this,t),Vt(this,e.apply(this,arguments))}return qt(t,e),t.prototype.componentDidMount=function(){this.props.onMounted()},t.prototype.render=function(){var e=this,t=this.props,i=t.bubbleInvitation,o=t.buttons,r=t.siteId,a=t.onClick,s=t.onEachMounted,c=t.status,d=t.windowStatus,l=t.width,u=t.height,p=t.isMobile,f=t.messageCount,h=t.onAccept,m=t.onRefuse,b=t.onAnimated,g=t.windowStyle;return n("div",null,o.map(function(t){var o=ly(t),w=c[t.id];return n(o,{fontCSS:e.props.fontCSS,bubbleInvitation:i,messageCount:f,onAccept:h,onRefuse:m,online:w,button:t,siteId:r,onClick:function(n){n.preventDefault(),a(t,e.props.windowStatus)},onMounted:s,key:t.id,isMobile:p,windowStatus:d,onAnimated:b,windowStyle:g,width:l,height:u})}))},t}(I);uy.propTypes={buttons:ub(pb([uv,pv,fv,gv,wv])).isRequired,status:fb(mb).isRequired,onClick:bb.isRequired,onAnimated:bb.isRequired,onEachMounted:bb.isRequired,siteId:gb.isRequired,windowStatus:wb([Fo,Lo,Vo,zo,Do,jo,qo]).isRequired,isMobile:mb.isRequired,fontCSS:hb};var py=ry(gt(uy)),fy=function(e){return e!==Fo&&e!==Do},hy=function(){Array.prototype.slice.call(Ii.querySelectorAll(".comm100-powered-by")).forEach(function(e){e.parentNode.removeChild(e)})},my=function(e){var t=ha(e),n=pa(e),i=Ma(e),o=E(e),r=fy(t)?void 0:or(e),a=o&&o.messageCount?o.messageCount:0,s=void 0;Object.keys(n).every(function(e){return!n[e]})&&(s=rr(e));var c=ar(e);return{fontCSS:Fd(Go(e),P(Ko,e)),buttons:i,status:n,windowStatus:t,messageCount:a,bubbleInvitation:o,siteId:fa(e),isMobile:Ca(e),onMounted:hy,hOnline:r,hOffline:s,hStop:c,hDelay:!0,windowStyle:Yc(e,la(e)),width:Na(e),height:Ea(e)}},by=function(e){return{onEachMounted:function(){e({type:"onMounted"})},onClick:function(t,n){n===Fo&&(e(Yp(t.id)),e(Jp(t.id)),sm("livechat.button.click",t))},onAccept:function(t){var n=t.campaignId,i=t.id;sm("livechat.invitation.accept",i),e(Gp()),e(Jp(n))},onRefuse:function(t){var n=t.id;sm("livechat.invitation.refuse",n),e(Qp())},hCallback:function(){e(ph())},onAnimated:function(){e($p())}}},gy=Jw(my,by)(py),wy=function(e){return{invitation:O(e)}},vy=function(e){return{onAccept:function(t){sm("livechat.invitation.accept",t.id),e(Gp(t.campaignId)),e(Jp(t.campaignId))},onRefuse:function(t){sm("livechat.invitation.refuse",t.id),e(Qp())}}},yy=Jw(wy,vy)(Jv),xy=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));i.title=Ii.title,i.flag=!0,i.flashTitle=i.flashTitle.bind(i),i.resetTitle=i.resetTitle.bind(i);var o=i.updateTitle.bind(i);return i.componentDidMount=o,i.componentDidUpdate=o,
i.shouldComponentUpdate=Tb(i,["message"]),i}return qt(t,e),t.prototype.componentWillUnmount=function(){this.timer&&this.resetTitle()},t.prototype.flashTitle=function(){var e=this;this.timer=setTimeout(function(){Ii.title=e.flag?e.message+" - "+e.title:e.title,e.flag=!e.flag,e.flashTitle()},1e3)},t.prototype.updateTitle=function(){var e=this.props.message;if(!e)return void this.resetTitle();this.timer||(this.flag=!0,this.flashTitle()),this.message=e},t.prototype.resetTitle=function(){clearTimeout(this.timer),this.timer=null,Ii.title=this.title},t.prototype.render=function(){return""},t}(I),_y=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return i.state={isMouseDown:!1},i.doDrag=i.doDrag.bind(i),i.stopDrag=i.stopDrag.bind(i),i.startDrag=i.startDrag.bind(i),i.mouseStart={x:0,y:0},i.divStart={x:0,y:0},i}return qt(t,e),t.prototype.startDrag=function(e){var t=e;Di(t),this.mouseStart.x=t.clientX,this.mouseStart.y=t.clientY,this.setState({isMouseDown:!0}),this.divStart.x=this.props.width-this.props.right-this.props.ifrWidth,this.divStart.y=this.props.height-this.props.bottom-this.props.ifrHeight,Ii.addEventListener("mousemove",this.doDrag),Ii.addEventListener("mouseup",this.stopDrag)},t.prototype.doDrag=function(e){var t=e;if(t||t.button){var n=t.clientX-this.mouseStart.x+this.divStart.x,i=t.clientY-this.mouseStart.y+this.divStart.y,o=this.props.width-this.props.ifrWidth,r=this.props.height-this.props.ifrHeight;n=n<0?0:n,i=i<0?0:i,n=n>o?o:n,i=i>r?r:i;var a=this.props.width-n-this.props.ifrWidth,s=this.props.height-i-this.props.ifrHeight;this.props.ifrPositionChanged(a,s)}else this.stopDrag()},t.prototype.stopDrag=function(){this.setState({isMouseDown:!1}),Ii.removeEventListener("mousemove",this.doDrag),Ii.removeEventListener("mouseup",this.stopDrag)},t.prototype.render=function(){var e=void 0;e=this.state.isMouseDown?this.props.bottom:this.props.bottom+this.props.ifrHeight-(this.props.barHeight+this.props.ifrOffsetTop);var t=void 0;return t=this.state.isMouseDown?this.props.right:this.props.right+this.props.ifrWidth-(this.props.barWidth+this.props.ifrOffsetLeft),n("div",{className:"movediv",onMouseDown:this.startDrag,style:{height:this.state.isMouseDown?this.props.ifrHeight:this.props.barHeight,width:this.state.isMouseDown?this.props.ifrWidth:this.props.barWidth,backgroundColor:"rgba(0,0,0,0)",bottom:e,right:t,position:"fixed",cursor:"move",zIndex:Ev}})},t}(I);_y.defaultProps={ifrOffsetLeft:30,ifrOffsetTop:30,barHeight:24,barWidth:315},_y.protoTypes={ifrWidth:lb.number,ifrHeight:lb.number,ifrDefaultLeft:lb.number,ifrDefaultTop:lb.number,ifrOffsetLeft:lb.number,ifrOffsetTop:lb.number,barHeight:lb.number,barWidth:lb.number,ifrPositionChanged:lb.func};var Cy=1,ky=2,Sy=3,Ay=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return i.bodyDisableScroll=n.onMount,i.bodyEnableScroll=n.onUnmount,i}return qt(t,e),t.prototype.componentDidMount=function(){this.props.show?this.bodyDisableScroll():this.bodyEnableScroll()},t.prototype.componentDidUpdate=function(e){var t=this.props.show;e.show!==t&&(t?this.bodyDisableScroll():this.bodyEnableScroll())},t.prototype.componentWillUnmount=function(){this.bodyEnableScroll()},t.prototype.render=function(){var e=this,t=this.props,i=t.windowStatus,o=t.isMobile,r=t.isRightToLeft,a=t.isPoppedOut,s=t.windowStyle,c=t.children,d=t.windowTab,l=t.chatStatus,u=t.env,p=t.isIPad,f=t.show,h=t.showAvatar,m=Bv(i===Vo&&"window--minimized",d===So&&Bv(l===ho&&"animation--waiting",l===bo&&"animation--chatting",l===go&&"animation-chatted"));return n("div",{className:Bv("embedded-window",o&&"window--mobile",p&&"window--ipad",o&&u===ky&&"window--mobileVertical",o&&u===Cy&&"window--mobileHorizontal",eo&&"window--ie"),ref:function(t){e.element=t},style:{display:f?"":"none"}},n("div",{id:"whole-window",className:Bv(h&&"window--bio","whole-window","window--animated",r?"window--rtl":"",a?"":"window--embedded",xo(s),m,no?"window--ie9":"")},n("div",{id:"main",className:"main-container"},c)))},t}(I);Ay.propTypes={windowStatus:lb.oneOf(Object.keys(Uo).map(function(e){return Uo[e]})).isRequired,isMobile:lb.bool,title:lb.string,isRightToLeft:lb.bool,isPoppedOut:lb.bool,windowStyle:lb.oneOf([yo,vo,wo]).isRequired,children:lb.element,windowTab:lb.oneOf(Object.keys(Io).map(function(e){return Io[e]})).isRequired};var Ty={position:"fixed",width:"100%",height:"100%",overflow:"hidden",top:0,bottom:0,right:0,left:0,touchAction:"none"},Iy={position:"fixed",top:0,right:0,bottom:0,left:0,backgroundColor:"rgba(0,0,0,0.15)",zIndex:Ov},Ry={display:"none"},Py=function(e,t,n){if(!n)return{right:0,bottom:0};var i=n.right||0,o=n.bottom||0;return void 0!==n.top&&(o=t-n.top-n.height),void 0!==n.left&&(i=e-n.left-n.width),{right:i,bottom:o}},My=function(){},Oy=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n)),o=Py(n.width,n.height,n.iframeStyle),r=o.right,a=o.bottom;i.state={showMessage:!0,invHeight:0,left:n.iframeStyle&&n.iframeStyle.left,top:n.iframeStyle&&n.iframeStyle.top,right:r,bottom:a},i.setWinSize=function(){},i.getWinStyle=function(){},i.getExWinStyle=function(){},i.getInnerCss=i.getInnerCss.bind(i),i.updateIframe=function(){return My},i.shouldComponentUpdate=Tb(i,["windowStatus","windowTab","children","windowStyle","unread","lastMessage","avatar","title","seed","expandWindow","width","height"],["showMessage","invHeight","right","bottom"]);var s=n.onFocusToggle;return i.onBlur=P(s,!1),i.onFocus=function(){var e=i.props.windowStatus;e!==zo&&e!==qo||s(!0)},i.getChildren=i.getChildren.bind(i),i.getExWin=i.getExWin.bind(i),i.getDragBar=i.getDragBar.bind(i),i.getBubbleBar=i.getBubbleBar.bind(i),i.getMinIcon=i.getMinIcon.bind(i),i.onMount=i.onMount.bind(i),i.bodyEnableScroll=i.bodyEnableScroll.bind(i),i.bodyDisableScroll=i.bodyDisableScroll.bind(i),i}return qt(t,e),t.prototype.componentWillReceiveProps=function(e){var t=this.props;e.width===t.width&&e.height===t.height||null==this.state.top&&null==this.state.left||this.setState(Py(e.width,e.height,e.iframeStyle)),e.unread>t.unread&&this.setState({showMessage:!0}),e.isMinimized&&this.setState({bottom:0,right:0})},t.prototype.componentWillUnmount=function(){if(this.winIframe){var e=this.winIframe.contentWindow;e&&(e.removeEventListener("focus",this.onFocus),e.removeEventListener("blur",this.onBlur)),this.timer&&(clearTimeout(this.timer),this.timer=null),this.bodyEnableScroll()}},t.prototype.onMount=function(e){this.winIframe=e;var t=e.contentWindow;t.addEventListener("focus",this.onFocus),t.addEventListener("blur",this.onBlur),this.props.onMounted&&this.props.onMounted()},t.prototype.getInnerCss=function(){var e=this.props,t=[e.fontCSS,Vd(lo,e.mainColor),Xv,".online .chatButton:after,.online .dot__element{","background-color:"+e.mainColor,"}",".offline .chatButton:after,.offline .dot__element{","background-color:#bbb","}",".main-container{background-image:"+(e.background||"#fff")+"}"].join(""),n="";return e.avatar&&(n=".chatButton--avatar:after,.chatButton--minimizedAsChatting:after,.chatButton--maximizedAsChatting:after{background-image:url("+e.avatar+")}"),[t,"@keyframes chatButton--minimizedAsChattingyAxis {0% {transform: scale(0.714, 0.714) translateY(-"+(this.winHeight-135)/.714+"px);}100% {transform: scale(1, 1) translateY(0);}}@keyframes chatButton--minimizedAsChattingxAxis {0% {transform: translateX(-"+(this.winWidth-145)/.714+"px);}100% {transform: translateX(0);}}@keyframes chatButton--minimizedAsChattingyAxisCircle {0% {transform: scale(1.214, 1.214) translateY(-"+(this.winHeight-105)/1.214+"px);}100% {transform: scale(1, 1) translateY(0);}}@keyframes chatButton--minimizedAsChattingxAxisCircle {0% {transform: translateX(-"+(this.winWidth/2-65)/1.214+"px);}100% {transform: translateX(0);}}@keyframes chatButton--maximizedAsChattingxAxis {0% {transform: translateX(0);}100% {transform: translateX(-"+(this.winWidth-145)/.714+"px);}}@keyframes chatButton--maximizedAsChattingyAxis {0% {transform: scale(1, 1) translateY(0);}100% {transform: scale(0.714, 0.714) translateY(-"+(this.winHeight-135)/.714+"px);}}@keyframes chatButton--maximizedAsChattingxAxisCircle {0% {transform: translateX(0);}100% {transform: translateX(-"+(this.winWidth/2-65)/1.214+"px);}}@keyframes chatButton--maximizedAsChattingyAxisCircle {0% {transform: scale(1, 1) translateY(0);}100% {transform: scale(1.214, 1.214) translateY(-"+(this.winHeight-30-35-35)/1.214+"px);}}",n,e.customCss]},t.prototype.getChildren=function(e){var t=this.props,i=t.windowStatus,o=t.isMobile,r=t.title,a=t.isRightToLeft,s=t.isPoppedOut,c=t.windowStyle,d=t.children,l=t.windowTab,u=t.chatStatus,p=t.isIPad,f=t.showAvatar,h=i===Vo,m=i===zo,b=i===qo;return n(Ay,{show:h||m||b,windowStatus:i,isMobile:o,title:r,isRightToLeft:a,isPoppedOut:s,windowStyle:c,windowTab:l,chatStatus:u,isIPad:p,env:e,onUnmount:this.bodyEnableScroll,onMount:this.bodyDisableScroll,showAvatar:f},d)},t.prototype.getExWin=function(e,t){var i=this.props,o=i.expandWindow,r=i.fontCSS,a=i.onFocusToggle,s=Ry,c=void 0;return o&&(s=this.getExWinStyle(e,t),c=n(o,{ToogleChatWinFocused:a})),n(Ob,{key:"exWin",id:"extend_window_container",style:s,innerCss:[r,"@font-face{font-family:\"SourceSans Pro\";src:url(fonts/SourceSansPro-Regular.woff) format('woff'),url(fonts/SourceSansPro-Regular.ttf) format('truetype'),url(fonts/SourceSansPro-Regular.svg#SourceSans-Pro) format('svg')}@font-face{font-family:\"SourceSans Pro Italic\";src:url(fonts/SourceSansPro-It.woff) format('woff'),url(fonts/SourceSansPro-It.ttf) format('truetype'),url(fonts/SourceSansPro-It.svg#SourceSans-Pro-Italic) format('svg')}@font-face{font-family:\"SourceSans Pro Bold\";src:url(fonts/SourceSansPro-Semibold.woff) format('woff'),url(fonts/SourceSansPro-Semibold.ttf) format('truetype'),url(fonts/SourceSansPro-Semibold.svg#SourceSans-Pro-Semibold) format('svg')}@font-face{font-family:\"SourceSans Pro Light\";src:url(fonts/SourceSansPro-Light.woff) format('woff'),url(fonts/SourceSansPro-Light.ttf) format('truetype'),url(fonts/SourceSansPro-Light.svg#SourceSans-Pro-Light) format('svg')}html{margin:0;font-size:15px}*,::after,::before{box-sizing:border-box}body{margin:0;font-family:\"SourceSans Pro\",Arial;font-size:1em;line-height:1.42857143}.clearfix::after{content:\"\";display:block;clear:both}.expandWindow{position:absolute;width:100%;bottom:0;top:0;left:0;box-shadow:0 0 45px rgba(0,0,0,.2)}.expandWindow--embedded{width:calc(100% - 30px);bottom:30px;top:30px;left:30px}.expandWindow--circle{padding-right:20px;top:45px}.mediaChatWindow{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;width:100%;height:100%;background-color:#333;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;text-align:center;position:absolute;left:0;overflow:hidden}.popup-window .mediaChatWindow{-webkit-box-flex:0;-ms-flex:0 0 500px;flex:0 0 500px;position:relative}.mediaChatWindow.hidden{display:none}.mediaChatWindow__avatarImg{width:100px;height:100px;background-color:#fff;border-radius:100%;border:none}.mediaChatWindow__agentName{max-width:250px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;margin:0 auto}.mediaChatWindow--audioIncoming .mediaChatWindow__agentName,.mediaChatWindow--audioRequesting .mediaChatWindow__agentName,.mediaChatWindow--videoIncoming .mediaChatWindow__agentName,.mediaChatWindow--videoRequesting .mediaChatWindow__agentName{font-size:1.2em;color:#fff;padding:20px 0 15px}.mediaChatWindow__waiting{font-size:.93em;color:#fff;opacity:.5;height:18px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}@-webkit-keyframes blink{0%,100%{opacity:.2}50%{opacity:1}}@keyframes blink{0%,100%{opacity:.2}50%{opacity:1}}.mediaChatWindow__waitingAni span{animation:blink both 1.4s infinite;-webkit-animation:blink both 1.4s infinite}.mediaChatWindow__waitingAni span:nth-child(2){animation-delay:.2s;-webkit-animation-delay:.2s}.mediaChatWindow__waitingAni span:nth-child(3){animation-delay:.4s;-webkit-animation-delay:.4s}.mediaChatWindow__iconfont{font-size:.93em;padding-right:10px;position:relative;top:4px}.mediaChatWindow__textAudio,.mediaChatWindow__textVideo{display:-webkit-box;display:-ms-flexbox;display:flex}.mediaChatWindow__buttons{margin-top:40px;width:310px}.mediaChatWindow__button{width:55px;height:55px;border-radius:50%;font-size:2.33em;color:#fff;display:inline-block;margin:0 48px;line-height:55px;cursor:pointer;transition:opacity .3s}.mediaChatWindow__button svg{width:55px;height:55px}.mediaChatWindow__button .mediaChatWindow__iconfont{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.mediaChatWindow__button:hover{opacity:.8}.mediaChatWindow__button:active{box-shadow:inset 0 2px 5px rgba(0,0,0,.25)}.mediaChatWindow__button--accept{background:url(images/phone-accept.svg) center no-repeat}.mediaChatWindow__button--hangup{background:url(images/phone-refuse.svg) center no-repeat}.mediaChatWindow--audioChatting .mediaChatWindow__button--accept,.mediaChatWindow--audioIncoming .mediaChatWindow__textVideo,.mediaChatWindow--audioRequesting .mediaChatWindow__button--accept,.mediaChatWindow--audioRequesting .mediaChatWindow__textVideo,.mediaChatWindow--videoChatting .mediaChatWindow__button--accept,.mediaChatWindow--videoIncoming .mediaChatWindow__textAudio,.mediaChatWindow--videoRequesting .mediaChatWindow__button--accept,.mediaChatWindow--videoRequesting .mediaChatWindow__textAudio{display:none}.mediaChatWindow--audioChatting .mediaChatWindow__chatting,.mediaChatWindow--audioIncoming .mediaChatWindow__requesting,.mediaChatWindow--audioRequesting .mediaChatWindow__requesting,.mediaChatWindow--videoChatting .mediaChatWindow__chatting,.mediaChatWindow--videoIncoming .mediaChatWindow__requesting,.mediaChatWindow--videoRequesting .mediaChatWindow__requesting{display:block}.mediaChatWindow--audioChatting .mediaChatWindow__requesting,.mediaChatWindow--audioIncoming .mediaChatWindow__chatting,.mediaChatWindow--audioIncoming .mediaChatWindow__waitingAni,.mediaChatWindow--audioRequesting .mediaChatWindow__chatting,.mediaChatWindow--videoChatting .mediaChatWindow__requesting,.mediaChatWindow--videoIncoming .mediaChatWindow__chatting,.mediaChatWindow--videoIncoming .mediaChatWindow__waitingAni,.mediaChatWindow--videoRequesting .mediaChatWindow__chatting{display:none}.mediaChatWindow__requesting .mediaChatWindow__agentAvatar{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.mediaChatWindow--audioChatting .mediaChatWindow__agentAvatar{display:block}.mediaChatWindow__chatting{width:100%;height:100%;margin:20px 0;position:relative}.mediaChatWindow__chattingAgent{color:#fff;float:left}.mediaChatWindow__chatting .mediaChatWindow__agentName{font-size:1.2em;color:#fff}.mediaChatWindow--videoChatting .mediaChatWindow__chatting{display:-webkit-box;display:-ms-flexbox;display:flex}.mediaChatWindow--videoChatting .mediaChatWindow__chattingAgent{position:absolute;left:20px;top:25px;text-align:left}.mediaChatWindow--videoChatting .mediaChatWindow__buttons{position:absolute;bottom:25px;width:100%}.popup-window .mediaChatWindow--videoChatting .mediaChatWindow__buttons{bottom:10px}.mediaChatWindow--videoChatting .icon-video,.mediaChatWindow--videoChatting .mediaChatWindow__agentImg,.mediaChatWindow--videoChatting .mediaChatWindow__chatTypeText{display:none}.mediaChatWindow__chattingDuration{font-size:.93em;float:left}.mediaChatWindow--audioChatting .mediaChatWindow__chatting{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.mediaChatWindow--audioChatting .mediaChatWindow__chattingAgent{position:static}.mediaChatWindow--audioChatting .mediaChatWindow__agentName{padding:20px 0 15px}.mediaChatWindow__chattingTime{display:-webkit-box;display:-ms-flexbox;display:flex;opacity:.5;height:18px}.mediaChatWindow--audioChatting .mediaChatWindow__chattingTime{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.mediaChatWindow--audioChatting .mediaChatWindow__chattingDuration{float:none}.mediaChatWindow--audioChatting .mediaChatWindow__chatTypeText{font-size:.93em;padding-right:10px}.mediaChatWindow--audioChatting video{display:none}.mediaChatWindow__remoteVideo:hover .mediaChatWindow__buttons{display:block}.mediaChatWindow__remoteVideo{width:100%;height:100%}.mediaChatWindow__localVideo{position:absolute;right:20px;top:25px;width:80px;border:1px solid #ddd}.mediaChatWindow__loading{display:none;width:32px;height:32px;position:absolute;top:50%;left:50%;margin-left:-16px;margin-top:-16px}.mediaChatWindow__remoteVideo--loading+.mediaChatWindow__loading{display:block}.mediaChatWindowSwitch{position:absolute;right:30px;bottom:30px}.mediaChatWindowSwitch__element{float:left;width:85px;background:rgba(0,0,0,.3);color:#fff;height:35px;cursor:pointer;text-align:center}.mediaChatWindowSwitch__element:not(.mediaChatWindowSwitch__active):hover{background:rgba(0,0,0,.45)}.mediaChatWindowSwitch__element:last-child{border-top-right-radius:2px;border-bottom-right-radius:2px}.mediaChatWindowSwitch__element:first-child{border-top-left-radius:2px;border-bottom-left-radius:2px}.mediaChatWindowSwitch__messageCount{position:relative;left:5px;top:-7px;display:inline-block;width:auto;min-width:14px;height:14px;line-height:14px;font-size:.8em;background:#d34747;border-radius:14px}.mediaChatWindowSwitch__active{background:rgba(0,0,0,.6);cursor:default}.mediaChatWindowSwitch__element .icon{font-size:1.06em;margin-top:9px}.expandWindow--mobile{width:100%;top:0;left:0;bottom:35px}.expandWindow--mobile .mediaChatWindowSwitch{position:fixed;bottom:0;width:100%;right:0;display:-webkit-box;display:-ms-flexbox;display:flex}.expandWindow--mobile .mediaChatWindow{background:rgba(0,0,0,.7)}.expandWindow--mobile .mediaChatWindowSwitch__element{border-radius:0;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;background:rgba(0,0,0,.5)}.expandWindow--mobile .mediaChatWindowSwitch__active{background:rgba(0,0,0,.7)}@-webkit-keyframes slideInRight{from{-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0);visibility:visible}to{-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}}@keyframes slideInRight{from{-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0);visibility:visible}to{-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}}.slideInRight{-webkit-animation:slideInRight .4s cubic-bezier(.785,.135,.15,.86) both;animation:slideInRight .4s cubic-bezier(.785,.135,.15,.86) both}"]},c)},t.prototype.getDragBar=function(){var e=this,t=this.props,i=t.windowStyle,o=t.windowStatus,r=t.isPoppedOut,a=t.width,s=t.height,c=o===zo||o===qo,d=i===yo;if(!c||r||d)return null;var l=i===wo,u=30;return l||(u=45),n(_y,{barWidth:this.winWidth-60-85,ifrOffsetTop:u,width:a,height:s,right:this.state.right,bottom:this.state.bottom,ifrWidth:this.winWidth,ifrHeight:this.winHeight,ifrPositionChanged:function(t,n){e.setState({bottom:n,right:t,left:null,top:null})}})},t.prototype.getBubbleBar=function(){var e=this,t=this.props,i=t.unread,o=t.windowStatus,r=t.lastMessage,a=t.writeReply,s=t.agentName,c=t.windowStyle,d=t.onCloseBubble,l=t.onMaximize,u=o===Lo,p=i>0;return this.state.showMessage&&u&&p?n(Jv,{invitation:{winType:c,ifShow:!0,type:Rc,message:r,textTypeHere:a,agentName:s},onAccept:l,onRefuse:function(){e.setState({showMessage:!1,invHeight:0}),d()},onHeightChange:function(t){e.setState({invHeight:t})}}):null},t.prototype.getMinIcon=function(){var e=this.props,t=e.windowStatus,i=e.windowStyle,o=e.avatar,r=e.unread,a=e.onMaximize,s=e.onMinimized,c=e.onOpened,d=e.isMobile,l=t===Lo,u=t===Vo,p=t===jo;return l||p||u?n(jv,{isMobile:d,windowStyle:i,avatar:o,onClick:a,count:l?r:void 0,status:t,onMinimized:s,onOpened:c,online:!0}):null},t.prototype.bodyDisableScroll=function(){if(this.props.isMobile){var e=Ii.body.style;this.style=Object.keys(Ty).reduce(function(t,n){var i=t;return i[n]=e[n],e[n]=Ty[n],i},{}),Ii.addEventListener("touchmove",Di)}},t.prototype.bodyEnableScroll=function(){var e=this;this.props.isMobile&&(Object.keys(this.style||{}).forEach(function(t){Ii.body.style[t]=e.style[t]}),Ii.removeEventListener("touchmove",Di))},t.prototype.render=function(){var e=this.props,t=e.windowStatus,i=e.isMobile,o=e.width,r=e.height,a=e.orientation,s=e.isIPad,c=e.title,d=e.isPoppedOut,l=Sy;i&&("landscape"===a&&(!s||o<760)?l=Cy:"portrait"===a&&(!s||r<760)&&(l=ky)),this.setWinSize(l,s);var u=t===Lo,p=l!==Sy&&!u,f=this.getWinStyle(l,s);if(u){var h=this.state.invHeight;f=h?jt({},f,{width:290,height:Math.min(h+130,r)}):jt({},f,{width:130,height:130}),f.left="",f.top=""}var m=this.getInnerCss(),b=void 0;return p&&(b=Iy),n("div",{style:b,onTouchMove:Di},this.getExWin(l,s),this.getDragBar(l),n(Ob,{key:"win",id:"chat_window_container",onMounted:this.onMount,style:f,innerCss:m,callback:this.updateIframe(l)},!d&&n(xy,{message:c}),this.getChildren(l),this.getBubbleBar(),this.getMinIcon()))},t}(I);Oy.propTypes={width:lb.number.isRequired,height:lb.number.isRequired,windowStatus:lb.oneOf(Object.keys(Uo).map(function(e){return Uo[e]})).isRequired,isMobile:lb.bool.isRequired,isIPad:lb.bool.isRequired,lastMessage:lb.string,agentName:lb.string,avatar:lb.string,writeReply:lb.string.isRequired,onMounted:lb.func,onMaximize:lb.func.isRequired,onCloseBubble:lb.func.isRequired,onOpened:lb.func.isRequired,onMinimized:lb.func.isRequired,mainColor:lb.string.isRequired,background:lb.string,fontCSS:lb.string.isRequired};var Ey=function(e,t){var n=e.contentDocument;if(!n)return 0;var i=n.querySelector("#main");if(!i)return 0;var o=n.querySelector(".footer__operation .bubble-box--show .bubble"),r=i.getBoundingClientRect().height+(t===Sy?30:0);if(o){var a=o.getBoundingClientRect(),s=a.height;r=Math.max(s+108+10,r)}return r},Ny=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));i.state=jt({},i.state,{innerHeight:0}),i.updateIframe=ci(1)(function(e){return function(t){var n=i.props.windowStatus;n!==jo&&n!==Vo||i.setState({innerHeight:1/0}),n!==zo&&n!==qo||(i.setState({innerHeight:Ey(t,e)}),i.timer&&clearTimeout(i.timer),i.timer=setTimeout(function(){i.setState({innerHeight:Ey(t,e)}),i.timer=null},460)),n===Lo&&i.setState({innerHeight:0})}});i.setWinSize=function(e){e===Sy&&(i.winWidth=380,i.winHeight=Math.min(i.props.height,i.state.innerHeight)),e===Cy&&(i.props.width>500?i.winWidth=500:i.winWidth="100%",i.winHeight="100%"),e===ky&&(i.winWidth="100%",i.winHeight="100%")},i.getWinStyle=function(e){var t=0,n=0,o=void 0,r=void 0;return e===Sy&&(t=i.state.bottom,n=i.state.right,o=i.state.left,r=i.state.top),{position:"fixed",border:0,zIndex:Rv,top:r,left:o,bottom:t,right:n,width:i.winWidth,height:i.winHeight}},i.getExWinStyle=function(e,t){if(e===Sy&&!t)return{zIndex:Ov,width:530,height:480,bottom:i.state.bottom,right:i.state.right+i.winWidth,background:"transparent",position:"fixed",border:0,maxWidth:500};var n=i.props.showChatWindowInExpandwindow;return{zIndex:Ov,width:i.winWidth,height:n?35:i.winHeight,right:0,bottom:i.state.bottom,background:"transparent",position:"fixed",border:0}};var o=i.shouldComponentUpdate;return i.shouldComponentUpdate=function(e,t){return!!o(e,t)||t.innerHeight!==i.state.innerHeight},i}return qt(t,e),t}(Oy),Wy=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return i.setWinSize=function(e){var t=i.props.iframeStyle,n=t&&t.width,o=t&&t.height;e===Sy&&(i.winWidth=n||420,i.winHeight=o||610),e===Cy&&(i.props.width>500?i.winWidth=500:i.winWidth="100%",i.winHeight="100%"),e===ky&&(i.winWidth="100%",i.winHeight="100%")},i.getWinStyle=function(){return{position:"fixed",border:0,zIndex:i.props.isMobile?Rv:Ov,top:i.state.top,left:i.state.left,bottom:i.state.bottom,right:i.state.right,width:i.winWidth,height:i.winHeight}},i.getExWinStyle=function(e,t){if(e===Sy){var n=i.winHeight;if(t){n=i.props.showChatWindowInExpandwindow?35:i.winHeight}return{zIndex:t?Ov:Rv,width:t?i.winWidth:530,height:n,bottom:i.state.bottom,right:t?i.state.right:i.winWidth+i.state.right-50,background:"transparent",position:"fixed",border:0}}var o=i.props.showChatWindowInExpandwindow;return{zIndex:Ov,width:i.winWidth,height:o?35:i.winHeight,right:0,bottom:i.state.bottom,background:"transparent",position:"fixed",border:0}},i}return qt(t,e),t}(Oy),By=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return i.setWinSize=function(e){var t=i.props.iframeStyle,n=t&&t.width,o=t&&t.height;e===Sy&&(i.winWidth=n||460,i.winHeight=o||620),e===Cy&&(i.props.width>500?i.winWidth=500:i.winWidth="100%",i.winHeight="100%"),e===ky&&(i.winWidth="100%",i.winHeight="100%")},i.getWinStyle=function(){return{position:"fixed",border:0,zIndex:Rv,top:i.state.top,left:i.state.left,bottom:i.state.bottom,right:i.state.right,width:i.winWidth,height:i.winHeight}},i.getExWinStyle=function(e,t){if(e===Sy){var n=i.winHeight;if(t){n=i.props.showChatWindowInExpandwindow?35:i.winHeight}return{zIndex:Ov,width:t?i.winWidth:530,height:n,bottom:i.state.bottom,right:t?i.state.right:i.winWidth+i.state.right-30,background:"transparent",position:"fixed",border:0}}var o=i.props.showChatWindowInExpandwindow;return{zIndex:Ov,width:i.winWidth,height:o?35:i.winHeight,right:0,bottom:i.state.bottom,background:"transparent",position:"fixed",border:0}},i}return qt(t,e),t}(Oy),Dy=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return i.setWinSize=function(e,t){i.winHeight="100%";var n=i.props,o="100%";if(i.winZIndex=Rv,n.expandWindow&&e===Sy&&!t){var r=n.width;o=r>1e3?r-500:"50%"}i.winWidth=o,i.exWinHeight=n.showChatWindowInExpandwindow?35:i.winHeight},i.getExWinStyle=function(e,t){return{background:"transparent",position:"fixed",border:0,zIndex:Ov,width:i.winWidth,height:i.exWinHeight,bottom:0,left:0,maxWidth:e!==Sy||t?"":500}},i.getWinStyle=function(){return{position:"fixed",border:0,zIndex:i.winZIndex,width:i.winWidth,height:i.winHeight,right:0,bottom:0}},i}return qt(t,e),t}(Oy),zy=function(e,t){return e&&t!==yo?Dy:t===yo?Ny:t===vo?Wy:By},jy=function(e){var t=e.windowStyle,i=e.isPoppedOut;return n(zy(i,t),e)},qy=ry(jy),Ly=function(e){function t(){zt(this,t);var n=Vt(this,e.call(this));return n.closeBubble=function(e){n.element&&n.element.contains(e.target)||e.target.id===n.props.iconId||e.target.parentNode.id===n.props.iconId||n.props.onClose&&n.props.onClose()},n}return qt(t,e),t.prototype.componentDidMount=function(){var e=this;this.element.ownerDocument.body.addEventListener("click",function(t){e.closeBubble(t)})},t.prototype.componentWillUnmount=function(){this.element.ownerDocument.body.removeEventListener("click",this.closeBubble)},t.prototype.render=function(){var e=this,t=this.props,i=t.id,o=t.showDirection,r=t.className,a=t.children,s=t.ifShow,c=t.onClose,d=t.ifHasClose,l=t.transformOrigin,u=t.arrowDownLeft,p=t.chatWindowStyle;return n("div",{id:"bubble_box_"+i,ref:function(t){e.element=t},className:"bubble-box "+(s?"bubble-box--show":"")+" "+r,onClick:c},n("div",{id:i,className:"bubble bubble-"+o,onClick:function(e){e.stopPropagation()},style:(p===yo||p===vo)&&{webkitTransformOrigin:l,msTransformOrigin:l,transformOrigin:l}},(p===yo||p===vo)&&"up"===o&&n("span",{className:"bubble__arrowDown",style:{left:u}}),d&&n("div",{className:"bubble-close"},n(Fv,{type:Vv.close,size:12,onClick:c,color:"#333"})),a))},t}(I);Ly.defaultProps={id:"",showDirection:"down",className:"",ifShow:!1,ifHasClose:!1},Ly.propTypes={id:lb.string,iconId:lb.string,showDirection:lb.string,className:lb.string,children:lb.oneOfType([lb.string,lb.element]).isRequired,ifShow:lb.bool,onClose:lb.func,ifHasClose:lb.bool,transformOrigin:lb.string,arrowDownLeft:lb.string,chatWindowStyle:lb.oneOf([yo,vo,wo])};var Vy=function(e,t,i,o,r,a,s,c){return t&&n("div",{id:e,className:Bv("title-buttons__operation",s)},n(Fv,{type:i,onClick:a,size:12,title:o}),c)},Fy=function(e,t,i,o,r,a){return e&&n("div",{className:Bv("title-buttons__operation","title-buttons__operation--text",i),style:r?{}:{borderLeft:"0px"}},n("a",{onClick:o},t),a)},Uy=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return i.state={showEndChatConfirm:!1},i.onClickShowEndChatConfirm=i.onClickShowEndChatConfirm.bind(i),i.updateEndChatConfirmStatus=i.updateEndChatConfirmStatus.bind(i),i}return qt(t,e),t.prototype.onClickShowEndChatConfirm=function(e){this.props.ifViewConfirmBubble?this.state.showEndChatConfirm||(e.stopPropagation(),e.preventDefault(),this.updateEndChatConfirmStatus(!0)):this.props.onEndChat(this.props.passEventArgs)},t.prototype.updateEndChatConfirmStatus=function(e){this.setState({showEndChatConfirm:e})},t.prototype.render=function(){var e=this,t=this.props,i=t.controls||{},o=t.languages||{},r=n(Ly,{ifShow:this.state.showEndChatConfirm,showDirection:"down",onClose:function(){return e.updateEndChatConfirmStatus(!1)}},n("div",{className:"bubble--desc"},o.promptStopChat),n("div",{className:"embedded-end-chatConfirmAction bubble__operation"},n("button",{id:"embedded-end-chatConfirmLeave",className:"btn btn-primary",onClick:function(t){t.stopPropagation(),e.updateEndChatConfirmStatus(!1),e.props.onEndChat(e.props.passEventArgs)}},o.buttonYes),n("button",{id:"embedded-end-chatConfirmCancel",className:"btn btn-grey",onClick:function(){e.updateEndChatConfirmStatus(!1)}},o.buttonNo)));return n("div",{className:"title-buttons window__operation"},Vy("",i.hasMinimize,Vv.minimize,o.embeddedWindowMinimize,t.ifViewHeader&&t.color,t.onMinimize),Vy("embedded-popup",i.hasPopOut,Vv.popup,o.embeddedWindowPopup,t.ifViewHeader&&t.color,function(){return t.onPopOut(t.passEventArgs)}),Vy("",i.hasPopIn,Vv.embedded,o.embeddedWindowPopin,t.ifViewHeader&&t.color,function(){return t.onPopIn(t.passEventArgs)}),Vy("",i.hasClose,Vv.close,o.buttonClose,t.ifViewHeader&&t.color,function(){t.onClose(t.passEventArgs)},"embedded-only btn-close"),Vy("",i.hasEndChat,Vv.close,o.buttonEndChat,t.ifViewHeader&&t.color,this.onClickShowEndChatConfirm,"btn-end-chat embedded-end-chat",r),Fy(i.hasTextEndChat,o.buttonEndChat,"btn-end-chat",this.onClickShowEndChatConfirm,i.hasPopIn,r),Fy(i.hasTextClose,o.buttonClose,null,function(){return t.onClose(t.passEventArgs)},i.hasPopIn))},t}(I),Hy={},Gy=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));i.state={};var o=n.src;return i.download=i.download.bind(i),i.download(o),i}return qt(t,e),t.prototype.componentWillReceiveProps=function(e){e.src!==this.props.src&&this.download(e.src)},t.prototype.shouldComponentUpdate=function(e,t){return this.props.src!==e.src||t.src!==this.state.src},t.prototype.download=function(e){var t=Hy[e];0===e.indexOf("data:image")&&(t=e),t||(t=new Promise(function(t){var n=new Image;n.onload=function(){t(e)},n.onerror=function(){Hy[e]=e,t(e)},n.src=e}),Hy[e]=t),this.setState({src:t})},t.prototype.render=function(){var e=this,t=this.state.src,i=this.props;return t?"string"!=typeof t?(t.then(function(t){e.setState({src:t})}),null):n("img",jt({},i,{alt:i.alt,src:t})):n("img",i)},t}(I),Yy=av("header.icons")(Uy),Qy=function(e){function t(){zt(this,t);var n=Vt(this,e.call(this));return n.state={showEndChatConfirm:!1,headerHeight:0},n.header=null,n.shuoldUpdateHeaderHeight=!1,n.shouldComponentUpdate=Tb(n,["passEventArgs","ifViewConfirmBubble","ifHideBio","ifViewHeaderBox","ifViewHeader","color","onMinimize","team","avatars","banner","avatar","name","title","bio","logo","tab","controls","languages","agent","windowDisabled"],["showEndChatConfirm","headerHeight"]),n.onMinimize=n.onMinimize.bind(n),n.onClose=n.onClose.bind(n),n.showAnimation=!0,n}return qt(t,e),
t.prototype.componentWillReceiveProps=function(e){if(e.tab===So&&this.props.tab!==So&&(this.showAnimation=!0),e.windowStatus===qo&&this.props.windowStatus===jo){var t=e.agent;this.showAnimation=!(t&&t.avatar)}var n=e.agent&&e.agent.bio,i=this.props.agent&&this.props.agent.bio;(e.ifHideBio!==this.props.ifHideBio||this.props.windowDisabled&&n!==i)&&(this.shuoldUpdateHeaderHeight=!0)},t.prototype.componentDidUpdate=function(){var e=this;no||this.header&&this.shuoldUpdateHeaderHeight&&(this.shuoldUpdateHeaderHeight=!1,this.props.agent&&this.props.agent.bio?this.props.ifHideBio?this.header.style.height=(this.props.chatWindowStyle===wo?80:130)+"px":this.props.windowDisabled?setTimeout(function(){e.header.style.height=e.header.scrollHeight+"px"},400):this.header.style.height=this.header.scrollHeight+"px":this.props.windowDisabled&&this.props.agent?this.header.style.height=(this.props.chatWindowStyle===wo?80:130)+"px":this.props.agent||(this.header.style.height=""))},t.prototype.onMinimize=function(){this.props.onMinimize(this.props.tab)},t.prototype.onClose=function(){return this.props.onClose(this.props.tab)},t.prototype.updateEndChatConfirmStatus=function(e){this.setState({showEndChatConfirm:e})},t.prototype.render=function(){var e=this,t=this.props,i=this.props,o=i.agent,r=i.windowStatus,a=r===Vo,s=this.showAnimation;return n("div",{className:"window__headerContainer",onTouchMove:Di},t.ifViewHeader&&n("div",{id:"branding",className:Bv("window__header","window__header--noBio",s&&"window__header--fadeInDown"),ref:function(t){t&&(e.header=t)}},t.ifViewHeaderBox&&n("div",null,n("div",{className:"window__headerBox clearfix"},t.team&&n("div",{className:Bv("header__teamName",!t.avatars&&"header__teamNameNoAvatar")},t.team),t.avatars&&n("div",{className:Bv("header__teamAvatar",t.isAvatarGray&&"header__teamAvatar--gray")},t.avatars.map(function(e){}),t.avatars.map(function(e){return n(Gy,{className:"header__teamAvatarImg",src:e,width:"50",height:"50",alt:""})})),t.banner&&n(Gy,{className:"header__bannerImg",src:t.banner,alt:""}),o&&n("div",{className:Bv("header__agent",t.logo?"header__agent--withlogo":"",o.bio&&t.ifHideBio?"header__agent--compact":"",s&&"header__agent--fadeInUp"),onClick:function(){t.ifHideBio&&e.props.onUpdateScrollStatus(!1)},onTouchEnd:function(){t.ifHideBio&&e.props.onUpdateScrollStatus(!1)}},o.avatar&&n("div",{id:"header-operator-avatar",className:Bv("header__avatar",s&&"header__avatar--fadeInDown")},!a&&n(Gy,{className:"header__avatarImage",src:o.avatar,alt:"",width:"50",height:"50"})),n("div",{className:Bv("header__agentInfo",!o.avatar&&"header__agentInfoNoAvatar")},o.name&&n("div",{className:"direction-ltr header__agentName"},o.name),o.title&&n("div",{className:"direction-ltr header__agentTitle"},o.title),o.bio&&n("div",{className:"header__agentBio",style:{height:t.ifHideBio?"0":"auto"},dangerouslySetInnerHTML:{__html:o.bio}}))),t.logo&&n("div",{className:"header__logo "+(o&&(o.avatar||o.name)?"header__logo--up":"")},n(Gy,{id:"logo-image",className:"header__logoImg",src:t.logo,alt:""}))))),n("div",{className:"end-chat-top window__title"},n("span",{id:"embedded-window-title",className:"title-text embedded-only"}),n(Yy,{tab:t.tab,controls:t.controls,languages:t.languages,passEventArgs:t.passEventArgs,ifViewConfirmBubble:t.ifViewConfirmBubble,onEndChat:t.onEndChat,ifViewHeader:t.ifViewHeader,color:t.color,onMinimize:this.onMinimize,onPopOut:t.onPopOut,onPopIn:t.onPopIn,onClose:this.onClose})))},t}(I);Qy.protoTypes={onClose:lb.func,onPopOut:lb.func,onPopIn:lb.func,onMinimize:lb.func,controls:lb.shape({hasMinimize:lb.bool,hasPopIn:lb.bool,hasPopOut:lb.bool,hasEndChat:lb.bool,hasClose:lb.bool,hasTextEndChat:lb.bool,hasTextClose:lb.bool}).isRequired,team:lb.oneOfType([lb.string,lb.bool]),banner:lb.oneOfType([lb.string,lb.bool]),logo:lb.oneOfType([lb.string,lb.bool]),avatars:lb.oneOfType([lb.arrayOf(lb.string),lb.bool]),isAvatarGray:lb.bool,chatWindowStyle:lb.oneOf(Object.keys(_o).map(function(e){return _o[e]})),ifViewConfirmBubble:lb.bool,agent:lb.oneOfType([lb.shape({name:lb.string.isRequired,title:lb.oneOfType([lb.string,lb.bool]),avatar:lb.oneOfType([lb.string,lb.bool]),bio:lb.oneOfType([lb.string,lb.bool])}),lb.bool]),languages:lb.shape({}).isRequired,passEventArgs:lb.shape({}),isViewBio:lb.bool,tab:lb.oneOf(Object.keys(Io).map(function(e){return Io[e]}))};var Jy,Xy=av("header","window__headerVessel")(Qy),Zy=(Jy={},Jy[So]="livechat.chat",Jy[ko]="livechat.prechat",Jy[Ao]="livechat.postChat",Jy[To]="livechat.offlineMessage",Jy),$y=function(e){var t=Ua(e),n=ja(e),i=t===So&&n===bo,o=Yo(e),r=Jo(e);return{hasMinimize:!o,hasClose:!(r&&i||o),hasEndChat:r&&i&&!o,hasTextEndChat:r&&i&&o,hasTextClose:(!r||!i)&&o,hasPopOut:!o,hasPopIn:xd(e)}},Ky=function(e){var t=Ua(e),n=Ya(e),i=Yc(e,n.id),o=ha(e);return Object.assign({tab:t,controls:$y(e),windowDisabled:qs(e),chatWindowStyle:i,isAvatarGray:t===To,ifViewConfirmBubble:t!==Ao,ifHideBio:Bs(e),isPopout:Yo(e),languages:n.languages,ifViewHeader:!0,ifViewHeaderBox:!0,color:ad(e),windowStatus:o},hl(i,e,n))},ex=function(e){return{onEndChat:function(){e(bh())},onClose:function(t){var n=Zy[t];n&&sm(n+".close"),e(tf())},onMinimize:function(t){var n=Zy[t];n&&sm(n+".minimize"),e(Kp())},onPopIn:function(){e(Qf())},onPopOut:function(){e(Yf())},onUpdateScrollStatus:function(t){e(Uf(t))}}},tx=Jw(Ky,ex)(Xy),nx=function(e){return n("div",{className:"poweredby"},n("a",{rel:"noopener noreferrer",onClick:function(e){e.target.blur()},target:"_blank",href:e.poweredByUrl},"Powered by Comm100"))},ix=av("footer.poweredby")(nx),ox=function(e){return n("div",{className:"footer window__footer",style:e.style,onTouchMove:Di},e.showChatWithAgent&&n("div",{onClick:e.onChatWithAgentClick,className:"window__chatWithAgent window__chatWithAgent--bottom"},n("i",{className:"icon icon-bubble"}),e.chatWithAgentText),e.icons&&n(e.icons),e.poweredByUrl&&n(ix,e))};ox.protoTypes={poweredByUrl:lb.string.isRequired,icons:lb.func};var rx=av("footer")(ox),ax=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return i.state={isShow:n.isShow},i.timer=null,i.footerOperation=null,i.shouldComponentUpdate=Tb(i,["isShow","icons","windowDisabled"],["isShow"]),i}return qt(t,e),t.prototype.componentDidMount=function(){var e=this;this.timer=this.props.isShow&&setTimeout(function(){e.setState({isShow:!1})},333)},t.prototype.componentWillUnmount=function(){this.timer&&clearTimeout(this.timer)},t.prototype.render=function(){var e=this,t=this.props;return n("div",{ref:function(t){e.footerOperation=t},className:Bv("footer__operation",this.state.isShow?"footer__operation--show":"")},n("ul",{className:"clearfix"},t.icons&&t.icons.map(function(e){return n(e.component,Object.assign(e.props,{onIconSelected:t.onIconSelected,windowDisabled:t.windowDisabled}))})))},t}(I);ax.protoTypes={isShow:lb.bool,onIconSelected:lb.func,windowDisabled:lb.bool,icons:lb.arrayOf(lb.shape({component:lb.func.isRequired,props:lb.shape({onClick:lb.func,disable:lb.bool,active:lb.bool,color:lb.string})}))};var sx=av("footer.toolbar")(ax),cx=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return i.state={rateVal:n.rateVal},i.clickChange=i.clickChange.bind(i),i}return qt(t,e),t.prototype.componentWillReceiveProps=function(e){this.setState({rateVal:e.rateVal})},t.prototype.clickChange=function(e){this.setState({rateVal:e}),this.props.rateChange(e)},t.prototype.render=function(){var e=this,t=[];return t=this.props.ifCanHalfRate?this.props.rateItems.map(function(t){return n("div",{id:"rateItem-"+t.id,key:t.id,role:"button",tabIndex:t.id,className:Bv(e.state.rateVal>=t.value?"star animate":"star",e.state.starParentClicked&&e.state.rateVal>t.value-1&&e.state.rateVal<=t.value?"selected icon icon-rating-full isAnimated pulse":"selected icon icon-rating-full"),onClick:function(){e.starClickChange(t.value)}},n("span",{role:"button",tabIndex:t.id,className:Bv("half icon icon-rating-half",e.state.rateVal>=t.value-.5&&"starColour"),"data-value":t.value-.5,onMouseOver:function(){return e.hoverChange(t.value-.5)},onMouseOut:1===t.value?function(){return e.hoverChange("0")}:function(){},onClick:function(){return e.clickChange(t.value-.5)}}),n("span",{role:"button",tabIndex:t.value,className:e.state.rateVal>=t.value?"full icon icon-rating-full starColour":"full icon icon-rating-full","data-value":t.value,onMouseOver:function(){return e.hoverChange(t.value)},onClick:function(){return e.clickChange(t.value)}}))}):this.props.rateItems.map(function(t){return n("div",{key:t.id,id:"rateItem-"+t.id,role:"button",tabIndex:t.id,className:Bv("star selected icon icon-rating-full",e.state.rateVal>=t.value?"animate":"")},n("span",{role:"button",tabIndex:t.id,className:"full icon icon-rating-full","data-value":t.value,onClick:function(){return e.clickChange(t.value)},title:t.label}))}),n("div",{className:"rating","data-vote":"0",style:Object.assign({width:this.props.width,height:this.props.height},this.props.style),onFocus:this.props.onFocus,onBlur:this.props.onBlur},t,this.props.children)},t}(I);cx.defaultProps={rateVal:0,rateItems:[{id:1,value:1,label:"Poor"},{id:2,value:2,label:"Fair"},{id:3,value:3,label:"Good"},{id:4,value:4,label:"VeryGood"},{id:5,value:5,label:"Excellent"}],ifCanHalfRate:!1,starBackgroundColor:"#c8c8c8",starColor:"#ffd051"},cx.propTypes={rateVal:lb.number,rateItems:lb.arrayOf({id:lb.number,value:lb.number}),rateChange:lb.func,ifCanHalfRate:lb.bool,starBackgroundColor:lb.string,starColor:lb.string,width:lb.string,height:lb.string,onFocus:lb.func,onBlur:lb.func};var dx=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return i.shouldComponentUpdate=Tb(i,["input.value","meta.touched","meta.invalid","focused","isDisabled"]),i}return qt(t,e),t.prototype.componentDidMount=function(){this.props.focused&&this.element&&this.element.focus()},t.prototype.componentDidUpdate=function(e){e.focused!==this.props.focused&&this.props.focused&&this.element&&this.element.focus()},t.prototype.render=function(){var e=this,t=this.props,i=t.input,o=t.rows,r=t.cols,a=t.style,s=t.isDisabled,c=t.placeholder,d=t.maxLength,l=t.className,u=t.meta;return n("textarea",jt({},i,{cols:r,rows:o,style:a,disabled:!!s&&"disabled",className:Bv(l,"multipleText",u.touched&&u.invalid&&"error"),placeholder:c,maxLength:d,ref:function(t){e.element=t}}))},t}(I);dx.propTypes={style:lb.shape({}),rows:lb.string,cols:lb.string,isDisabled:lb.bool,placeholder:lb.string,className:lb.string,maxLength:lb.number,input:lb.object.isRequired,meta:lb.object.isRequired,focused:lb.bool};var lx={large:"btn-lg",small:"btn-sm"},ux={primary:"btn-primary",default:"btn-default",gray:"btn-gray",noborder:"btn-noborder"},px=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return i.shouldComponentUpdate=Tb(i,["disabled","text","className","loading","size","icon","iconPosition","type","children"]),i}return qt(t,e),t.prototype.render=function(){var e=this.props,t=e.disabled,i=e.text,o=e.onClick,r=e.className,a=e.htmlType,s=e.loading,c=e.size,d=e.icon,l=e.iconPosition,u=e.type,p=e.children,f=Lt(e,["disabled","text","onClick","className","htmlType","loading","size","icon","iconPosition","type","children"]),h=lx[c]||"",m=ux[u]||"btn-default",b=null;return s||d&&(b=d),n("button",jt({},f,{className:Bv("btn",t&&"disabled",h,m,r),disabled:!!t&&"disabled",onClick:t?void 0:o,type:a}),"right"!==l&&b,"right"!==l&&p,i&&n("span",null,i),"right"===l&&p,"right"===l&&b)},t}(I);px.propTypes={type:lb.oneOf(["primary","default","gray","noborder"]),text:lb.string,disabled:lb.bool,onClick:lb.func,className:lb.string,iconPosition:lb.oneOf(["left","right"]),icon:lb.element,loading:lb.bool,size:lb.oneOf(["large","default","small"]),htmlType:lb.oneOf(["submit","button","reset"]),children:lb.oneOfType([lb.arrayOf(lb.element),lb.element,lb.string])},px.examples={DefaultExample:{description:"Loading Example",component:n(px,{text:"Click Me!",loading:!0,iconPosition:"right"})},GrayButton:{description:"Gray Button",component:n(px,{type:"gray",text:"Log In"})}};var fx="bubbleline",hx=function(e){function t(){zt(this,t);var n=Vt(this,e.call(this));return n.state={someKey:"someValue"},n}return qt(t,e),t.prototype.render=function(){var e=this.props,t=e.disabled,i=e.color,o=e.className,r=e.type,a=e.active,s=e.onClick,c=Lt(e,["disabled","color","className","type","active","onClick"]),d=void 0;switch(r){case"rating":d=[n("path",{key:"svgRatePath1",className:"svgPath footer__svgRatePath1",d:"M11.9,14.7c-0.1,0-0.1,0-0.2,0l-3.7-1.8l-3.7,1.8c-0.2,0.1-0.3,0.1-0.4, 0c-0.1-0.1-0.2-0.3-0.2-0.4L4.3,10l-3-3.2C1.3,6.6,1.3,6.5,1.3,6.4c0.1-0.2,0.2-0.3, 0.4-0.3l4-0.8l2-3.8C7.7,1.3,7.8,1.3,8,1.3l0,0c0.2,0,0.3,0.1,0.4,0.3l2,3.8l4,0.8 c0.2,0,0.3,0.2,0.4,0.3c0.1,0.2,0,0.3-0.1,0.4l-2.8,3.1l0.5,4.3c0,0.2-0.1,0.3-0.2, 0.4C12.1,14.7,12,14.7,11.9,14.7L11.9,14.7z"}),n("path",{key:"svgRatePath2",className:"svgPath footer__svgRatePath2",d:"M11.9,14.7c-0.1,0-0.1,0-0.2,0l-3.7-1.8l-3.7,1.8c-0.2,0.1-0.3, 0.1-0.4,0c-0.1-0.1-0.2-0.3-0.2-0.4L4.3,10l-3-3.2C1.3,6.6,1.3,6.5,1.3,6.4c0.1-0.2, 0.2-0.3,0.4-0.3l4-0.8l2-3.8C7.7,1.3,7.8,1.3,8,1.3l0,0c0.2,0,0.3,0.1,0.4,0.3l2,3.8l4, 0.8c0.2,0,0.3,0.2,0.4,0.3c0.1,0.2,0,0.3-0.1,0.4l-2.8,3.1l0.5,4.3c0,0.2-0.1,0.3-0.2, 0.4C12.1,14.7,12,14.7,11.9,14.7L11.9,14.7z"})];break;case"sendfile":d=[n("path",{key:"svgPathSendFile1",className:"svgPath footer__svgPathSendFile1",d:"M8.4,5.1c0,0-2.8,3-3.1,3.3C5,8.7,4.9,9.1,5,9.4c0.1,0.4,0.9,1.2,1.1,1.3c0.6,0.4, 1,0,1.5-0.4s5.1-5.1,5.4-5.5s0.7-1.1,0.5-1.9c-0.1-0.5-1.3-2-2.1-2.2c-0.8-0.2-1.4,0-2.1, 0.6C8.6,1.8,2.8,8,2.4,8.4s-0.9,1-0.9,2s1,3.7,3.6,4.1c1,0.1,1.7-0.4,2-0.8c0.4-0.5, 4.6-4.8,4.6-4.8"}),n("path",{key:"svgPathSendFile2",className:"svgPath footer__svgPathSendFile2",d:"M8.4,5.1c0,0-2.8,3-3.1,3.3C5,8.7,4.9,9.1,5,9.4c0.1,0.4,0.9,1.2,1.1,1.3c0.6,0.4,1,0, 1.5-0.4s5.1-5.1,5.4-5.5s0.7-1.1,0.5-1.9c-0.1-0.5-1.3-2-2.1-2.2c-0.8-0.2-1.4,0-2.1,0.6C8.6, 1.8,2.8,8,2.4,8.4s-0.9,1-0.9,2s1,3.7,3.6,4.1c1,0.1,1.7-0.4, 2-0.8c0.4-0.5,4.6-4.8,4.6-4.8"})];break;case"videochat":d=[n("path",{key:"svgPathVideo1",className:"svgPath footer__svgPathVideo1",d:"M12.6,6.4h-0.8V4.2c0,0-0.1-0.9-0.9-0.9c0,0-8.7,0-9.4,0S0.5,3.7,0.5,4.5s0,7.3, 0,7.3s0.1,0.9,0.8,0.9h9.4c0,0,0.9-0.2,0.9-0.9v-1.5h0.9l2.8,2.4V4.2L12.6,6.4z"}),n("circle",{key:"svgPathVideo2",className:"svgPath footer__svgPathVideo2",cx:"2.5",cy:"5.5",r:"0.5"}),n("circle",{key:"svgPathVideo3",className:"svgPath footer__svgPathVideo2",cx:"4.5",cy:"5.5",r:"0.5"}),n("path",{key:"svgPathVideo4",className:"svgPath footer__svgPathVideo3",d:"M12.6,6.4h-0.8V4.2c0,0-0.1-0.9-0.9-0.9c0,0-8.7,0-9.4,0S0.5,3.7,0.5,4.5s0,7.3, 0,7.3s0.1,0.9,0.8,0.9h9.4c0,0,0.9-0.2,0.9-0.9v-1.5h0.9l2.8,2.4V4.2L12.6,6.4z"})];break;case"voicechat":d=[n("path",{key:"svgPathVoice1",className:"svgPath footer__svgPathVoice1",d:"M8,9.3c1.4,0,2.5-1.1,2.5-2.5V4.4C10.5,3,9.4,1.8,8,1.8S5.5,3,5.5,4.4v2.5C5.5, 8.1,6.6,9.3,8,9.3z"}),n("path",{key:"svgPathVoice2",className:"svgPath footer__svgPathVoice2",d:"M8,9.3c1.4,0,2.5-1.1,2.5-2.5V4.4C10.5,3,9.4,1.8,8,1.8S5.5,3,5.5,4.4v2.5C5.5, 8.1,6.6,9.3,8,9.3z"}),n("path",{key:"svgPathVoice3",className:"svgPath footer__svgPathVoice3",d:"M12.5,6.9c-0.8,0-0.6,0.7-0.6,0.7c0,2.5-1.5,3.4-4,3.4s-4-1.2-4-3.7c0,0, 0.2-0.5-0.6-0.5c0,0-0.5,0-0.5,0.5c0,3,1.3,4.2,4.1,4.6c0,0.3,0,2,0,2H4.7C4.3,14,4, 14,4,14.5S4.4,15,4.9,15h6.4c0.4,0,0.7,0,0.7-0.5S11.7,14,11.3,14H9c0,0,0-1.7,0-2 c2.8-0.5,4.1-1.4,4.1-4.3C13,7.6,13.3,6.9,12.5,6.9z"})];break;case"sendemail":d=[n("path",{key:"sendemail1",className:"svgPath footer__sendemail1",d:"M14.7,2c0.1,0,0.2,0.1,0.2,0.1c0.2,0.2,0.2,0.5,0,0.7L8.1,9.8C8,9.9,7.8,9.9,7.7, 9.9c-0.1,0-0.3,0-0.3-0.1L3.1,5.6C2.9,5.4,2.8,5,3,4.9c0.2-0.2,0.5-0.2,0.7,0l3.9, 3.9l6.6-6.6C14.3,2.1,14.4,2,14.6,2c0,0,0,0-0.1,0H1.6C0.7,2,0,2.7,0,3.5 v8.9C0,13.3,0.7,14,1.6,14h12.8c0.9,0,1.6-0.7,1.6-1.5V3.6C16,2.8,15.4,2.1,14.7,2z"}),n("path",{key:"sendemail2",className:"svgPath footer__sendemail2",d:"M15.5,7.2v5.4c0,0.5-0.4,1-1,1H1.5c-0.5,0-1-0.4-1-1V3.5c0-0.5,0.4-1, 1-1h13.1L7.7,9.4L3.4,5.2"})];break;case"checkbox":d=[n("path",{key:"checkbox1",className:"checkbox1",d:"M2,13.5c-0.8,0-1.5-0.7-1.5-1.5V2c0-0.8,0.7-1.5,1.5-1.5h10c0.8,0,1.5,0.7,1.5, 1.5v10c0,0.8-0.7,1.5-1.5,1.5H2z"}),n("path",{key:"checkbox2",className:"checkbox2",d:"M12,1c0.6,0,1,0.4,1,1v10c0,0.6-0.4,1-1,1H2c-0.5,0-1-0.4-1-1V2c0-0.6,0.5-1, 1-1H12M12,0H2C0.9,0,0,0.9,0,2v10c0,1.1,0.9,2,2,2h10c1.1,0,2-0.9, 2-2V2C14,0.9,13.1,0,12,0L12,0z"}),n("path",{key:"checkbox3",className:"checkbox3",d:"M12,3c-0.2-0.3-0.6-0.3-0.9,0L5.8,8.8L4,7.2C3.8,7,3.4,6.9,3.1,7.1C2.8,7.4, 2.7,7.9,2.9,8.3L5,11.7c0.1,0.1,0.2,0.2,0.3,0.3c0.5,0.4,1.2,0.3, 1.6-0.3l0-0.1l5.2-7.8C12.3,3.6,12.2,3.2,12,3L12,3z"})];break;case"loading":d=[n("g",{transform:"translate(80,50)"},n("g",{transform:"rotate(0)"},n("circle",{cx:"0",cy:"0",r:"10",className:"loading-circle",transform:"scale(0.981667 0.981667)"},n("animateTransform",{attributeName:"transform",type:"scale",begin:"-0.875s",values:"0.8 0.8;1 1",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite"}),n("animate",{attributeName:"fill-opacity",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite",values:"1;0",begin:"-0.875s"})))),n("g",{transform:"translate(71.21320343559643,71.21320343559643)"},n("g",{transform:"rotate(45)"},n("circle",{cx:"0",cy:"0",r:"10",className:"loading-circle",transform:"scale(0.956667 0.956667)"},n("animateTransform",{attributeName:"transform",type:"scale",begin:"-0.75s",values:"0.8 0.8;1 1",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite"}),n("animate",{attributeName:"fill-opacity",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite",values:"1;0",begin:"-0.75s"})))),n("g",{transform:"translate(50,80)"},n("g",{transform:"rotate(90)"},n("circle",{cx:"0",cy:"0",r:"10",className:"loading-circle",transform:"scale(0.931667 0.931667)"},n("animateTransform",{attributeName:"transform",type:"scale",begin:"-0.625s",values:"0.8 0.8;1 1",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite"}),n("animate",{attributeName:"fill-opacity",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite",values:"1;0",begin:"-0.625s"})))),n("g",{transform:"translate(28.786796564403577,71.21320343559643)"},n("g",{transform:"rotate(135)"},n("circle",{cx:"0",cy:"0",r:"10",className:"loading-circle",transform:"scale(0.906667 0.906667)"},n("animateTransform",{attributeName:"transform",type:"scale",begin:"-0.5s",values:"0.8 0.8;1 1",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite"}),n("animate",{attributeName:"fill-opacity",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite",values:"1;0",begin:"-0.5s"})))),n("g",{transform:"translate(20,50.00000000000001)"},n("g",{transform:"rotate(180)"},n("circle",{cx:"0",cy:"0",r:"10",className:"loading-circle",ransform:"scale(0.881667 0.881667)"},n("animateTransform",{attributeName:"transform",type:"scale",begin:"-0.375s",values:"0.8 0.8;1 1",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite"}),n("animate",{attributeName:"fill-opacity",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite",values:"1;0",begin:"-0.375s"})))),n("g",{transform:"translate(28.78679656440357,28.786796564403577)"},n("g",{transform:"rotate(225)"},n("circle",{cx:"0",cy:"0",r:"10",className:"loading-circle",transform:"scale(0.856667 0.856667)"},n("animateTransform",{attributeName:"transform",type:"scale",begin:"-0.25s",values:"0.8 0.8;1 1",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite"}),n("animate",{attributeName:"fill-opacity",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite",values:"1;0",begin:"-0.25s"})))),n("g",{transform:"translate(49.99999999999999,20)"},n("g",{transform:"rotate(270)"},n("circle",{cx:"0",cy:"0",r:"10",className:"loading-circle",transform:"scale(0.831667 0.831667)"},n("animateTransform",{attributeName:"transform",type:"scale",begin:"-0.125s",values:"0.8 0.8;1 1",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite"}),n("animate",{attributeName:"fill-opacity",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite",values:"1;0",begin:"-0.125s"})))),n("g",{transform:"translate(71.21320343559643,28.78679656440357)"},n("g",{transform:"rotate(315)"},n("circle",{cx:"0",cy:"0",r:"10",className:"loading-circle",transform:"scale(0.806667 0.806667)"},n("animateTransform",{attributeName:"transform",type:"scale",begin:"0s",values:"0.8 0.8;1 1",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite"}),n("animate",{attributeName:"fill-opacity",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite",values:"1;0",begin:"0s"}))))];break;case"accept":d=[n("circle",{cx:"27.5",cy:"27.5",r:"27.5",fill:"#5DC149"}),n("path",{d:"M33.9,32.6c0,0-0.2,1-0.2,1.1c-0.1,0.5-0.2,0.3-0.4,0.3c0, 0-4-1.3-6.4-3.8l-1.2-1.2c0,0-3.2-3.7-3.4-6.5c0-0.3-0.3-0.1,0.2-0.2c0.3-0.1, 1.3-0.5,1.3-0.5L19.5,14l-0.8,0.4c0,0-5.7,0.6-4.6,4.7l0.9,3c6.1,10.9, 18.6,18.6,18.6,18.6l2.5,1.2c3.8,1.2,5.4-4.6,5.4-4.6l0.5-1.6L33.9,32.6L33.9,32.6z",fill:"#ffffff"})];break;case"refuse":d=[n("circle",{cx:"27.5",cy:"27.5",r:"27.5",fill:"#D34747"}),n("path",{d:"M19.8,30.3c0,0-0.5-0.8-0.6-0.9c-0.2-0.4-0.1-0.4,0.1-0.5c0,0,3.8-1.9, 7.2-1.9h1.6c0,0,4.9,0.3,7,2.1c0.2,0.2,0.2-0.1,0.1,0.3c-0.1,0.3-0.5,1.3-0.5, 1.3l8.5,2.4l0.3-0.8c0,0,3.7-4.4,0-6.5l-2.7-1.5c-12-3.2-26.3,0.2-26.3,0.2l-2.6,0.9 c-3.6,1.9-0.6,7-0.6,7l0.7,1.4L19.8,30.3L19.8,30.3z",fill:"#ffffff"})];break;case"print":d=[n("path",{key:"print1",className:"svgPath footer__print0",d:"M14.6,3.5h-2.1V2c0-0.8-0.7-1.5-1.5-1.5H5C4.2,0.5,3.5,1.2,3.5, 2v1.5H1.4C0.8,3.5-0.1,4.3-0.1,5v7  c0,0.7,0.8,1.5,1.5,1.5l1.1,0V14c0,0.8,0.7,1.5, 1.5,1.5h8c0.8,0,1.5-0.7,1.5-1.5v-0.5l1.1,0c0.7,0,1.5-0.8,1.5-1.5V5  C16.1, 4.3,15.2,3.5,14.6,3.5z M4.5,2c0-0.3,0.2-0.5,0.5-0.5h6c0.3,0,0.5,0.2,0.5, 0.5v1.5h-7V2z M2.5,7C2.2,7,2,6.8,2,6.5  S2.2,6,2.5,6C2.8,6,3,6.2,3, 6.5S2.8,7,2.5,7z M12.5,14c0,0.3-0.2,0.5-0.5,0.5H4c-0.3,0-0.5-0.2-0.5-0.5c0, 0,0-4.5,0-4.8S3.6,9,4,9  c0,0,7.7,0,8,0s0.5,0.2,0.5,0.3S12.5,14,12.5,14z"}),n("path",{key:"print2",className:"svgPath footer__print1",d:"M14.6,13L13,13c0,0,0-3.6,0-3.8s-0.5-0.8-1-0.8s-7.5,0-8, 0S3,8.8,3,9.3S3,13,3,13l-1.6,0c-0.4,0-1-0.6-1-1V5  c0-0.4,0.6-1, 1-1H4h8h2.6c0.4,0,1,0.6,1,1v7C15.6,12.4,15,13,14.6,13L14.6,13z"}),n("path",{key:"print3",className:"svgPath footer__print2",d:"M12,9c-0.3,0-8,0-8,0C3.6,9,3.5,9,3.5,9.3s0,4.8, 0,4.8c0,0.3,0.2,0.5,0.5,0.5h8c0.3,0,0.5-0.2,0.5-0.5  c0, 0,0-4.5,0-4.7S12.3,9,12,9z"}),n("path",{key:"print4",className:"svgPath footer__print2",d:"M11.5,2c0-0.3-0.2-0.5-0.5-0.5H5C4.7,1.5,4.5,1.7,4.5,2v1.5h7V2z"}),n("circle",{key:"print5",className:"footer__print4",cx:"2.5",cy:"6.5",r:"0.5"}),n("path",{key:"print6",className:"svgPath footer__print3",d:"M10.5,13h-5C5.2,13,5,12.8,5,12.5C5,12.2,5.2,12,5.5,12h5c0.3,0,0.5, 0.2,0.5,0.5C11,12.8,10.8,13,10.5,13  L10.5,13z"}),n("path",{key:"print7",className:"svgPath footer__print3",d:"M10.5,11h-5C5.2,11,5,10.8,5,10.5C5,10.2,5.2,10,5.5,10h5c0.3, 0,0.5,0.2,0.5,0.5C11,10.8,10.8,11,10.5,11  L10.5,11z"}),n("path",{key:"print8",className:"svgPath footer__print1",d:"M4,4V2c0-0.6,0.4-1,1-1h6c0.6,0,1,0.4,1,1v2H4z"}),n("path",{key:"print9",className:"svgPath footer__print1",d:"M12,8.5c-0.5,0-7.5,0-8,0S3,8.8,3,9.3S3,14,3,14c0,0.6, 0.4,1,1,1h8c0.6,0,1-0.4,1-1c0,0,0-4.6,0-4.8  S12.5,8.5,12,8.5z"}),n("path",{key:"print10",className:"svgPath footer__print2",d:"M42.8,2c0-0.3-0.2-0.5-0.5-0.5h-6c-0.3,0-0.5,0.2-0.5,0.5v1.5h7V2z"})];break;case fx:d=[n("path",{key:"bubbleline1",className:"svgPath bubbleline1",transform:"translate(0,1)",d:"M18.5,0v4c0.1,11.2-7.4,20-16.4,23c-2,0.6-1.7,0.5-0.6,0.5c3.6,0,7.7,0,17.5,0"})];break;case"bubblelineright":d=[n("rect",{className:"bubblelineright0",width:"3",height:"28"}),n("path",{key:"bubblelineright1",className:"svgPath bubblelineright1",transform:"translate(0,1)",d:"M2,27.5c9.8,0,14.3,0,17.9,0c1.1,0,1.4,0.1-0.6-0.5c-2.6-0.9-5-2.2-7.2-3.9C6.6, 18.8,2.8,12,2.9,4V0"})];break;case"bubblecontent":d=[n("path",{key:"bubblecontent1",className:"svgPath bubblecontent1",d:"M15.4,0v4.7c0,5.4-1.7,10.6-5,14.9C7.7,23.1,4.1, 25.9,0,27.7c0.8,0,5.8,0,16.4,0V0H15.4z"})]}return n("svg",jt({version:"1.1",className:"svg "+(i?"svg-"+i:"")+" "+o+" "+(t?"disabled":"")+" "+(a?"active":""),onClick:t?void 0:s},c),d)},t}(I);hx.defaultProps={disabled:!1,className:"",type:"",active:!1},hx.propTypes={disabled:lb.bool,color:lb.string,className:lb.string,type:lb.string.isRequired,active:lb.bool,onClick:lb.func};var mx=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return i.state={active:!1,score:n.ratingValue||0,comment:n.commentValue||"",transformOrigin:"",arrowDownLeft:"",ratingError:!1,commentError:!1},i.onSubmit=i.onSubmit.bind(i),i.onClick=i.onClick.bind(i),i.toggle=i.toggle.bind(i),i.checkRequired=i.checkRequired.bind(i),i.checkIfEnter=i.checkIfEnter.bind(i),i.shouldComponentUpdate=Tb(i,["disabled","chatWindowStyle"],["score","comment","ratingError","commentError","active","transformOrigin","arrowDownLeft"]),i.checkRequired(),i}return qt(t,e),t.prototype.componentDidUpdate=function(e,t){this.inputElement&&!t.active&&this.state.active&&this.inputElement.focus()},t.prototype.onSubmit=function(){this.checkRequired()&&(this.toggle(!1),this.props.onSubmit({score:this.state.score,comment:this.state.comment}),this.props.onIconSelected&&this.props.onIconSelected())},t.prototype.onClick=function(){this.state.active?this.toggle(!1):this.toggle(!0);var e=0,t=this.rating.getBoundingClientRect().left;this.props.chatWindowStyle!==vo&&this.props.chatWindowStyle!==yo||(e=this.props.isRightToLeft?t-40+2:t-(Ii.querySelector("#chat_window_container").clientWidth-280-10)+2),this.setState({transformOrigin:e+"px calc(100% + 19px)",arrowDownLeft:e+"px"})},t.prototype.toggle=function(e){var t=this;this.state.active!==e&&(this.setState({active:e},function(){t.props.onToggle(e)}),!e&&this.props.onIconSelected&&this.props.onIconSelected())},t.prototype.checkIfEnter=function(){return this.state.comment.length>0||this.state.score>0},t.prototype.checkRequired=function(){var e=this.props,t=e.ratingField,n=e.commentField;return t&&t.isRequired&&this.setState({ratingError:0===this.state.score}),n&&n.isRequired&&this.setState({commentError:0===this.state.comment.length}),!this.state.ratingError&&!this.state.commentError},t.prototype.render=function(){var e=this,t=this.props,i=this.props,o=i.languages,r=i.ratingField,a=i.commentField,s=i.isMobile,c=i.chatWindowStyle;return r||a?n("li",{ref:function(t){e.rating=t},className:"footer__svg "+(t.disabled?"footer__svg--disabled":"")},n("div",{onClick:!s||this.state.active||t.windowDisabled?null:function(t){t.stopPropagation(),e.onClick(t)}},n("span",{title:o.buttonRating},n(hx,{id:"iconRating",color:t.color,type:"rating",active:this.state.active,onClick:t.windowDisabled||s?null:this.onClick})),s&&o.buttonRating),n("div",{onClick:function(e){return e.stopPropagation()}},n(Ly,{iconId:"iconRating",ifShow:this.state.active,showDirection:"up",ifHasClose:!0,onClose:function(){e.toggle(!1)},transformOrigin:this.state.transformOrigin,arrowDownLeft:this.state.arrowDownLeft,chatWindowStyle:c},n("div",{className:"bubble--title"},o.ratingTitle),r&&n(cx,{rateVal:this.state.score,rateItems:r.options.map(function(e,t){return Object.assign({},e,{id:t+1})}),rateChange:function(t){return e.setState({score:t})}},r.isRequired&&n("span",{className:"bubble__required"},"*")),a&&n("div",{className:"bubble--textarea"},n(dx,{input:{onInput:function(t){return e.setState({comment:t.target.value})},value:this.state.comment},ref:function(t){t&&(e.inputElement=t.element)},meta:{touched:!0,invalid:this.state.commentError},rows:3,cols:26,maxLength:2048,isDisabled:!1,placeholder:o.ratingCommentTitle}),a.isRequired&&n("span",{className:"bubble__required"},"*")),n("div",{className:"bubble__operation"},n(px,{type:"primary",text:o.buttonSubmit,onClick:this.onSubmit,disabled:!this.checkIfEnter()||!this.checkRequired()}))))):null},t}(I);mx.protoTypes={isMobile:lb.bool,disabled:lb.bool,onToggle:lb.func,onSubmit:lb.func,color:lb.string,languages:lb.shape({}),commentField:lb.shape({}),ratingField:lb.shape({}).isRequired,chatWindowStyle:lb.oneOf([yo,vo,wo])};var bx=function(e){return{chatWindowStyle:Yc(e,la(e)),isPoppedOut:Yo(e),isRightToLeft:ec(e),commentField:fc(e),ratingField:pc(e),ratingValue:js(e,"rating"),commentValue:js(e,"comment"),languages:Ya(e).languages}},gx=function(e){return{onSubmit:function(t){sm("livechat.chat.visitor.rate",t),e(hh(t)),e({type:"footer/chatToolRating",payload:t})},onToggle:function(t){e(oh(t))}}},wx=Jw(bx,gx)(mx),vx=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return i.state={active:!1,file:null,disabled:!1},i.onFileChange=i.onFileChange.bind(i),i}return qt(t,e),t.prototype.onFileChange=function(e){var t=this;e&&(this.tempfile=e,this.setState({disabled:!0}),this.props.onSubmit(this.tempfile).catch(function(e){return t.file&&(t.file.value=""),t.setState({disabled:!1}),""}).then(function(){t.file&&(t.file.value=""),t.setState({disabled:!1})}))},t.prototype.render=function(){var e=this,t=this.props,i=this.props,o=i.languages,r=i.isMobile,a=el(),s=this.state.disabled||t.disabled;return n("li",{title:o.buttonSendFile,className:"footer__svg "+(s?"footer__svg--disabled":""),onClick:function(){!r||t.windowDisabled||e.state.active||s||(e.file.click(),t.onIconSelected&&t.onIconSelected())}},n(hx,{id:"iconSendFile",color:t.color,type:"sendfile",active:this.state.active,onClick:r||t.windowDisabled||this.state.active||s?null:function(n){n.stopPropagation(),t.onIconSelected&&t.onIconSelected(),e.file.click()}}),r&&o.buttonSendFile,!a&&n("input",{type:"file",style:{display:"none"},onChange:function(t){return e.onFileChange(t.target.files[0])},ref:function(t){t&&(e.file=t)}}),a&&n(Wb,{style:{display:"none"},onChange:function(t){return e.onFileChange(t)},onMounted:function(t){e.file=t}}))},t}(I);vx.protoTypes={onIconSelected:lb.func,onSubmit:lb.func,maxFileSize:lb.number,color:lb.string};var yx=function(e){return{color:"white",disabled:$s(e)||_s(e)}},xx=function(e){return{onSubmit:function(t){return e(Sf(t))}}},_x=Jw(yx,xx)(vx),Cx=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return i.refCallback=i.refCallback.bind(i),i.shouldComponentUpdate=Tb(i,["input.value","meta.invalid","meta.touched","focused","isRequired","isDisabled","style"]),i.focus=i.focus.bind(i),i}return qt(t,e),t.prototype.componentDidMount=function(){this.props.focused&&this.focus()},t.prototype.componentDidUpdate=function(e){this.props.focused!==e.focused&&this.props.focused&&this.focus()},t.prototype.focus=function(){var e=this.element;e&&e.focus()},t.prototype.refCallback=function(e){this.element=e},t.prototype.render=function(){var e=this.props,t=e.isDisabled,i=(e.isRequired,e.placeholder),o=e.input,r=e.type,a=e.autoComplete,s=e.maxLength,c=e.className,d=e.meta,l=e.style,u=e.isReadOnly,p=e.animationEffect,f=Lt(e,["isDisabled","isRequired","placeholder","input","type","autoComplete","maxLength","className","meta","style","isReadOnly","animationEffect"]),h=Object.assign({},l);return p?n("div",{className:"form__inputContainer"},n("input",jt({},o,{readOnly:!!u&&"readOnly",disabled:!!t&&"disabled",className:Bv("input","form__input","input--effect01",c,d&&d.touched&&d.invalid?"error":""),type:r,placeholder:i,autoComplete:a?"on":"off",maxLength:s,style:h,ref:this.refCallback},f)),n("span",{className:"input__focusBorder"},n("i",null))):n("input",jt({},o,{readOnly:!!u&&"readOnly",disabled:!!t&&"disabled",className:Bv(c,"input","form__input",d&&d.touched&&d.invalid&&"error"),style:h,type:r,placeholder:i,autoComplete:a?"on":"off",maxLength:s,ref:this.refCallback},f))},t}(I);Cx.defaultProps={type:"text",autoComplete:!1},Cx.propTypes={isReadOnly:lb.bool,isDisabled:lb.bool,placeholder:lb.string,type:lb.string,autoComplete:lb.bool,className:lb.string,maxLength:lb.number,input:lb.shape({value:lb.string.isRequired}).isRequired,meta:lb.shape({invalid:lb.bool,touched:lb.bool}).isRequired,isRequired:lb.bool,focused:lb.bool,animationEffect:lb.string};var kx=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return i.state={active:!1,transformOrigin:"",arrowDownLeft:"",email:i.props.emailAddress,isLawful:!0},i.onSubmit=i.onSubmit.bind(i),i.onClick=i.onClick.bind(i),i.toggle=i.toggle.bind(i),i.CheckLegitimacy=i.CheckLegitimacy.bind(i),
i.checkRequired=i.checkRequired.bind(i),i.emailFocus=i.emailFocus.bind(i),i}return qt(t,e),t.prototype.componentWillMount=function(){var e=this;this.props.isActive&&setTimeout(function(){e.toggle(!0),e.setStateLeftDistance()},458)},t.prototype.componentDidMount=function(){this.emailFocus()},t.prototype.componentWillReceiveProps=function(e){var t=this;e.isActive&&setTimeout(function(){t.toggle(!0),t.setStateLeftDistance()},458)},t.prototype.componentDidUpdate=function(e,t){this.inputElement&&!t.active&&this.state.active&&this.emailFocus()},t.prototype.onSubmit=function(){this.checkRequired()?(this.toggle(!1),this.setState({isLawful:!0}),this.props.onSubmit(this.state.email),this.props.onIconSelected&&this.props.onIconSelected()):this.setState({isLawful:!1})},t.prototype.onClick=function(){this.toggle(!this.state.active),this.setStateLeftDistance()},t.prototype.setStateLeftDistance=function(){if(this.sendemail){var e=0,t=this.sendemail.getBoundingClientRect().left;this.props.chatWindowStyle!==vo&&this.props.chatWindowStyle!==yo||(e=this.props.isRightToLeft?t-40+2:t-(Ii.querySelector("#chat_window_container").clientWidth-280-10)+2),this.setState({transformOrigin:e+"px calc(100% + 19px)",arrowDownLeft:e+"px"})}},t.prototype.emailFocus=function(){var e=this;this.timer=setTimeout(function(){e.inputElement.focus()},333)},t.prototype.toggle=function(e){var t=this;this.state.active!==e&&(this.setState({active:e},function(){t.props.onToggle(e)}),!e&&this.props.onIconSelected&&this.props.onIconSelected())},t.prototype.checkRequired=function(){return Nd(this.state.email)},t.prototype.CheckLegitimacy=function(){return!!this.state.email},t.prototype.render=function(){var e=this,t=this.props,i=this.props,o=i.languages,r=i.isMobile,a=i.chatWindowStyle;return n("li",{ref:function(t){e.sendemail=t},className:"footer__svg "+(t.disabled?"footer__svg--disabled":"")},n("div",{id:"icon_container",onClick:!r||t.windowDisabled||this.state.active?null:function(t){t.stopPropagation(),e.onClick(t)}},n("span",{title:o.buttonTranscript},n(hx,{id:"iconSendEmail",color:t.color,type:"sendemail",active:this.state.active,onClick:t.windowDisabled||r?null:this.onClick})),r&&o.buttonTranscript),n("div",{onClick:function(e){return e.stopPropagation()}},n(Ly,{id:"sendEmail",iconId:"iconSendEmail",ifShow:this.state.active,showDirection:"up",ifHasClose:!0,onClose:function(){e.toggle(!1)},chatWindowStyle:a,transformOrigin:this.state.transformOrigin,arrowDownLeft:this.state.arrowDownLeft},n("div",{className:"bubble--title"},o.promptEmail),n(Cx,{ref:function(t){t&&(e.inputElement=t.element)},style:this.state.isLawful?null:{borderColor:"#ff0000"},input:{onInput:function(t){return e.setState({email:t.target.value})},value:this.state.email,onKeyDown:function(t){13===t.which&&e.checkRequired()&&(t.stopPropagation(),e.onSubmit())}},className:"footer-text-single-line",maxLength:128,isRequired:!0,meta:{touched:!0,invalid:this.state.showRequired}}),n("div",{className:"bubble__operation"},n(px,{type:"primary",text:o.buttonSend,onClick:function(){return e.onSubmit()},disabled:!this.CheckLegitimacy()})))))},t}(I);kx.protoTypes={disabled:lb.bool,onSubmit:lb.func,onIconStatusChange:lb.func,languages:lb.shape({}),chatWindowStyle:lb.oneOf([yo,vo,wo])};var Sx=function(e){var t=Cs(e),n=vs(e),i=Ks(e),o=js(e,"email");return{chatWindowStyle:Yc(e,la(e)),isPoppedOut:Yo(e),isRightToLeft:ec(e),isActive:i&&!t&&!n,disabled:!1,color:"white",emailAddress:o,languages:Ya(e).languages}},Ax=function(e){return{onSubmit:function(t){sm("livechat.chat.visitor.setEmail",t),e(mh(t))},onToggle:function(t){e(oh(t))}}},Tx=Jw(Sx,Ax)(kx),Ix=function(e){return n("li",{title:e.languages.buttonAudioChat,className:"footer__svg "+(e.disabled?"footer__svg--disabled":""),onClick:function(){e.isMobile&&!e.windowDisabled&&!e.disabled&&e.onClick&&(e.onClick(),e.onIconSelected&&e.onIconSelected())}},n(hx,{id:"iconAudioChat",color:e.color,type:"voicechat",active:e.active,onClick:function(t){t.stopPropagation(),e.isMobile||e.windowDisabled||e.disabled||!e.onClick||(e.onClick(),e.onIconSelected&&e.onIconSelected())}}),e.isMobile&&e.languages.buttonAudioChat)};Ix.protoTypes={disabled:lb.bool,active:lb.bool,onClick:lb.func,color:lb.string};var Rx=function(e){return{disabled:Hs(e)||$s(e)||!Fs(e)}},Px=function(e){return{onClick:function(){e({type:"footer/chatToolAudio",payload:!0})}}},Mx=Jw(Rx,Px)(Ix),Ox=function(e){return n("li",{title:e.languages.buttonVideoChat,className:"footer__svg "+(e.disabled?"footer__svg--disabled":""),onClick:function(){e.isMobile&&!e.windowDisabled&&!e.disabled&&e.onClick&&(e.onClick(),e.onIconSelected&&e.onIconSelected())}},n(hx,{id:"iconVideoChat",color:e.color,type:"videochat",active:e.active,onClick:function(t){t.stopPropagation(),e.isMobile||e.windowDisabled||e.disabled||!e.onClick||(e.onClick(),e.onIconSelected&&e.onIconSelected())}}),e.isMobile&&e.languages.buttonVideoChat)};Ox.protoTypes={disabled:lb.bool,active:lb.bool,onIconStatusChange:lb.func,onClick:lb.func,color:lb.string};var Ex=function(e){return{disabled:Hs(e)||$s(e)||!Fs(e)}},Nx=function(e){return{onClick:function(){e({type:"footer/chatToolVideo",payload:!0})}}},Wx=Jw(Ex,Nx)(Ox),Bx=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return i.state={active:!1},i.timer=null,i.printWindow=null,i.getPrintContent=i.getPrintContent.bind(i),i.getPrintElement=i.getPrintElement.bind(i),i.print=i.print.bind(i),i}return qt(t,e),t.prototype.getPrintContent=function(){var e=this;return n("div",{className:xo(this.props.windowStyle),ref:function(t){e.element=t}}," ",n(this.props.content,{isPrint:!0})," ")},t.prototype.getPrintElement=function(){var e=this;if(oo){if(!this.printWindow&&!this.timer){this.printWindow=Ti.open("about:blank","_blank","width=800\uff0c height=600, status=yes, toolbar=no, resizable=yes,location=no,tilebar=no");var t=this.printWindow.document,i=t.head,o=t.createElement("style");o.innerHTML=this.props.innerCss,i.appendChild(o),setTimeout(function(){t.body.appendChild(e.element),e.print(e.printWindow)},0)}return n("div",{style:{display:"none"}},this.getPrintContent())}return n(Ob,{key:"printWin",id:"print_transcript_container",style:{width:0,height:0},callback:function(t){e.print(t.contentWindow)},innerCss:this.props.innerCss},this.getPrintContent())},t.prototype.print=function(e){var t=this;this.timer||(this.timer=setTimeout(function(){e.focus(),e.print(),e.close(),t.setState({active:!1}),t.timer=null,t.printWindow=null},200))},t.prototype.render=function(){var e=this,t=this.props,i=this.props,o=i.languages,r=i.isMobile,a=this.state.active;return n("li",{title:o.buttonPrint,className:"footer__svg "+(a?"footer__svg--disabled":""),onClick:!r||t.windowDisabled||this.state.active?null:function(){e.setState({active:!0}),t.onIconSelected&&t.onIconSelected()}},n(hx,{id:"iconPrint",color:t.color,type:"print",active:this.state.active,onClick:r||t.windowDisabled?null:function(n){n.stopPropagation(),t.onIconSelected&&t.onIconSelected(),e.setState({active:!0})}}),r&&o.buttonPrint,this.state.active&&this.getPrintElement())},t}(I);Bx.protoTypes={onIconSelected:lb.func,onPrint:lb.func,color:lb.string};var Dx=yb({type:wb(["agentSendText","agentAddInvitationText",po,"agentSendUrl","agentSendFile","agentSendImage","agentSendImageStart"]).isRequired,message:wb([hb,yb({name:hb,url:hb})]).isRequired,translated:hb,ifShowName:mb,sender:yb({name:hb.isRequired,avatar:hb}).isRequired,time:xb(Date)}).isRequired,zx=yb({type:wb(["visitorText","visitorAddTextMessage","visitorSendFile","visitorSendImage"]).isRequired,message:wb([hb,yb({name:hb,url:hb})]).isRequired,translated:hb,time:xb(Date)}).isRequired,jx=yb({type:gb.isRequired,message:wb([hb,vb,ub(vb)])}).isRequired,qx=(yb({type:wb(["visitorFile","visitorImage"]).isRequired,fileName:hb.isRequired,percent:gb.isRequired,onCloseClick:bb}).isRequired,yb({type:wb(["chatbotBadAnswer"]).isRequired,message:yb({Message:hb,TextChatWithAgent:hb}).isRequired,sender:yb({name:hb,avatar:hb}).isRequired,time:xb(Date),onChatWithAgentClick:bb}).isRequired),Lx=yb({type:wb(["chatbotRequestQuestionGuid"]).isRequired,message:hb.isRequired,sender:yb({name:hb,avatar:hb}).isRequired,time:xb(Date)}).isRequired,Vx=yb({type:wb(["chatbotPossibleAnswer"]).isRequired,message:yb({Message:hb.isRequired,RelatedQuestion:ub(yb({QuestionId:gb,QuestionName:hb}))}).isRequired,sender:yb({name:hb,avatar:hb}).isRequired,time:xb(Date),onRelatedQuestionClick:bb}).isRequired,Fx=yb({type:wb(["chatbotHighConfidenceAnswer"]).isRequired,message:yb({GUID:hb.isRequired,Answer:hb.isRequired,TextRelatedQuestions:hb,TextHelpful:hb,TextNotHelpful:hb,IfSystem:mb,RelatedQuestion:ub(yb({QuestionId:gb,QuestionName:hb}))}).isRequired,sender:yb({name:hb,avatar:hb}).isRequired,time:xb(Date),onRelatedQuestionClick:bb,OnRateClick:bb}).isRequired,Ux=function(e){function t(){return zt(this,t),Vt(this,e.apply(this,arguments))}return qt(t,e),t.prototype.componentDidMount=function(){var e=this.props.scrollDown;e(),so(this.container,e)},t.prototype.componentWillUnmount=function(){co(this.container,this.props.scrollDown)},t.prototype.render=function(){var e=this,t=this.props;return n("div",{id:"visitorRequestChat"===t.type&&"system-queue-position",className:"chat-system-message window__chatSystemMessage",ref:function(t){e.container=t}},t.windowStyle===yo&&n("div",{className:"window__chatSystemMessageContent"},t.message),t.windowStyle!==yo&&t.message,t.windowStyle===yo&&[n(hx,{type:fx,className:"icon-bubble-line",viewBox:"0 0 19 28"})])},t}(I);Ux.propTypes=jx;var Hx=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return i.state={ifShowLoading:!1,mobileShowTime:!1},i.timer=null,i.timerMobileShowTime=null,i.onClick=i.onClick.bind(i),i}return qt(t,e),t.prototype.componentDidMount=function(){var e=this;"visitorText"===this.props.type&&(this.timer=setTimeout(function(){e.setState({ifShowLoading:!0}),e.timer=null},1e3));var t=this.props.scrollDown;t(),so(this.container,t)},t.prototype.componentWillReceiveProps=function(e){"visitorText"!==e.type&&(this.timer&&clearTimeout(this.timer),this.setState({ifShowLoading:!1}))},t.prototype.componentWillUnmount=function(){this.timer&&clearTimeout(this.timer),this.timerMobileShowTime&&clearTimeout(this.timerMobileShowTime),co(this.container,this.props.scrollDown)},t.prototype.onClick=function(e){var t=this;e.stopPropagation(),this.props.isMobile&&(this.setState({mobileShowTime:!0}),this.timerMobileShowTime&&clearTimeout(this.timerMobileShowTime),this.timerMobileShowTime=setTimeout(function(){t.setState({mobileShowTime:!1}),t.timerMobileShowTime=null},2e3))},t.prototype.render=function(){var e=this,t=this.props,i=void 0,o=!1,r="";return"visitorText"===t.type?i=Zd(t.message,n("br",null)):"visitorAddTextMessage"===t.type?t.translated?(i=Zd(t.translated,n("br",null)),i.push(n("i",{className:"window__chatMessageOrignal window__chatMessageTranslatedTag"},"(",t.translatedTag,")")),i.push(n("i",{className:"window__chatMessageOrignal"},Zd(t.message,n("br",null))," (",t.originalTag,")"))):i=Zd(t.message,n("br",null)):"visitorSendImage"===t.type?(o=!0,r=/.*[.](gif)$/i.test(t.message.name)?t.message.url:t.message.url+"&maxWidth=200&maxHeight=200",i=n("a",{href:t.message.url,target:"_blank",rel:"noopener noreferrer"},n("img",{src:r,alt:t.message.name,style:{maxWidth:200,maxHeight:200},onLoad:t.scrollDown}))):"visitorSendFile"===t.type?/.*[.](jpg|gif|jpeg|png|bmp)$/i.test(t.message.name)?(o=!0,r=/.*[.](gif)$/i.test(t.message.name)?t.message.url:t.message.url+"&maxWidth=200&maxHeight=200",i=n("a",{href:t.message.url,target:"_blank",rel:"noopener noreferrer"},n("img",{src:r,alt:t.message.name,style:{maxWidth:200,maxHeight:200},onLoad:t.scrollDown}))):(o=!1,i=n("div",{className:"chat-visitor-message window__chatVisitorMessage--file"},n(Fv,{type:Vv.sendfile}),n("a",{href:t.message.url,target:"_blank",rel:"noopener noreferrer"},t.message.name))):"visitorFile"!==t.type&&"visitorImage"!==t.type||(i=[t.fileName],t.percent&&i.push(n("span",null,"(",t.percent,"%)")),t.onCloseClick&&i.push(n("i",{className:"icon icon-close",style:{color:"#a3a3a3",fontSize:12},onClick:function(e){e.preventDefault(),e.stopPropagation(),t.onCloseClick()}})),i.push(n("span",{className:"chat-message--loading"},n(hx,{type:"loading",className:"svg--loading",viewBox:"0 0 100 100"})))),n("div",{className:"chat-visitor window__chatVisitor clearfix",ref:function(t){e.container=t}},n("div",{onClick:this.props.isMobile?this.onClick:void 0,className:Bv("chat-visitor-message","window__chatVisitorMessage",o&&"chat-message--img")},i,this.state.ifShowLoading&&n("span",{className:"chat-message--loading"},n(hx,{type:"loading",className:"svg--loading",viewBox:"0 0 100 100"})),t.windowStyle===yo&&[n(hx,{type:"bubblelineright",className:"icon-bubble-line-right",viewBox:"0 0 19 28"})]),this.props.isMobile&&"visitorText"!==this.props.type&&t.time&&n("div",{style:{opacity:this.state.mobileShowTime?1:0},className:"chat-time chat__time"},Ui(t.time)),!this.props.isMobile&&"visitorText"!==this.props.type&&t.time&&n("div",{className:"chat-time chat__time"},Ui(t.time)),"visitorText"===this.props.type&&n("div",{style:{opacity:0},className:"chat-time chat__time"},Ui(t.time)))},t}(I);Hx.propTypes=zx;var Gx=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return i.state={mobileShowTime:!1},i.timer=null,i.onClick=i.onClick.bind(i),i}return qt(t,e),t.prototype.componentDidMount=function(){var e=this.props;e.scrollDown(),sm("livechat.chat.agent.input",e.sender,e.message),so(this.container,e.scrollDown)},t.prototype.componentWillUnmount=function(){this.timer&&clearTimeout(this.timer),co(this.container,this.props.scrollDown)},t.prototype.onClick=function(e){var t=this;e.stopPropagation(),this.props.isMobile&&(this.setState({mobileShowTime:!0}),this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){t.setState({mobileShowTime:!1}),t.timer=null},2e3))},t.prototype.render=function(){var e=this,t=this.props,i=void 0,o=!1,r="";return"agentSendText"===t.type||"autoInvMsg"===t.type||"agentAddInvitationText"===t.type||t.type===po?t.translated?(i=Zd(t.translated,n("br",null)),i.push(n("i",{className:"window__chatMessageOrignal window__chatMessageTranslatedTag"},"(",t.translatedTag,")")),i.push(n("i",{className:"window__chatMessageOrignal"},Zd(t.message,n("br",null))," (",t.originalTag,")"))):i=Zd(t.message,n("br",null)):"agentSendUrl"===t.type?i=Qi(t.message):"agentSendImage"===t.type?(o=!0,r=/.*[.](gif)$/i.test(t.message.name)?t.message.url:t.message.url+"&maxWidth=200&maxHeight=200",i=n("a",{href:t.message.url,target:"_blank",rel:"noopener noreferrer"},n("img",{src:r,alt:t.message.name,style:{maxWidth:200,maxHeight:200},onLoad:t.scrollDown}))):"agentSendFile"===t.type&&(/.*[.](jpg|gif|jpeg|png|bmp)$/i.test(t.message.name)?(o=!0,r=t.message.url,i=n("a",{href:t.message.url,target:"_blank",rel:"noopener noreferrer"},n("img",{src:r,alt:t.message.name,style:{maxWidth:200,maxHeight:200},onLoad:t.scrollDown}))):(o=!1,i=n("div",{className:"chat-operator-message window__chatAgentMessage--file"},n("a",{href:t.message.url,target:"_blank",rel:"noopener noreferrer"},t.message.name)))),n("div",{className:"window__chatAgent clearfix",ref:function(t){e.container=t}},t.ifShowAvatar&&t.sender.avatar&&n("div",{className:"agentMessage__avatar"},n(Gy,{src:t.sender.avatar,alt:t.sender.name,className:"agentMessage__avatarImg"})),n("div",{onClick:this.props.isMobile?this.onClick:void 0,className:Bv("chat-operator-message","window__chatAgentMessage",o&&"chat-message--img","agentSendImageStart"===t.type&&"chat-message--imgLoading",(!t.ifShowAvatar||!t.sender.avatar)&&"window__chatMessageNoAvatar")},!t.ifShowAvatar&&t.ifShowName&&t.sender.name&&n("div",{className:"chat-operator-name window__chatAgentName"},t.sender.name),"agentSendImageStart"===t.type&&n(hx,{type:"loading",className:"svg--loading",viewBox:"0 0 100 100"}),i,t.windowStyle===yo&&[n(hx,{type:fx,className:"icon-bubble-line",viewBox:"0 0 19 28"})]),this.props.isMobile&&n("div",{style:{opacity:this.state.mobileShowTime?1:0},className:"chat-time chat__time"},Ui(t.time)),!this.props.isMobile&&n("div",{className:"chat-time chat__time"},Ui(t.time)))},t}(I);Gx.propTypes=Dx;var Yx=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return i.state={mobileShowTime:!1},i.timer=null,i.onClick=i.onClick.bind(i),i}return qt(t,e),t.prototype.componentDidMount=function(){var e=this.props.scrollDown;e(),so(this.container,e)},t.prototype.componentWillUnmount=function(){this.timer&&clearTimeout(this.timer),co(this.container,this.props.scrollDown)},t.prototype.onClick=function(e){var t=this;e.stopPropagation(),this.props.isMobile&&(this.setState({mobileShowTime:!0}),this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){t.setState({mobileShowTime:!1}),t.timer=null},2e3))},t.prototype.render=function(){var e=this,t=this.props;return t.message&&(t.message.Message||t.message.TextChatWithAgent)?n("div",{className:"window__chatAgent clearfix",ref:function(t){e.container=t}},t.ifShowAvatar&&t.sender.avatar&&n("div",{className:"agentMessage__avatar"},n(Gy,{src:t.sender.avatar,alt:t.sender.name,className:"agentMessage__avatarImg"})),n("div",{onClick:this.props.isMobile?this.onClick:void 0,className:Bv("chat-operator-message","window__chatAgentMessage",!t.ifShowAvatar&&"window__chatMessageNoAvatar")},!t.ifShowAvatar&&t.ifShowName&&t.sender.name&&n("div",{className:"chat-operator-name window__chatAgentName"},t.sender.name),t.message.Message&&n("div",null,t.message.Message),t.message.TextChatWithAgent&&n("a",{onClick:function(e){e.preventDefault(),e.stopPropagation(),t.onChatWithAgentClick()},className:"btn btn-primary"},t.message.TextChatWithAgent),t.windowStyle===yo&&[n(hx,{type:fx,className:"icon-bubble-line",viewBox:"0 0 19 28"})]),this.props.isMobile&&n("div",{style:{opacity:this.state.mobileShowTime?1:0},className:"chat-time chat__time"},Ui(t.time)),!this.props.isMobile&&n("div",{className:"chat-time chat__time"},Ui(t.time))):null},t}(I);Yx.propTypes=qx;var Qx=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return i.timer=null,i}return qt(t,e),t.prototype.componentDidMount=function(){var e=this;this.timer=setTimeout(function(){e.props.onChatbotTimeout(e.props.message),e.timer=null},3e4);var t=this.props.scrollDown;t(),so(this.container,t)},t.prototype.componentWillUnmount=function(){this.timer&&clearTimeout(this.timer),co(this.container,this.props.scrollDown)},t.prototype.render=function(){var e=this,t=this.props;if(!t.message)return null;if(t.timeout){var i={type:"chatbotBadAnswer",message:t.message,sender:t.sender,time:t.time,onChatWithAgentClick:t.onChatWithAgentClick,ifShowName:t.ifShowName,ifShowAvatar:t.ifShowAvatar,windowStyle:t.windowStyle,isMobile:t.isMobile,scrollDown:t.scrollDown};return n(Yx,i)}return n("div",{className:"window__chatAgent clearfix",ref:function(t){e.container=t}},t.ifShowAvatar&&t.sender.avatar&&n("div",{className:"agentMessage__avatar"},n(Gy,{src:t.sender.avatar,alt:t.sender.name,className:"agentMessage__avatarImg"})),n("div",{className:Bv("chat-operator-message","window__chatAgentMessage",!t.ifShowAvatar&&"window__chatMessageNoAvatar")},n("div",{className:"dot"},n("div",{className:Bv("dot__element",!eo&&"dot__element--loadingAnimation","animated-delayFrames7")}),n("div",{className:Bv("dot__element",!eo&&"dot__element--loadingAnimation","animated-delayFrames10")}),n("div",{className:Bv("dot__element",!eo&&"dot__element--loadingAnimation","animated-delayFrames13")})),t.windowStyle===yo&&[n(hx,{type:fx,className:"icon-bubble-line",viewBox:"0 0 19 28"})]))},t}(I);Qx.protoTypes=Lx;var Jx=function(e){try{return JSON.parse(e).messages.map(function(e){if(void 0!==e.text)return n("div",{dangerouslySetInnerHTML:{__html:e.text||""}});if(e.attachment){if("image"===e.attachment.type){var t=e.attachment.payload.url;return n("a",{href:t,target:"_blank",rel:"noopener noreferrer"},n(Gy,{src:t,alt:"img",style:{maxWidth:200,maxHeight:200}}))}if("file"===e.attachment.type)return n("div",{className:"chat-operator-message window__chatAgentMessage--file"},n("a",{href:e.attachment.payload.url,target:"_blank",rel:"noopener noreferrer"},"File"))}return null}).filter(function(e){return null!=e})}catch(t){return e}},Xx=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return i.state={mobileShowTime:!1,helpful:!1,notHelpful:!1},i.timer=null,i.onClick=i.onClick.bind(i),i}return qt(t,e),t.prototype.componentDidMount=function(){var e=this.props.scrollDown;e(),so(this.container,e)},t.prototype.componentWillUnmount=function(){this.timer&&clearTimeout(this.timer),co(this.container,this.props.scrollDown)},t.prototype.onClick=function(e){var t=this;e.stopPropagation(),this.props.isMobile&&(this.setState({mobileShowTime:!0}),this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){t.setState({mobileShowTime:!1}),t.timer=null},2e3))},t.prototype.render=function(){var e=this,t=this.props;return n("div",{className:"window__chatAgent clearfix",ref:function(t){e.container=t}},t.ifShowAvatar&&t.sender.avatar&&n("div",{className:"agentMessage__avatar"},n(Gy,{src:t.sender.avatar,alt:t.sender.name,className:"agentMessage__avatarImg"})),n("div",{onClick:this.props.isMobile?this.onClick:void 0,className:Bv("chat-operator-message","window__chatAgentMessage",!t.ifShowAvatar&&"window__chatMessageNoAvatar")},!t.ifShowAvatar&&t.ifShowName&&t.sender.name&&n("div",{className:"chat-operator-name window__chatAgentName"},t.sender.name),0===t.message.AnswerContentType&&n("div",{dangerouslySetInnerHTML:{__html:t.message.Answer}}),0!==t.message.AnswerContentType&&n("div",null,Jx(t.message.Answer)),!t.message.IfSystem&&n("div",null,n("div",{className:Bv("chatMessage__chatBotRate",t.disableRate&&"chatMessage__chatBotRate--disabled",this.state.helpful&&"chatMessage__chatBotRate--selected"),onClick:t.disableRate?void 0:function(n){n.preventDefault(),n.stopPropagation(),e.state.notHelpful||e.setState({helpful:!0}),t.OnRateClick(t.message.GUID,!0)}},n("i",{className:"icon icon-helpful"}),n("span",{className:"chatMessage__chatBotRateText"},t.message.TextHelpful)),n("div",{className:Bv("chatMessage__chatBotRate","chatMessage__chatBotRateLast",t.disableRate&&"chatMessage__chatBotRate--disabled",this.state.notHelpful&&"chatMessage__chatBotRate--selected"),onClick:t.disableRate?void 0:function(n){n.preventDefault(),n.stopPropagation(),e.state.helpful||e.setState({notHelpful:!0}),t.OnRateClick(t.message.GUID,!1)}},n("i",{className:"icon icon-not-helpful"}),n("span",{className:"chatMessage__chatBotRateText"},t.message.TextNotHelpful))),t.message.RelatedQuestion&&t.message.RelatedQuestion.length>0&&n("div",null,n("div",{className:"chatMessage__chatBotRateSplitLine"}),n("div",null,t.message.TextRelatedQuestions),n("ul",{className:"chatMessage__questionList chatMessage__questionList--disc"},t.message.RelatedQuestion.map(function(e){return n("li",{key:e.QuestionId},n("a",{onClick:function(n){n.preventDefault(),n.stopPropagation(),t.onRelatedQuestionClick(e)}},e.QuestionName))}))),t.windowStyle===yo&&[n(hx,{type:fx,className:"icon-bubble-line",viewBox:"0 0 19 28"})]),this.props.isMobile&&n("div",{style:{opacity:this.state.mobileShowTime?1:0},className:"chat-time chat__time"},Ui(t.time)),!this.props.isMobile&&n("div",{className:"chat-time chat__time"},Ui(t.time)))},t}(I);Xx.propTypes=Fx;var Zx=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return i.state={mobileShowTime:!1},i.timer=null,i.onClick=i.onClick.bind(i),i}return qt(t,e),t.prototype.componentDidMount=function(){var e=this.props.scrollDown;e(),so(this.container,e)},t.prototype.componentWillUnmount=function(){this.timer&&clearTimeout(this.timer),co(this.container,this.props.scrollDown)},t.prototype.onClick=function(e){var t=this;e.stopPropagation(),this.props.isMobile&&(this.setState({mobileShowTime:!0}),this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){t.setState({mobileShowTime:!1}),t.timer=null},2e3))},t.prototype.render=function(){var e=this,t=this.props;return n("div",{className:"window__chatAgent clearfix",ref:function(t){e.container=t}},t.ifShowAvatar&&t.sender.avatar&&n("div",{className:"agentMessage__avatar"},n(Gy,{src:t.sender.avatar,alt:t.sender.name,className:"agentMessage__avatarImg"})),n("div",{onClick:this.props.isMobile?this.onClick:void 0,className:Bv("chat-operator-message","window__chatAgentMessage",!t.ifShowAvatar&&"window__chatMessageNoAvatar")},!t.ifShowAvatar&&t.ifShowName&&t.sender.name&&n("div",{className:"chat-operator-name window__chatAgentName"},t.sender.name),t.message.Message,n("ul",{className:"chatMessage__questionList"},t.message.RelatedQuestion.map(function(e){return n("li",{key:e.QuestionId},n("a",{onClick:function(n){n.preventDefault(),n.stopPropagation(),t.onRelatedQuestionClick(e)}},e.QuestionName))})),t.windowStyle===yo&&[n(hx,{type:fx,className:"icon-bubble-line",viewBox:"0 0 19 28"})]),this.props.isMobile&&n("div",{style:{opacity:this.state.mobileShowTime?1:0},className:"chat-time chat__time"},Ui(t.time)),!this.props.isMobile&&n("div",{className:"chat-time chat__time"},Ui(t.time)))},t}(I);Zx.propTypes=Vx;var $x=function(e){try{return JSON.parse(e)}catch(e){return}},Kx=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return i.eventListener=i.eventListener.bind(i),i}return qt(t,e),t.prototype.componentDidMount=function(){this.iframe&&this.iframe.contentWindow.parent.addEventListener("message",this.eventListener)},t.prototype.shouldComponentUpdate=function(e){return this.props.url!==e.url},t.prototype.componentWillUnmount=function(){this.iframe&&this.iframe.contentWindow&&this.iframe.contentWindow.parent&&this.iframe.contentWindow.parent.removeEventListener("message",this.eventListener)},t.prototype.eventListener=function(e){if(-1!==e.origin.toLowerCase().indexOf("comm100.com")&&e.data){var t=$x(e.data);if(!t)return;this.props.handlerAction(t)}},t.prototype.render=function(){var e=this,t=[this.props.url,"target="+decodeURIComponent(this.props.targetUrl.replace(/([^:]+:\/\/[^\/]+).*/,"$1"))].join("&");return n("iframe",{ref:function(t){e.iframe=t},frameBorder:0,scrolling:"no",src:t,style:{width:"100%",height:"100%"}})},t}(I);Kx.propTypes={handlerAction:bb,url:hb,targetUrl:hb};var e_=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return i.handlerAction=i.handlerAction.bind(i),i.state={status:"loading",height:0},i.token=Gi(n.url,"otk"),i}return qt(t,e),t.prototype.handlerAction=function(e){if(e.token===this.token){var t=0;switch(e.type){case"get_failure":this.props.getSecureFormFailure();break;case"height":t=e.height;break;case"submit":this.props.submitSecureForm(this.token,e.name);break;case"cancel":this.props.cancelSecureForm(this.token)}this.setState({status:e.type,height:0===t?this.state.height:t})}},t.prototype.render=function(){var e=this.props;return e.isHidden?null:e.url?"close"===this.state.status||"cancel"===this.state.status?null:n("div",{key:this.token,className:"chat-operator window__chatAgent clearfix"},n("div",{className:"chat-operator-message window__chatAgentMessage window__chatMessageNoAvatar chat-message--imgLoading",style:{display:"loading"===this.state.status?"block":"none"}},n(hx,{type:"loading",className:"svg--loading",viewBox:"0 0 100 100"}),e.windowStyle===yo&&[n(hx,{type:fx,className:"icon-bubble-line",viewBox:"0 0 19 28"})]),n("div",{style:{position:"relative",width:"100%",height:this.state.height}},n(Kx,{handlerAction:this.handlerAction,url:e.url,targetUrl:e.targetUrl}))):null},t}(I);e_.propTypes={getSecureFormFailure:bb,submitSecureForm:bb,cancelSecureForm:bb,url:hb,targetUrl:hb,isHidden:mb};var t_=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return i.state={mobileShowTime:!1},i.timerMobileShowTime=null,i.onClick=i.onClick.bind(i),i}return qt(t,e),t.prototype.componentDidMount=function(){var e=this.props.scrollDown;e(),so(this.container,e)},t.prototype.componentWillUnmount=function(){this.timerMobileShowTime&&clearTimeout(this.timerMobileShowTime),co(this.container,this.props.scrollDown)},t.prototype.onClick=function(e){var t=this;e.stopPropagation(),this.props.isMobile&&(this.setState({mobileShowTime:!0}),this.timerMobileShowTime&&clearTimeout(this.timerMobileShowTime),this.timerMobileShowTime=setTimeout(function(){t.setState({mobileShowTime:!1}),t.timerMobileShowTime=null},2e3))},t.prototype.render=function(){var e=this,t=this.props;return this.state.timeout?null:n("div",{className:"window__chatAgent clearfix",ref:function(t){e.container=t}},t.ifShowAvatar&&t.sender.avatar&&n("div",{className:"agentMessage__avatar"},n(Gy,{src:t.sender.avatar,alt:t.sender.name,className:"agentMessage__avatarImg"})),n("div",{onClick:this.props.isMobile?this.onClick:void 0,className:Bv("chat-operator-message","window__chatAgentMessage",(!t.ifShowAvatar||!t.sender.avatar)&&"window__chatMessageNoAvatar")},!t.ifShowAvatar&&t.ifShowName&&t.sender.name&&n("div",{className:"chat-operator-name window__chatAgentName"},t.sender.name),n("div",{className:"dot"},n("div",{className:"dot__element dot__element--loadingAnimation animated-delayFrames7"}),n("div",{className:"dot__element dot__element--loadingAnimation animated-delayFrames10"}),n("div",{className:"dot__element dot__element--loadingAnimation animated-delayFrames13"})),t.windowStyle===yo&&[n(hx,{type:fx,className:"icon-bubble-line",viewBox:"0 0 19 28"})]),this.props.isMobile&&n("div",{style:{opacity:this.state.mobileShowTime?1:0},className:"chat-time chat__time"},Ui(t.time)),!this.props.isMobile&&n("div",{className:"chat-time chat__time"},Ui(t.time)))},t}(I);t_.protoTypes=yb({message:hb,time:xb(Date),ifShowName:mb,sender:yb({name:hb.isRequired,avatar:hb}).isRequired,ifShowAvatar:mb}).isRequired;var n_=function(e,t,i){return e.content?"string"==typeof e.content&&e.content?n(Ux,{type:e.type,message:e.content,windowStyle:t,sender:e.sender,scrollDown:i}):"string"==typeof e.content.text&&e.content.text?n(Ux,{type:e.type,message:e.content.text,windowStyle:t,sender:e.sender,scrollDown:i}):null:null},i_=/{queuePosition}/gi,o_=/{estimatedWaitTime}/gi,r_=function(e,t,i){if(e.content){var o=e.content;return i_.test(o)&&void 0===e.queuePosition?null:o_.test(o)&&void 0===e.estimatedWaitTime?null:(o=o.replace(i_,e.queuePosition),o=o.replace(o_,e.estimatedWaitTime),n(Ux,{type:e.type,message:o,windowStyle:t,scrollDown:i}))}return null},a_=function(e,t,i,o,r){var a=[];if(e.content){for(var s=e.content.split(/{linkText}/gi),c=0;c<s.length;c+=1){var d=s[c];a.push(d),c<s.length-1&&a.push(n("a",{onClick:i},t))}return n(Ux,{type:e.type,message:a,windowStyle:o,scrollDown:r})}return null},s_=function(e,t,i,o){if(e.content){var r=n("a",{onClick:t},e.content);return n(Ux,{type:"startChatAgain",message:r,windowStyle:i,scrollDown:o})}return null},c_=function(e,t,i,o,r,a){return n(Hx,{type:e.type,message:e.content,time:e.time,translated:e.translated,translatedTag:t,originalTag:i,windowStyle:o,isMobile:r,fileName:e.content.fileName,percent:e.content.percent,onCloseClick:e.content.onCancel,scrollDown:a})},d_=function(e,t,i,o,r,a,s,c){return e.type===po?e.content?n(Gx,{type:e.type,message:e.content,sender:e.sender,time:e.time,ifShowName:t>1,ifShowAvatar:r,windowStyle:a,isMobile:s,scrollDown:c}):null:n(Gx,{type:e.type,message:e.content,sender:e.sender,time:e.time,translated:e.translated,ifShowName:t>1,translatedTag:i,originalTag:o,ifShowAvatar:r,windowStyle:a,isMobile:s,scrollDown:c})},l_=function(e,t,i,o,r,a,s,c,d,l,u){return"chatbotRequestQuestionGuid"===e.type?n(Qx,{type:e.type,message:e.content,sender:e.sender,time:e.time,timeout:e.timeout,ifShowName:s>1,ifShowAvatar:a,onChatbotTimeout:t,onChatWithAgentClick:i,windowStyle:c,chatWithAgentText:d,isMobile:l,scrollDown:u}):"chatbotBadAnswer"===e.type?n(Yx,{type:e.type,message:e.content,sender:e.sender,time:e.time,onChatWithAgentClick:i,ifShowName:s>1,ifShowAvatar:a,windowStyle:c,isMobile:l,scrollDown:u}):"chatbotHighConfidenceAnswer"===e.type?n(Xx,{type:e.type,message:e.content,sender:e.sender,time:e.time,
onRelatedQuestionClick:o,OnRateClick:r,ifShowName:s>1,ifShowAvatar:a,disableRate:e.disableRate,windowStyle:c,isMobile:l,scrollDown:u}):"chatbotPossibleAnswer"===e.type?n(Zx,{type:e.type,message:e.content,sender:e.sender,time:e.time,onRelatedQuestionClick:o,ifShowName:s>1,ifShowAvatar:a,windowStyle:c,isMobile:l,scrollDown:u}):null},u_=function(e,t){var i=t.involvedAgentsCount,o=t.gotoOfflineLinkText,r=t.translatedTag,a=t.originalTag,s=t.onChatWithAgentClick,c=t.onRelatedQuestionClick,d=t.OnRateClick,l=t.getSecureFormFailure,u=t.submitSecureForm,p=t.cancelSecureForm,f=t.onChatbotTimeout,h=t.onOfflineLinkClick,m=t.onStartChatAgainClick,b=t.chatStatus,g=t.scrollDown,w=t.ifShowAvatar,v=t.agentTypingText,y=t.windowStyle,x=t.chatWithAgentText,_=t.isMobile,C=t.isPrint;if("creditCardMasked"===e.type||"pendingAccept"===e.type||"pendingAudioRequesting"===e.type||"pendingHangup"===e.type||"pendingVideoRequesting"===e.type)return null;if(il(e))return n_(e,y,g);if("visitorRequestChat"===e.type)return r_(e,y,g);if(b===ho&&"systemPromoteOfflineMesage"===e.type)return a_(e,o,h,y,g);if("startChatAgain"===e.type)return s_(e,m,y,g);if("visitorText"===e.type||"visitorFile"===e.type||"visitorImage"===e.type||"visitorAddTextMessage"===e.type||"visitorSendFile"===e.type||"visitorSendImage"===e.type)return c_(e,r,a,y,_,g);if("agentSendText"===e.type||"agentAddInvitationText"===e.type||"autoInvMsg"===e.type||e.type===po||"agentSendUrl"===e.type||"agentSendFile"===e.type||"agentSendImage"===e.type||"agentSendImageStart"===e.type)return d_(e,i,r,a,w,y,_,g);if("chatbotRequestQuestionGuid"===e.type||"chatbotBadAnswer"===e.type||"chatbotHighConfidenceAnswer"===e.type||"chatbotPossibleAnswer"===e.type)return l_(e,f,s,c,d,w,i,y,x,_,g);if("agentRequestSecureForm"===e.type){var k=[];return k.push(n(Ux,{type:e.type,message:e.content.text,windowStyle:y,sender:e.sender,scrollDown:g})),C||k.push(n(e_,{isHidden:e.isHidden,url:e.content.url,targetUrl:Ri.href,getSecureFormFailure:l,submitSecureForm:u,cancelSecureForm:p,windowStyle:y,scrollDown:g})),k}return"agentTyping"!==e.type||C?null:n(t_,{message:v,time:e.time,windowStyle:y,sender:e.sender,ifShowName:i>1,ifShowAvatar:w,isMobile:_,scrollDown:g})},p_=function(e){var t=e.messages,i=Lt(e,["messages"]);return n("div",null,t.map(function(e){return u_.apply(void 0,[e].concat(i))}).filter(function(e){return null!==e}).reduce(function(e,t){return e.concat(t)},[]))};p_.propTypes={messages:ub(yb({type:gb.isRequired,sender:yb({name:hb,avatar:hb}),time:gb,translated:hb,content:pb([hb,yb({})]),ifShowLoading:mb,queuePosition:gb,estimatedWaitTime:gb})),involvedAgentsCount:gb,onChatWithAgentClick:bb,onRelatedQuestionClick:bb,OnRateClick:bb,getSecureFormFailure:bb,submitSecureForm:bb,cancelSecureForm:bb,onOfflineLinkClick:bb,onStartChatAgainClick:bb,gotoOfflineLinkText:hb,startChatAgainText:hb,translatedTag:hb,originalTag:hb,ifShowAvatar:mb,agentTypingText:hb,windowStyle:hb};var f_=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return i.onScroll=i.onScroll.bind(i),i.scrollDown=Xi(i.scrollDown.bind(i),100),i.canUpdateHideBio=!0,i.beforeunload=i.beforeunload.bind(i),i.state={},i}return qt(t,e),t.prototype.componentDidMount=function(){var e=this;this.props.onMounted(),setTimeout(function(){e.element&&(e.hasAnimation=!0,vt(e.element,"window__chat--animation"))},625),Ti.addEventListener("beforeunload",this.beforeunload)},t.prototype.shouldComponentUpdate=function(e){return this.props.messages!==e.messages||e.ifHideBio!==this.props.ifHideBio||e.height!==this.props.height||e.hasMobileExpandWindow!==this.props.hasMobileExpandWindow},t.prototype.componentDidUpdate=function(e){var t=this,n=e.ifHideBio;this.props.ifHideBio!==n&&(this.canUpdateHideBio=!1,setTimeout(function(){t.canUpdateHideBio=!0},625)),this.hasAnimation&&vt(this.element,"window__chat--animation")},t.prototype.componentWillUnmount=function(){Ti.removeEventListener("beforeunload",this.beforeunload)},t.prototype.onScroll=function(e){if(!no){var t=e.currentTarget.scrollTop;this.canUpdateHideBio&&t>0&&!this.props.ifHideBio&&this.props.onUpdateScrollStatus(!0),this.canUpdateHideBio&&0===t&&this.props.ifHideBio&&this.props.onUpdateScrollStatus(!1)}},t.prototype.beforeunload=function(){lp(this.props.chatGuid)},t.prototype.scrollDown=function(){this.element&&(this.element.scrollTop=this.element.scrollHeight)},t.prototype.render=function(){var e=this,t=this.props,i=t.greeting,o=t.height,r=(t.hasMobileExpandWindow,Lt(t,["greeting","height","hasMobileExpandWindow"])),a=void 0;if(r.windowStyle===yo){var s=0;if(this.element){var c=this.element.nextSibling;c&&"chat-input"===c.id&&(s=c.getBoundingClientRect().height)}a=r.isMobile?o-(s||48)-35:o-30-30-35-(s||41),r.isPopout&&!r.isMobile&&(a+=30)}r.isPrint&&(a="");var d=void 0;return d="<div>&nbsp;</div>"!==i&&!!i,n("div",{ref:function(t){e.element=t},className:Bv("chat window__chat window__chat--animation",r.ifShowBio?"window__chat--withBio":"window__chat--noBio"),onScroll:this.onScroll,style:{maxHeight:a}},d&&n("div",null,n("div",{className:r.windowStyle===yo?"chat-system-message window__chatSystemMessage":"greeting-message window__formGreeting"},n("div",{className:r.windowStyle===yo&&"window__chatSystemMessageContent",dangerouslySetInnerHTML:{__html:i}}),r.windowStyle===yo&&[n(hx,{type:fx,className:"icon-bubble-line",viewBox:"0 0 19 28"})])),n(p_,jt({},r,{scrollDown:this.scrollDown})))},t}(I);f_.propTypes={greeting:hb,onErrorClose:bb.isRequired,onWarningClose:bb.isRequired,onMounted:bb.isRequired,agents:fb(yb({name:hb.isRequired,avatar:hb.isRequired})).isRequired,height:gb.isRequired};var h_=function(e,t){return{type:e,time:new Date,content:t,sender:{type:"visitor"}}},m_=function(e){var t=is(e),n=as(e).length,i=!0;t.filter(function(e){return"chatbotJoinChat"===e.type}).length>0&&(n+=1,i=!1);var o=Yo(e),r=Ea(e),a=Ca(e),s=Ga(e),c=Cd(e,"greetingChatWindow");return!c||"<div>&nbsp;</div>"!==c&&"<div></div>"!==c&&"<div/>"!==c||(c=""),{height:r,isPopout:o,isMobile:a,ifShowBio:tc(e),hasMobileExpandWindow:Vs(e)&&a,windowStyle:Yc(e,s),greeting:i?c||"":"",messages:t,involvedAgentsCount:n,gotoOfflineLinkText:Cd(e,"eventLinkText")||"here",startChatAgainText:Cd(e,"startChatAgain"),translatedTag:Cd(e,"translation"),originalTag:Cd(e,"original"),agentTypingText:Cd(e,"eventOperatorIsTyping"),chatWithAgentText:Cd(e,"buttonChatbotChatWithAgent"),chatStatus:ja(e),ifShowAvatar:Qc(e)===yo||dd(e),chatGuid:cs(e),ifHideBio:Bs(e),onMounted:function(){sm("livechat.chat.display",s)}}},b_=function(e){return{submitSecureForm:function(t,n){var i=h_("pendingSubmitSecureForm",t+"\u2299"+n);e(Ah([i]))},cancelSecureForm:function(t){e(Rf(t));var n=h_("pendingCancelSecureForm","");e(Ah([n]))},getSecureFormFailure:function(){var t=h_("pendingGetSecureFormFailure","");e(Ah([t]))},onOfflineLinkClick:function(){e(yf(To))},onChatWithAgentClick:function(){e(Df())},onRelatedQuestionClick:function(t){e(zf(t))},OnRateClick:function(t,n){e(jf(n,t))},onStartChatAgainClick:function(){e(Ff())},onUpdateScrollStatus:function(t){e(Uf(t))},onChatbotTimeout:function(t){e(dh(t))}}},g_=Jw(m_,b_)(f_),w_=function(e){return{color:"white",languages:Ya(e).languages,content:g_,windowStyle:Qc(e),innerCss:ol(Qa(e),Go(e),P(Ko,e))}},v_=Jw(w_,null)(Bx),y_=function(e){var t=Ua(e);if(!Hc(e))return{tab:t};var n=Ga(e),i=Ca(e),o=ic(e,n),r=o.languages,a=ad(e),s=qs(e),c=[];return ac(e,n)&&c.push(_x),rc(e,n)&&!vs(e)&&c.push(Tx),sc(e,n)&&c.push(wx),cc(e,n)&&c.push(Mx),dc(e,n)&&c.push(Wx),lc(e,n)&&c.push(v_),{windowDisabled:s,tab:t,icons:c.map(function(e){return{props:{color:a,languages:r,isMobile:i},component:e}})}},x_=Jw(y_,null)(sx),__=function(e){var t=Ca(e),n=t||fr(e)?null:ws(e),i=Ua(e);if(!Hc(e))return{tab:i,poweredByUrl:n,showChatWithAgent:Ka(e)&&"toolbarWithBubble"===Va(e),chatWithAgentText:Cd(e,"buttonChatbotChatWithAgent")};var o=Ga(e);return{tab:i,icons:Yc(e,o)!==wo||t?null:x_,poweredByUrl:n}},C_=function(e){return{onChatWithAgentClick:function(){e(Df())}}},k_=Jw(__,C_)(rx),S_=pb([hb.isRequired,gb.isRequired]).isRequired,A_=function(e,t){return{field:yb(Object.assign({type:wb([].concat(e)).isRequired,id:S_,value:pb([hb,ub(hb)]),label:hb.isRequired,error:hb,isRequired:mb,isErrorShowed:mb,isHidden:mb,isFocused:mb},t)).isRequired}},T_=A_(fo),I_=(A_("comment"),A_("subject"),A_("content"),A_("ticket")),R_=A_(["text","name","phone","company","subject","ticket"]),P_=A_(["textarea","comment","content"]),M_=A_("checkbox"),O_=function(e){return A_(e,{options:ub(yb({label:hb.isRequired,value:hb})).isRequired})},E_=A_("department",{options:ub(yb({label:hb.isRequired,value:pb([gb,hb]),isOnline:mb.isRequired})).isRequired,value:pb([hb,gb,ub(hb)]).isRequired}),N_=O_("rating"),W_=O_(["select","product"]),B_=O_("checkbox-list"),D_=O_("radio"),z_={field:yb({type:wb(["custom"]).isRequired,id:S_,element:bb.isRequired}).isRequired},j_={field:yb({type:wb(["attachment"]).isRequired,id:S_,value:pb([xb(window.File),hb])}).isRequired},q_={},L_=ci(5)(function(e){return ji("iframe",{src:e,style:{display:"none"}},document.body).then(function(t){function n(e){var t=e.data,n=o(t);if(n&&q_[n.meta]){var i=q_[n.meta],r=i.reject,a=i.resolve;n.error?r(n.payload):a(n.payload)}}var i=_e(t.contentWindow,e),o=function(e){try{return JSON.parse(e)}catch(e){return}};return i.subscribe(n),i})}),V_=function(e,t){return yt({type:"facebook-init",payload:e},t)},F_=function(e){return yt({type:"facebook-login"},e)},U_=function(e,t){return yt({type:"google-init",payload:e},t)},H_=function(e){return yt({type:"google-login"},e)},G_=function(e,t){return function(i){function o(e){zt(this,o);var t=Vt(this,i.call(this,e));return t.state={status:"loading"},t}return qt(o,i),o.prototype.componentDidMount=function(){var t=this;e().then(function(){t.setState({status:"done"})},function(){t.setState({status:"error"})})},o.prototype.render=function(){return"loading"===this.state.status?n(hx,{type:"loading",className:"svg--loading",viewBox:"0 0 100 100"}):"done"===this.state.status?n(t,this.props):null},o}(I)},Y_=function(e){return n("div",{className:"greeting-message window__formGreeting",id:e.prefix+"-greeting",dangerouslySetInnerHTML:{__html:e.greeting}})},Q_=av("greeting")(Y_),J_=function(e){var t=e.isSubmitting,i=e.onClick,o=e.success,r=e.text,a=e.disabled,s=Lt(e,["isSubmitting","onClick","success","text","disabled"]);return n("div",jt({className:Bv("buttonProgressContainer",t&&!o&&"buttonProgressContainerLoading",o&&"buttonProgressContainerSuccess")},s),n(px,{type:"primary",text:r,className:"buttonProgressBtnAnimated buttonProgressBtnDefaultSize",htmlType:"submit",onClick:i,disabled:a||t}),n("div",{className:"lds-css ng-scope"},n("div",{className:"lds-rolling"})),n("svg",{version:"1.1",className:"buttonProgress__layerCircle",id:"buttonProgress__layer-circle",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"32px",height:"32px",viewBox:"0 0 30 30",xmlSpace:"preserve"},n("path",{className:"buttonProgress__submitCirclePath",d:"M15,1.5c7.4,0,13.5,6.1,13.5,13.5S22.4,28.5,15,28.5S1.5,22.4, 1.5,15S7.6,1.5,15,1.5L15,1.5z"})),n("svg",{version:"1.1",className:"buttonProgress__layerSuccess",id:"buttonProgress__layer-success",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"16px",height:"16px",viewBox:"0 0 16 16",xmlSpace:"preserve"},n("polygon",{className:"buttonProgress__submitSuccessPath",points:"16,3.5 12.8,1 6.5,9.2 2.5,6.1 0,9.3 6,14 7.3,15"})))};J_.propTypes={success:lb.bool.isRequired,isSubmitting:lb.bool,text:lb.string.isRequired,disabled:lb.bool};var X_=function(e){return n(J_,{onClick:e.onClick,isSubmitting:e.isSubmitting,success:e.success,text:e.text,disabled:e.disabled})},Z_=av("submit")(X_),$_=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return i.shouldCOmponentUpdate=Tb(i,["input.value","isDisabled"]),i}return qt(t,e),t.prototype.componentDidMount=function(){this.props.focused&&this.element&&this.element.focus()},t.prototype.componentDidUpdate=function(e){e.focused!==this.props.focused&&this.props.focused&&this.element&&this.element.focus()},t.prototype.render=function(){var e=this,t=this.props,i=!(!t.input.value&&!t.initialValue);return n("div",{className:Bv("container-checkbox",t.isDisabled&&"disable",t.className),onClick:t.isDisabled?void 0:function(){t.input.onChange(!i,t.text,t.id)}},n("span",{className:"checkbox__text"},t.text),n("input",{id:"checkbox-"+t.id,type:"Checkbox",className:"checkbox",disabled:!!t.isDisabled&&"disabled",checked:i,onFocus:t.input.onFocus,onBlur:t.input.onBlur,ref:function(t){e.element=t}}),n("i",{className:i?"selected":"unselected"},n(hx,{type:"checkbox"})))},t}(I);$_.propTypes={input:lb.shape({value:lb.bool.isRequired,onChange:lb.func.isRequired,onFocus:lb.func.isRequired,onBlur:lb.func.isRequired}).isRequired,initialValue:lb.bool,onChange:lb.func,text:lb.string,className:lb.string,isDisabled:lb.bool,id:lb.string,focused:lb.bool},$_.defaultProps={initialValue:!1};var K_=["name",fo,"phone","company","product","department","rating","comment","subject","content","attachment"],eC=function(e){return K_.indexOf(e)>=0},tC=function(e){var t=function(t){function i(e){zt(this,i);var n=Vt(this,t.call(this,e));return n.params={onChange:n.onChange.bind(n),onBlur:n.onBlur.bind(n),onFocus:n.onFocus.bind(n),siteId:e.siteId,style:e.style,isHorizontal:e.isHorizontal,disabled:e.disabled,languages:e.languages},n.shouldComponentUpdate=Tb(n,["field","disabled"]),n}return qt(i,t),i.prototype.componentWillReceiveProps=function(e){var t=this.params;t.disabled===e.disabled&&t.languages===e.languages||(this.params=Object.assign({},this.params,{disabled:e.disabled,languages:e.languages}))},i.prototype.onChange=function(e){this.props.onChange(this.props.field,e)},i.prototype.onBlur=function(){this.props.onBlur(this.props.field)},i.prototype.onFocus=function(){this.props.onFocus(this.props.field)},i.prototype.render=function(){var t=this.props.field,i=t.label,o=t.error,r=t.isErrorShowed,a=t.isHidden,s=t.isRequired,c=eC(t.type);if(a)return null;var d="checkbox"===t.type&&!this.props.isHorizontal;return n("div",{className:Bv("box-field",c&&"system-field")},n("div",{className:"field-name"},d?"":i,s&&n("span",{className:"field__requiredTag"},"*"),r&&o&&n("span",{className:"field__requiredMsg"},o)),e(t,this.params))},i}(I);return t.propTypes={field:pb([M_,B_,T_,D_,P_,R_].map(function(e){return yb(e.field)})),onChange:bb.isRequired,onBlur:bb.isRequired,onFocus:bb.isRequired,siteId:gb.isRequired,isHorizontal:mb,style:wb([wo,vo,yo]).isRequired},gt(t)},nC=function(e,t){var i=t.onChange,o=t.onBlur,r=t.onFocus,a=t.isHorizontal,s=t.disabled,c=e.value;if(Array.isArray(c)){var d=c.indexOf(e.label);c=d>=0?"true":"false",i(d>=0?"true":"false")}else c||(c="false",i("false"));return n($_,{input:{value:c&&"true"===c.toString(),onChange:function(e){i(e?"true":"false")},onFocus:r,onBlur:o},text:a?"":e.label,id:e.id,focused:e.isFocused,isDisabled:s})},iC=tC(nC);iC.propTypes=M_;var oC=gt(iC),rC=function(){},aC=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));i.Change=i.Change.bind(i),i.shouldComponentUpdate=Tb(i,["input.value","options"]);var o=i.validate.bind(i);return i.componentDidMount=o,i.componentDidUpdate=o,i}return qt(t,e),t.prototype.validate=function(){var e=this,t=this.props.input.value;0!==t.length&&t.every(function(t){return e.props.options.every(function(e){return e.id.toString()!==t.toString()})})&&this.props.input.onChange([])},t.prototype.Change=function(e,t,n){var i=this.props.input.value,o=this.props.input.onChange||rC;o(-1===i.indexOf(n)?i.concat(n):i.filter(function(e){return e!==n}))},t.prototype.render=function(){var e=this,t=this.props,i=t.className,o=t.options,r=t.align,a=t.focused,s=Lt(t,["className","options","align","focused"]);return n("div",{className:Bv("container-checkboxlist",i)},o.map(function(t,i){return n("div",{key:t.id,className:"horizontal"===r?"horizontal":"vertical"},n($_,jt({},s,{focused:0===i&&a,id:t.id.toString(),text:t.text,input:{value:-1!==e.props.input.value.indexOf(t.id.toString()),onChange:e.Change,onBlur:e.props.input.onBlur,onFocus:e.props.input.onFocus}})))}))},t}(I);aC.defaultProps={align:"vertical"},aC.propTypes={input:lb.shape({value:lb.arrayOf(lb.string).isRequired,onChange:lb.func.isRequired,onFocus:lb.func.isRequired,onBlur:lb.func.isRequired}).isRequired,options:lb.arrayOf(lb.shape({text:lb.string,id:lb.number})).isRequired,className:lb.string,align:lb.string};var sC=function(e,t){var i=t.onChange,o=t.onBlur,r=t.onFocus,a=t.disabled,s=e.value;return Array.isArray(s)||(s?(s=e.options.find(function(e){return e.value===s})?[s]:[],i(s)):s=[]),n(aC,{input:{value:s,onChange:i,onFocus:r,onBlur:o},options:e.options.map(function(e){return{id:e.value,text:e.label}}),focused:e.isFocused,isDisabled:a})},cC=tC(sC);cC.propTypes=B_;var dC=gt(cC),lC=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return i.onChange=i.onChange.bind(i),i}return qt(t,e),t.prototype.componentDidMount=function(){this.element=this.props.element(this.onChange),this.element&&this.container.appendChild(this.element)},t.prototype.componentWillUnmount=function(){this.container.removeChild(this.element)},t.prototype.onChange=function(e){this.props.onChange(this.props.field,e)},t.prototype.render=function(){var e=this;return n("div",{ref:function(t){e.container=t}})},t}(I);lC.propTypes=z_;var uC=gt(lC),pC=function(e,t){var i=t.onChange,o=t.onBlur,r=t.onFocus,a=t.style,s=t.disabled,c=e.value;return Array.isArray(c)&&(c=c.join(","),i(c)),n("div",{className:"field-control"},n(Cx,{maxLength:64,type:"email",input:{value:e.value,onBlur:function(e){var t=e.target.value;t!==c&&i(t),o()},onFocus:r,disabled:s},meta:{invalid:!!e.error,touched:e.isErrorShowed},isRequired:e.isRequired,isDisabled:s,animationEffect:wo===a,focused:e.isFocused}))},fC=tC(pC);fC.propTypes=T_;var hC=gt(fC),mC=function(e){function t(){zt(this,t);var n=Vt(this,e.call(this));return n.shouldComponentUpdate=Tb(n,["radioOption","selectedVal"]),n}return qt(t,e),t.prototype.componentDidMount=function(){this.props.focused&&this.first&&this.first.focus()},t.prototype.componentDidUpdate=function(e){e.focused!==this.props.focused&&this.props.focused&&this.first&&this.first.focus()},t.prototype.render=function(){var e=this;return n("div",{className:"clearfix"},this.props.radioOption.map(function(t,i){var o=e.props.id+"-"+i;return n("label",{key:t.id,className:Bv("control","controlRadio",e.props.className),htmlFor:o},t.text,n("input",{type:"radio",name:e.props.name,value:t.value,checked:e.props.selectedVal===t.value||t.checked,onChange:e.props.handleChange,onBlur:e.props.onBlur,onFocus:e.props.onFocus,id:o,disabled:e.props.disabled,ref:function(t){0===i&&(e.first=t)}}),n("div",{className:"controlIndicator"}),t.component?t.component:"")}))},t}(I);mC.propTypes={name:lb.string.isRequired,radioOption:lb.arrayOf(lb.shape({text:lb.string,value:lb.string,checked:lb.bool})).isRequired,selectedVal:lb.string,handleChange:lb.func.isRequired,onBlur:lb.func.isRequired,onFocus:lb.func.isReuqired,className:lb.string,disabled:lb.bool};var bC=function(e,t){var i=t.onChange,o=t.onBlur,r=t.onFocus,a=t.disabled,s=e.value;return Array.isArray(s)&&(s=s.find(function(t){return e.options.some(function(e){return e.value===t})})||null,i(s)),n(mC,{name:e.label,id:e.id,radioOption:e.options.map(function(t,n){return{id:n,text:t.label,value:t.value,checked:t.value===e.value}}),selectedVal:e.value,handleChange:function(e){var t=e.target.value;t!==s&&i(t)},onBlur:o,onFocus:r,focused:e.isFocused,disabled:a})},gC=tC(bC);gC.propTypes=D_;var wC=gt(gC),vC=function(e,t){var i=t.onChange,o=t.onBlur,r=t.onFocus,a=t.disabled,s=e.value;return Array.isArray(s)&&(s=s.join(","),i(s)),n("div",{className:"field-control"},n(dx,{input:{value:e.value,onBlur:function(e){var t=e.target.value;s!==t&&i(t),o()},onFocus:r},rows:2,meta:{touched:e.isErrorShowed,invalid:!!e.error},maxLength:2048,focused:e.isFocused,isDisabled:a}))},yC=tC(vC);yC.propTypes=P_;var xC=gt(yC),_C=function(e){var t=function(t,i){var o=i.onChange,r=i.onBlur,a=i.onFocus,s=i.style,c=i.disabled,d=t.value;return Array.isArray(t.value)&&(d=d.join(","),o(d)),n("div",{className:"field-control"},n(Cx,{maxLength:e,type:"text",input:{value:t.value,onBlur:function(e){var t=e.target.value;t!==d&&o(t),r()},onFocus:a},meta:{invalid:!!t.error,touched:t.isErrorShowed},isRequired:t.isRequired,animationEffect:s===wo,focused:t.isFocused,isDisabled:c}))},i=tC(t);return i.propTypes=R_,gt(i)},CC=_C(128),kC=_C(64),SC=_C(32),AC=_C(64),TC=function(e,t){return e==t},IC=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return i.shouldComponentUpdate=Tb(i,["options","disabled","className","width","selectedValue"]),i.handleChange=i.handleChange.bind(i),i.validate=i.validate.bind(i),i}return qt(t,e),t.prototype.componentDidMount=function(){this.props.focused&&this.element&&this.element.focus(),this.validate()},t.prototype.componentDidUpdate=function(e){this.validate(),e.focused!==this.props.focused&&this.props.focused&&this.element&&this.element.focus()},t.prototype.handleChange=function(e){e.target.value!==this.props.selectedValue&&this.props.handleChange(e.target.value)},t.prototype.validate=function(){var e=this;this.props.selectedValue&&this.props.options.every(function(t){return!TC(t.value,e.props.selectedValue)})&&this.props.handleChange(this.props.options[0].value)},t.prototype.render=function(){var e=this,t=this.props,i=t.options,o=t.disabled,r=t.className,a=t.width,s=t.selectedValue,c=Lt(t,["options","disabled","className","width","selectedValue"]);return n("div",{className:"select-box",style:{width:a+"px"}},n("select",jt({disabled:o,onChange:this.handleChange,className:"select "+(void 0!==r?r:""),ref:function(t){e.element=t}},c),i.map(function(e){return n("option",{index:e.id,style:{color:e.themeColor},value:e.value,selected:TC(s,e.value)},e.text)})))},t}(I);IC.propTypes={options:lb.arrayOf({id:lb.number,value:lb.string,themeColor:lb.string}),selectedValue:lb.string,handleChange:lb.func.isRequired,disabled:lb.bool,className:lb.string,width:lb.number,focused:lb.bool};var RC=function(e,t){var i=t.onChange,o=t.onBlur,r=t.onFocus,a=t.disabled,s=t.languages,c=e.value;return Array.isArray(c)&&(c=c.find(function(t){return e.options.some(function(e){return e.value===t})})||"",i(c)),n(IC,{options:[{id:-1,text:s.dropdownListDefault,value:""}].concat(e.options.map(function(e,t){return{id:t,value:e.value,text:e.label}})),selectedValue:c,handleChange:i,onFocus:r,onBlur:o,focused:e.isFocused,disabled:a})},PC=tC(RC);PC.propTypes=W_;var MC=gt(PC),OC=function(e,t){var i=t.onChange,o=t.onBlur,r=t.onFocus,a=t.disabled,s=t.languages,c=e.value;return Array.isArray(c)?(c=c.find(function(t){return e.options.some(function(e){return e.value==t})})||"",i(c)):-1===c&&(c=""),n(IC,{options:[{id:-1,text:s.fieldNoDepartment,value:""}].concat(e.options.map(function(e,t){return{id:t,value:e.value,text:e.label+" "+(e.isOnline?s.fieldDepartmentStatusOnline:s.fieldDepartmentStatusOffline),themeColor:e.isOnline?"green":"red"}})),selectedValue:c,handleChange:i,onFocus:r,onBlur:o,focused:e.isFocused,disabled:a})},EC=tC(OC);EC.propTypes=E_;var NC=gt(EC),WC=function(e,t){var i=t.onChange,o=t.onBlur,r=t.onFocus,a=t.disabled,s=e.value;return Array.isArray(s)&&(s=s.find(function(t){return e.options.some(function(e){return+e.value==+t})})||0,i(s)),n(cx,{rateVal:+s,rateItems:e.options.map(function(e){return{id:e.id,value:e.value,label:e.label}}),rateChange:i,onBlur:o,onFocus:r,disabled:a})},BC=tC(WC);BC.propTypes=N_;var DC=gt(BC),zC=function(e,t){var i=t.onChange,o=t.onBlur,r=t.onFocus,a=t.siteId,s=t.style,c=t.disabled,d=e.value;return Array.isArray(d)&&(d=d[0],i(d)),n("div",{className:"fieldControl__Ticket"},n("div",{className:"form__ticketPrefix"},"S"+a+"-T"),n("div",{className:"field-control"},n(Cx,{maxLength:256,type:"text",input:{value:d,onBlur:function(e){var t=e.target.value;t!==d&&i(t),o()},onFocus:r},meta:{invalid:!!e.error,touched:e.isErrorShowed},isDisabled:c,isRequired:e.isRequired,animationEffect:wo===s,focused:e.isFocused,className:to&&"form__input--ie10"})))},jC=tC(zC);jC.propTypes=I_;var qC=gt(jC),LC=function(e,t){var i=t.onChange,o=t.onBlur,r=t.onFocus,a=t.disabled;return n("input",{type:"file",onChange:function(e){i(e.target.files[0])},onBlur:o,onFocus:r,disabled:a})},VC=function(e){function t(){return zt(this,t),Vt(this,e.apply(this,arguments))}return qt(t,e),t.prototype.componentDidMount=function(){jb(this.div,this.props)},t.prototype.shouldComponentUpdate=function(){return!1},t.prototype.render=function(){var e=this;return n("div",{ref:function(t){e.div=t}})},t}(I),FC=function(e,t,i,o){return n(VC,{onChange:t,onBlur:i,onFocus:o})},UC=el()?FC:LC,HC=tC(UC);HC.propTypes=j_;var GC,YC=gt(HC),QC=(GC={},GC.name=kC,GC[fo]=hC,GC.phone=SC,GC.company=AC,GC.product=MC,GC.department=NC,GC.rating=DC,GC.comment=xC,GC.content=xC,GC.subject=CC,GC.ticket=qC,GC.checkbox=oC,GC["checkbox-list"]=dC,GC.custom=uC,GC.radio=wC,GC.select=MC,GC.textarea=xC,GC.text=CC,GC.attachment=YC,GC),JC=function(e){var t=e.fields,i=Lt(e,["fields"]);return n("div",{className:"field-table form-style-hor"},t.map(function(e){return n(QC[e.type],jt({},i,{field:e,key:e.id}))}))},XC=av("form")(JC),ZC=["name",fo,"company","phone","comment","content","subject","text","textarea"],$C=ci(1)(function(e,t,i,o,r,a){if(!e&&!t)return null;var s=void 0,c=void 0,d=i+"&key="+r;if(e){var l=G_(P(V_,e,d),Fv);s=n(l,{type:"facebook",id:"fb-login",onClick:function(){return F_(d).then(o)}})}else s=null;if(t){var u=G_(P(U_,t,d),Fv);c=n(u,{type:"googleplus",id:"gp-login",onClick:function(){return H_(d).then(o)}})}else c=null;return av("social")(function(){return n("div",{id:"social-logins",className:"prechatForm__login"},n("span",{className:"float-left lang-sign-in-with system LanguagePreChatSocialMediaSignInWith prechatForm__signinwith"},a.preChatSocialMediaSignInWith),n("span",{id:"social-login-icons",className:"float-left box-icons prechatForm__social"},s,c),n("div",{className:"clear"}),n("div",{className:"box-hor-or"},n("span",{className:"LanguagePreChatSocialMediaOr hor-or prechatForm__divide"},a.preChatSocialMediaOr)))})}),KC=function(e,t){var n=e.facebookAppId,i=e.googleClientId,o=e.iframeSrc,r=e.onLogin,a=e.languages;return $C(n,i,o,r,t,a)},ek=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return i.state={animated:!1,isAnimationEnd:!1},i.onSubmit=i.onSubmit.bind(i),i.social=null,i.key=+new Date,i.social=KC(n,i.key),i.onAnimated=i.onAnimated.bind(i),i.onAnimationEnd=i.onAnimationEnd.bind(i),i}return qt(t,e),t.prototype.componentDidMount=function(){var e=this;this.props.onMounted(),setTimeout(function(){e.element.scrollTop=0},0),eo&&this.onAnimationEnd(),so(this.animation,this.onAnimationEnd);var t=this.props.fields,n=t.findIndex(function(e){return ZC.indexOf(e.type)>=0});n<0||this.props.isMobile||(this.props.onFocus(t[n]),so(this.animation,this.onAnimated))},t.prototype.componentWillReceiveProps=function(e){this.social=KC(e,this.key)},t.prototype.componentWillUnmount=function(){co(this.animation,this.onAnimated),co(this.animation,this.onAnimationEnd)},t.prototype.onAnimated=function(){this.setState({animated:!0})},t.prototype.onAnimationEnd=function(){this.setState({isAnimationEnd:!0})},t.prototype.onSubmit=function(){var e=this;setTimeout(function(){e.props.onSubmit(e.props.fields)},0)},t.prototype.render=function(){var e=this,t=this.props,i=t.prefix,o=t.greeting,r=t.fields,a=t.submitStatus,s=t.onChange,c=t.onBlur,d=t.onFocus,l=t.isHorizontal,u=t.buttonText,p=t.siteId,f=t.style,h=t.error,m=t.windowStyle,b=t.disabled,g=t.tab,w=t.height,v=t.isPopout,y=t.languages,x=t.isMobile,_=void 0;return m===yo&&(_=w-30-30-35,v&&!x&&(_+=30),x&&(_+=60)),m===yo?n("div",{className:"window__formContainer window__formContainer--bubble",style:{maxHeight:_,overflowY:this.state.isAnimationEnd?"auto":"hidden"},ref:function(t){e.element=t}},n("div",{className:Bv("form window__form",!this.state.animated&&"window__form--animation"),id:i+"-window",ref:function(t){e.animation=t}},h&&n("div",{className:"window__formError"},h),o&&n(Q_,{prefix:i,greeting:o,tab:g}),this.social&&n(this.social,{tab:g}),n("div",{id:i+"-fields",className:Bv("form-fields",l&&"form-fields--horizonal")},n(XC,{tab:g,fields:r,siteId:p,onChange:s,onBlur:c,onFocus:d,style:f,isHorizontal:l,disabled:b,languages:y})),n("div",{className:"form-bottom form__submitContainer"},n(Z_,{tab:g,onClick:this.onSubmit,isSubmitting:"pending"===a,success:"success"===a,text:u,disabled:b})),m===yo&&[n(hx,{type:fx,className:"icon-bubble-line",viewBox:"0 0 19 28"})])):n("div",{className:Bv("form window__form",!this.state.animated&&"window__form--animation"),id:i+"-window",style:{maxHeight:_},ref:function(t){e.element=t,e.animation=t}},h&&n("div",{className:"window__formError"},h),o&&n(Q_,{prefix:i,greeting:o,tab:g}),this.social&&n(this.social,{tab:g}),n("div",{id:i+"-fields",className:Bv("form-fields",l&&"form-fields--horizonal")},n(XC,{tab:g,fields:r,siteId:p,onChange:s,onBlur:c,onFocus:d,style:f,isHorizontal:l,disabled:b,languages:y})),n("div",{className:"form-bottom form__submitContainer"},n(Z_,{tab:g,onClick:this.onSubmit,isSubmitting:"pending"===a,success:"success"===a,text:u,disabled:b})),m===yo&&[n(hx,{type:fx,className:"icon-bubble-line",viewBox:"0 0 19 28"})])},t}(I);ek.propTypes={fields:ub(pb([R_,T_,P_,N_,M_,W_,B_,D_,z_,j_].map(function(e){return yb(e.field)}))).isRequired,onChange:bb.isRequired,onBlur:bb.isRequired,onFocus:bb.isRequired,onSubmit:bb.isRequired,onLogin:bb,submitStatus:wb(["pending","success","fail","none"]).isRequired,facebookAppId:hb,googleClientId:hb,iframeSrc:hb.isRequired,prefix:hb.isRequired,greeting:hb,isHorizontal:mb.isRequired,buttonText:hb.isRequired,siteId:gb.isRequired,style:wb([wo,vo,yo]).isRequired,error:hb.isRequired,disabled:mb.isRequired,onMounted:bb.isRequired,isMobile:mb.isRequired};var tk=gt(ek),nk=function(e){var t="";return"prechat"===e?t="livechat.prechat":"postchat"===e?t="livechat.postChat":"offline"===e&&(t="livechat.offlineMessage"),Jw(function(n){var i="prechat"===e,o=pr(n),r=i&&sd(n),a=i&&cd(n),s=r&&!o?sr(n):void 0,c=a&&!o?cr(n):void 0,d=void 0;"prechat"===e?d=ko:"postchat"===e?d=Ao:"offline"===e&&(d=To);var l=Yo(n),u=Ea(n),p=Ga(n),f=Lc(n,e,p),h=qs(n);"offline"===e&&0===f.length&&(h=!0);var m=_d(n);return{height:u,isPopout:l,tab:d,fields:f,prefix:e,facebookAppId:s,googleClientId:c,iframeSrc:Ko(n,"/iframe.html?origin="+Ri.origin+"&id="+(window.frameElement?window.frameElement.id:"id")),submitStatus:Vc(n,e),greeting:td(n,e),isHorizontal:nd(n),buttonText:id(n,e),hCallback:void 0,siteId:fa(n),style:Qc(n),error:fs(n),windowStyle:Yc(n,p),disabled:h,isMobile:Ca(n),languages:m,onMounted:function(){sm(t+".display",p)}}},function(n){return{onChange:function(i,o){n(um(e,i.id,o)),sm(t+".field.change",Object.assign({},i,{value:o}))},onBlur:function(i){n(fm(e,i.id)),sm(t+".field.blur",Object.assign({},i,{isFocused:!1}))},onFocus:function(i){n(pm(e,i.id)),sm(t+".field.focus",Object.assign({},i,{isFocused:!0}))},onLogin:function(t){n(ym(e,t))},onSubmit:function(t){return n(Am(e,1500,t))}}})(tk)},ik=nk("prechat"),ok=nk("postchat"),rk=nk("offline"),ak=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return i.state={animated:!1},i.animated=function(){i.setState({animated:!0})},i}return qt(t,e),t.prototype.componentDidMount=function(){so(this.container,this.animated)},t.prototype.componentWillUnmount=function(){co(this.container,this.animated)},t.prototype.render=function(){var e=this,t=this.props;return n("div",{id:"prelogin-window",className:Bv("ssologin window__form",!this.state.animated&&"window__form--animation","window__ssologin"),ref:function(t){e.container=t}},t.errorMsg&&n("div",{className:"error ssologin__error window__ssologinError"},t.errorMsg),n("div",{id:"prelogin-login-greeing",className:"LanguagePromptIfLogin ssologin__greeting window__ssologinGreeting"},t.promptIfLogin),n("div",{className:"form-bottom window__ssologinForm"},n("input",{id:"sso-login",
type:"button",className:"btn btn-primary LanguageButtonLoginAsUser window__ssologinOperation",value:t.buttonLogin,style:{width:115},onClick:t.onLoginClick}),n("input",{id:"chat-as-visitor",type:"button",className:"btn btn-primary LanguageButtonChatAsVisitor window__ssologinOperation",value:t.buttonNotNow,style:{width:115},onClick:t.onNotNowClick})),t.windowStyle===yo&&[n(hx,{type:fx,className:"icon-bubble-line",viewBox:"0 0 19 28"})])},t}(I);ak.propTypes={promptIfLogin:hb,buttonLogin:hb,buttonNotNow:hb,errorMsg:hb,onLoginClick:bb,onNotNowClick:bb};var sk=function(e){return{windowStyle:Yc(e,la(e)),errorMsg:fs(e),promptIfLogin:Cd(e,"promptIfLogin"),buttonLogin:Cd(e,"buttonLoginAsUser"),buttonNotNow:Cd(e,"buttonChatAsVisitor")}},ck=function(e,t){var n=t.dispatch;return jt({},e,{onNotNowClick:function(){n(xh()),n(uh())},onLoginClick:function(){n(yf("ssoLogin"))}})},dk=Jw(sk,null,ck)(ak),lk=function(e){try{return JSON.parse(e)}catch(e){return}},uk=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return i.eventListener=i.eventListener.bind(i),i.state={reload:0},i}return qt(t,e),t.prototype.componentDidMount=function(){this.iframe&&this.iframe.contentWindow.parent.addEventListener("message",this.eventListener)},t.prototype.componentWillUnmount=function(){this.iframe&&this.iframe.contentWindow.parent.removeEventListener("message",this.eventListener)},t.prototype.eventListener=function(e){if(-1!==e.origin.toLowerCase().indexOf("comm100.com")&&e.data){var t=lk(e.data);if(!t)return;"sso-login"===t.type&&(t.payload&&"object"===Dt(t.payload)?this.props.handleSSOInfo(t.payload):this.props.ifShowPreLogin?this.props.gotoPreLogin():this.setState({reload:this.state.reload+1}))}},t.prototype.render=function(){var e=this,t=this.props,i=this.props.targetUrl.match(/^[^:]+:\/\/[^\/]+/)[0],o=t.url+encodeURIComponent("?target="+i),r=o+"&color=ffffff&r="+this.state.reload;return n("div",{className:"window__ssoLogin"},n("iframe",{ref:function(t){e.iframe=t},frameBorder:0,src:r,style:{display:"block",width:"100%",height:"100%",minHeight:456,backgroundColor:"#fff"}}))},t}(I);uk.propTypes={handleSSOInfo:bb,url:hb,ifShowPreLogin:mb,targetUrl:hb};var pk=function(e){return{url:Xa(e),ifShowPreLogin:Za(e),targetUrl:Ri.href,departments:kc(e),preChatFields:Fc(e)}},fk=function(e,t){var n=t.dispatch;return jt({},e,{handleSSOInfo:function(t){n(yh(t));var i={};Object.keys(t).forEach(function(n){if("fields"===n)i.custom={},t[n].forEach(function(t){e.preChatFields.filter(function(e){return e.label===t.name&&"checkbox-list"===e.type}).length>0?i.custom[t.name]=t.value.split("\u2299"):i.custom[t.name]=t.value});else if("department"===n){var o=Object.keys(e.departments).filter(function(n){return e.departments[n].name===t.department});o.length>0?i[n]=Number(o[0]):i[n]=""}else"ssoId"===n&&"userId"===n&&"variables"===n||(i[n]=t[n])}),n(gm(i))},gotoPreLogin:function(){n(yf(Co))}})},hk=Jw(pk,null,fk)(uk),mk=void 0,bk=void 0,gk=[],wk="visitorMsgRestritUnlockTimeKey2",vk="visitorMsgSentTimeKey",yk="penaltyFactorKey",xk=1,_k=null,Ck=void 0,kk=[],Sk=null,Ak={},Tk=void 0,Ik=function(e){var t=Ju(bk).frequencyLimit;return null==t?"":t[e]},Rk=function(e,t){return Ak[wk]=Ik(wk),Ak[vk]=Ik(vk),Ak[yk]=Ik(yk),Ak[e]=t,Ak},Pk=function(){var e=(new Date).getTime(),t=Ik(vk);if(void 0!==t&&null!==t&&""!==t){var n=!1;t.split(":").forEach(function(t){var i=new Date(+t);e-i<=1e3*mk.penalty&&(gk.push(+t),kk.push(setTimeout(Pt,1e3*mk.penalty-(e-i))),n=!0)}),n&&Ct()}var i=xt();if(i&&e<i){Tk(!0);var o=i-e;Sk=setTimeout(Tt,o)}var r=Ik(yk);xk=void 0===r||null===r||""===r||isNaN(+r)?1:+r},Mk=function(e,t,n,i){var o;mk=e,bk=t,Ck=n,Tk=i,o={},o[wk]="",o[vk]="",o[yk]="",Ak=o,St(),kt(),At(),gk=[],xk=1,_k=null,Pk()},Ok=function(){Tt(),Xu(bk,{frequencyLimit:Rk(yk,1)}),kt()},Ek=function(){Mt();var e=Rt(),t=0;return e&&(t=Math.max(0,Math.floor((xt()-(new Date).getTime())/1e3))),e&&!_k&&Ot(),!e&&_k&&kt(),{isLimited:e,waitSecond:t}},Nk=function(){return Math.max(0,Math.floor((xt()-(new Date).getTime())/1e3))},Wk=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return i.ime=!1,i}return qt(t,e),t.prototype.shouldComponentUpdate=function(e){var t=this.props;return!this.ime&&(t.value!==e.value||t.isMobile!==e.isMobile||t.isDisabled!==t.isDisabled)},t.prototype.render=function(){var e=this,t=this.props;return n("textarea",{id:"chat-input-control",ref:t.refCb,className:"window__chatInputControl",autoFocus:!t.isMobile,value:t.value,disabled:t.isDisabled,placeholder:t.placeHolder,onFocus:t.onFocus,onBlur:t.onBlur,onCompositionStart:function(){e.ime=!0},onCompositionEnd:function(n){e.ime=!1;var i=n.target.value;t.update(i)},onInput:function(n){if(!e.ime){var i=n.target.value;t.update(i)}},onKeyDown:function(e){Hi(e)&&!t.isMobile&&(e.preventDefault(),t.onSend())},rows:1})},t}(I);Wk.propTypes={isDisabled:mb,placeHolder:hb,isMobile:mb,refCb:bb.isRequired,value:hb.isRequired,onFocus:bb,onBlur:bb,onUpdate:bb.isRequired,onSend:bb.isRequired};var Bk=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return i.state={isDragged:!1,draft:n.draft,textareaFocused:!i.props.isDisabled&&!i.props.isMobile,isAnimationEnd:!1},i.container=null,i.trySend=i.trySend.bind(i),i.trySendFile=i.trySendFile.bind(i),i.onBlur=i.onBlur.bind(i),i.onFocus=i.onFocus.bind(i),i.onAnimationEnd=i.onAnimationEnd.bind(i),i.update=i.update.bind(i),Mk(n.limits.frequency,n.chatGUID,i.props.frequencyLimitClocker,i.props.frequencyLimitState),i}return qt(t,e),t.prototype.componentDidMount=function(){var e=this;so(this.container,this.onAnimationEnd),this.onDragOver=function(t){t.preventDefault(),e.props.isDragEnabled&&e.setState({isDragged:!0})},this.onDragLeave=function(t){t.preventDefault(),e.props.isDragEnabled&&e.setState({isDragged:!1})},this.onDrop=function(t){if(t.preventDefault(),e.props.isDragEnabled){e.setState({isDragged:!1});var n=t.target.files||t.dataTransfer.files||t.dataTransfer.items;n&&1===n.length&&e.trySendFile(n[0])}};var t=this.inputElement.ownerDocument;t.addEventListener("dragover",this.onDragOver),t.addEventListener("dragleave",this.onDragLeave),t.addEventListener("drop",this.onDrop),setTimeout(function(){e.inputElement&&!e.props.isMobile&&e.inputElement.focus()},1e3)},t.prototype.componentWillReceiveProps=function(e){this.props.chatStatus!==go&&e.chatStatus===go&&(Ok(),this.setState({draft:""}))},t.prototype.componentDidUpdate=function(e,t){var n=this,i=this.props;if(e.chatGUID!==i.chatGUID&&Mk(i.limits.frequency,i.chatGUID,i.frequencyLimitClocker,i.frequencyLimitState),t.draft!==this.state.draft||e.isMobile!==this.props.isMobile){var o=function(){var e=n.inputElement.ownerDocument.querySelector(".window__chat");return null!=e?[e,e.scrollTop+e.clientHeight===e.scrollHeight]:[]}(),r=o[0],a=o[1],s=this.inputElement;s.style.overflowY=s.offsetHeight>=s.scrollHeight?"hidden":"auto",s.style.height="auto",s.style.height=s.scrollHeight+"px",a&&(r.scrollTop=r.scrollHeight)}},t.prototype.componentWillUnmount=function(){if(this.inputElement){var e=this.inputElement.ownerDocument;e.removeEventListener("dragOver",this.onDragOver),e.removeEventListener("dragLeave",this.onDragLeave),e.removeEventListener("drop",this.onDrop)}this.timer&&clearTimeout(this.timer),co(this.container,this.onAnimationEnd)},t.prototype.onFocus=function(){this.setState({textareaFocused:!0}),this.props.onFocus()},t.prototype.onBlur=function(){this.setState({textareaFocused:!1}),this.props.onBlur()},t.prototype.onAnimationEnd=function(){this.setState({isAnimationEnd:!0})},t.prototype.trySend=function(){if(!this.state.draft.match(/^\s*$/)){if(this.state.draft.length>1e4)return void this.props.onError("maxLengh");if(Ek().isLimited)return void this.props.onError("limited",{seconds:Nk()});var e=this.props.isCreditCardMasking?Wd(this.state.draft):this.state.draft;this.props.onSend(e,e!==this.state.draft),this.setState({draft:""}),this.inputElement.value="",this.props.isMobile||this.inputElement.focus()}},t.prototype.trySendFile=function(e){if(Ek().isLimited)return void this.props.onError("limited",{seconds:Nk()});this.props.isSendingFile||this.props.onSendFile(e)},t.prototype.update=function(e){if(this.state.draft!==e){var t="";this.props.isShowTypingContent&&(t=e,t.length>500&&(t=t.substr(0,500)+"..."),this.props.isCreditCardMasking&&(t=Wd(t))),this.props.onVisitorIsTyping(t),this.setState({draft:e})}},t.prototype.render=function(){var e=this,t=this.props,i=t.onWarningClose,o=t.onErrorClose,r=t.error,a=t.warning,s=function(e,t){return n("span",{className:"window_chatErrorClose"},n(Fv,{type:Vv.close,size:12,onClick:e,color:t}))};return n("div",{id:"chat-input",ref:function(t){e.container=t},style:this.props.hasMobileExpandWindow?{bottom:"35px"}:null,className:Bv("window__chatInput","chatInputContainer",this.state.isAnimationEnd?"":"chatInputContainer--fadeInUp",this.props.mobileFootIcons?"chatInputContainer--withplus":"",""!==this.state.draft||this.state.textareaFocused?"chatInputContainer--active":"",""!==this.state.draft?"chatInputContainer--typed":"",this.state.isDragged&&!this.props.isSendingFile?"window__chatInput--Drag icon icon-drag":""),onTouchMove:Di},this.props.ifShowChatWithAgent&&n("div",{onClick:this.props.onChatWithAgentClick,className:"window__chatWithAgent window__chatWithAgent--above"},this.props.chatWithAgentText),this.props.mobileFootIcons&&n(this.props.mobileFootIcons),n("div",{className:"chat-input__controlbox "+(this.props.isDisabled?"chat-input__controlbox--disabled":"")},n(Wk,{refCb:function(t){e.inputElement=t},isMobile:this.props.isMobile,value:this.state.draft,isDisabled:this.props.isDisabled,placeHolder:this.props.placeHolder,onFocus:this.onFocus,onBlur:this.onBlur,update:this.update,onSend:this.trySend}),this.props.footIcons&&n(this.props.footIcons)),(this.props.isClassic||this.props.isMobile)&&n("label",{htmlFor:"chat-input-control",className:Bv("window__chatSender",""===this.state.draft?"":"window__chatSender--active"),onClick:this.trySend},n(Fv,{type:Vv.inputSend})),a&&n("div",{className:"window_chatError window_chatError--mitigate"},a,s(i,"#ee8835")),r&&n("div",{className:"window_chatError window_chatError--urgency"},r,s(o,"#de3939")))},t}(I);Bk.defaultProps={onSend:function(){},onError:function(e){},onSendFile:function(){},isDisabled:!0,isCreditCardMasking:!0,onFocus:function(){},onBlur:function(){},rows:1,placeHolder:"placeholder",isDragEnabled:!1,draft:"",fileUploadURL:"www.baidu.com",limitConfig:{repeat:2,penalty:3,count:6,duration:7},chatGUID:1,footIcons:null,mobileFootIcons:null},Bk.propTypes={onSend:lb.func,onSendFile:lb.func,onError:lb.func,onFocus:lb.func,onBlur:lb.func,placeHolder:lb.string,isDragEnabled:lb.bool,draft:lb.string,isCreditCardMasking:lb.bool,isDisabled:lb.bool,limits:{frequency:{repeat:lb.number,penalty:lb.number,count:lb.number,duration:lb.number},fileSize:lb.number},chatGUID:lb.number,footIcons:lb.func,mobileFootIcons:lb.func,frequencyLimitClocker:lb.func,frequencyLimitState:lb.func,ifShowChatWithAgent:lb.bool,onChatWithAgentClick:lb.func,chatWithAgentText:lb.string,error:lb.string,warning:lb.string};var Dk=function(e){function t(){zt(this,t);var n=Vt(this,e.call(this));return n.state={active:!1},n.onIconSelected=n.onIconSelected.bind(n),n.toggle=n.toggle.bind(n),n.closeChatOperationPlusBox=function(e){n.element&&n.element.contains(e.target)||n.toggle(!1)},n}return qt(t,e),t.prototype.componentWillMount=function(){var e=this;this.props.isActive&&setTimeout(function(){e.toggle(!0)},0)},t.prototype.componentDidMount=function(){var e=this;this.element.ownerDocument.body.addEventListener("click",function(t){e.closeChatOperationPlusBox(t)})},t.prototype.componentWillReceiveProps=function(e){var t=this;e.isActive&&setTimeout(function(){t.toggle(!0)},0)},t.prototype.componentWillUnmount=function(){this.element.ownerDocument.body.removeEventListener("click",this.closeBubble)},t.prototype.onIconSelected=function(){this.toggle(!1)},t.prototype.toggle=function(e){this.state.active!==e&&this.setState({active:e})},t.prototype.render=function(){var e=this,t=this.props;return t.icons?n("div",{className:"window__chatOperationPlusBox",ref:function(t){e.element=t}},n("div",{className:"window__chatOperationPlus"},n(Fv,{disabled:!1,color:t.color,className:t.className,type:Vv.plus,active:this.state.active,onClick:function(){e.toggle(!e.state.active)}})),this.state.active&&t.icons&&n(t.icons,{isMobile:!0,isShow:!0,onIconSelected:this.onIconSelected})):null},t}(I);Dk.protoTypes={icons:lb.func,color:lb.string,className:lb.string};var zk=function(e){if(!Hc(e))return{};var t=Ga(e),n=ic(e,t),i=n.mainColor,o=Cs(e),r=vs(e),a=Ks(e),s=Ud(i);return{icons:x_,isActive:a&&!o&&!r,color:s,isMobile:!0}},jk=Jw(zk,null)(Dk),qk=function(e){var t=Ya(e),n=Ga(e),i=!_s(e)&&ac(e,t.id)&&e.window.chatStatus===bo,o=Yc(e,n),r=Hc(e),a=o===wo,s=Ca(e),c=s||a||!r?null:x_,d=s&&r?jk:null,l=Vs(e)&&s,u=Va(e),p=("aboveInput"===u||"toolbarWithBubble"===u&&s)&&Ns(e);return{isMobile:s,isClassic:a,hasMobileExpandWindow:l,chatWindowType:t.style,placeHolder:t.languages.promptPressEnterToSend,isCreditCardMasking:Zc(e),isShowTypingContent:$c(e),isDragEnabled:i,isDisabled:!xs(e),chatGUID:cs(e),limits:{fileSize:dr(e)*Math.pow(2,20),frequency:ur(e)},footIcons:c,mobileFootIcons:d,ifShowChatWithAgent:p,chatWithAgentText:Cd(e,"buttonChatbotChatWithAgent"),error:fs(e),warning:hs(e),chatStatus:ja(e),isSendingFile:_s(e)}},Lk=function(e){return{onSend:function(t,n){sm("livechat.chat.visitor.input",t),e(kf(t,n))},onSendFile:function(t){return e(Sf(t))},onError:function(t,n){e(Lf(t,n))},frequencyLimitClocker:function(t){e(t<=0?Of():Lf("limited",{seconds:t,fromClocker:!0}))},frequencyLimitState:function(t){e(Vf(t))},onVisitorIsTyping:function(t){e(Xf(t))},onChatWithAgentClick:function(){e(Df())},onWarningClose:function(){e(Of())},onErrorClose:function(){e(Bf())}}},Vk=Jw(qk,Lk)(Bk),Fk=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return i.tabs={},i}return qt(t,e),t.prototype.componentDidMount=function(){var e=this;if(this.props.isPoppedOut){var t=tp(),n=t.popout;n&&n.isLarged||(Ti.resizeTo(Ti.outerWidth+500,Ti.outerHeight),np({popout:jt({},n,{isLarged:!0})}))}this.props.components.forEach(function(t){var n=t.key,i=t.callback;if(i){e.tabs[n].appendChild(i())}}),this.props.ToogleChatWinFocused&&this.props.ToogleChatWinFocused(!1),sm("livechat.extendedWindow.show"),sm("livechat.extendedWindow.tabs.switch",this.props.selectedTab)},t.prototype.componentDidUpdate=function(e){this.props.selectedTab!==e.selectedTab&&sm("livechat.extendedWindow.tabs.switch",this.props.selectedTab)},t.prototype.componentWillUnmount=function(){if(this.props.isPoppedOut){Ti.resizeTo(Ti.outerWidth-500,Ti.outerHeight);var e=tp(),t=e.popout;np({popout:jt({},t,{isLarged:!1})})}this.props.ToogleChatWinFocused&&this.props.ToogleChatWinFocused(!0),sm("livechat.extendedWindow.hide")},t.prototype.render=function(){var e=this,t=this.props;return n("div",{className:Bv("expandWindow",!t.isPoppedOut&&"expandWindow--embedded",t.isMobile?"expandWindow--mobile":"slideInRight",t.windowStyle===vo?"expandWindow--circle":""),ref:function(t){e.expandWindow=t}},n("div",null,t.components.map(function(t){var i=t.content,o=t.key;return n("div",null,n("div",{id:o,style:{display:o===e.props.selectedTab?"":"none"},ref:function(t){e.tabs[o]=t}},i&&n(i)))})),n("div",{className:"mediaChatWindowSwitch"},t.components&&t.components.length>1&&t.components.map(function(i){var o=i.key,r=i.isSystem,a=i.iconImg;return n("div",{className:Bv("mediaChatWindowSwitch__element",o===e.props.selectedTab?"mediaChatWindowSwitch__active":""),onClick:function(){e.props.onTabSelect(o)}},r&&n(Fv,{type:o+(o===e.props.selectedTab?"-active":"")}),!r&&n("span",null," ",n("img",{alt:"",src:a})," "),"bubble"===o&&t.unread>0&&n("span",{className:"mediaChatWindowSwitch__messageCount"},t.unread))})))},t}(I);Fk.protoTypes={components:lb.arrayOf(lb.objectOf(lb.shape({content:lb.func.isRequired,key:lb.oneOf([].concat(_u))}))).isRequired,selectedTab:lb.string,onTabSelect:lb.func,ToogleChatWinFocused:lb.func,windowStyle:lb.oneOf([].concat(_o)),isPoppedOut:lb.bool.isRequired};var Uk=function(e){return n("div",null,n("div",{className:"mediaChatWindow__agentImg"},n(Gy,{src:e.avatar,alt:e.name,className:"mediaChatWindow__avatarImg"})),n("div",{className:"mediaChatWindow__agentName"},e.name))};Uk.propTypes=yb({avatar:hb.isRequired,name:hb.isRequired}).isRequired;var Hk,Gk=function(e){return"audioIncoming"===e||"videoIncoming"===e},Yk=function(e){return"videoChatting"===e||"videoIncoming"===e||"videoRequesting"===e},Qk=function(e){return"audioChatting"===e||"audioIncoming"===e||"audioRequesting"===e},Jk=function(e){return"audioChatting"===e||"videoChatting"===e},Xk=function(e,t){if(0===t)return"";if(e<=t)return"";var n=e-t,i=parseInt(n/1e3,10),o=parseInt(i/86400,10),r=parseInt(i%86400/3600,10),a=parseInt(i%86400%3600/60,10),s=parseInt(i%86400%3600%60,10);return(o>0?o+".":"")+(r>=10?r+":":r<10&&r>0?"0"+r+":":0===r&&o>0?"00":"")+(a<10?"0"+a+":":a+":")+(s<10?"0"+s:s)},Zk=(Hk={},Hk.audioChatting="mediaChatWindow--audioChatting",Hk.audioIncoming="mediaChatWindow--audioIncoming",Hk.audioRequesting="mediaChatWindow--audioRequesting",Hk.videoChatting="mediaChatWindow--videoChatting",Hk.videoIncoming="mediaChatWindow--videoIncoming",Hk.videoRequesting="mediaChatWindow--videoRequesting",Hk),$k=function(e){function t(n){zt(this,t);var i=Vt(this,e.call(this,n));return Jk(n.audioVideoChatStatus)?i.state={timespan:Xk((new Date).getTime(),n.audioVideoChatStartTime)}:i.state={timespan:""},i}return qt(t,e),t.prototype.componentWillMount=function(){this.startClock()},t.prototype.componentDidMount=function(){this.props.onMounted(this.localVideo,this.remoteVideo)},t.prototype.componentWillUnmount=function(){clearInterval(this.clock)},t.prototype.startClock=function(){var e=this;this.clock=setInterval(function(){return e.setState({timespan:Xk((new Date).getTime(),e.props.audioVideoChatStartTime)})},1e3)},t.prototype.render=function(){var e=this,t=this.props,i=Yk(t.audioVideoChatStatus),o=Qk(t.audioVideoChatStatus),r=Jk(t.audioVideoChatStatus),a=this.state.timespan,s=Gk(t.audioVideoChatStatus),c=o?t.audioChatText:t.videoChatText;return n("div",{id:"media-chat-window",className:Bv("mediaChatWindow",Zk[t.audioVideoChatStatus])},n("div",{className:"mediaChatWindow__requesting",style:{display:r?"none":"block"}},n(Uk,{name:t.name,avatar:t.avatar}),n("div",{className:"mediaChatWindow__waiting"},n("div",{className:o?"mediaChatWindow__textAudio":"mediaChatWindow__textVideo"},n("span",{className:Bv("mediaChatWindow__iconfont icon",o&&"icon-voice",i&&"icon-video")}),n("div",{className:"mediaChatWindow__chatTypeText"},c)),n("div",{className:"mediaChatWindow__waitingAni"},n("span",null,"."),n("span",null,"."),n("span",null,"."))),n("div",{className:"mediaChatWindow__buttons"},s&&n("div",{className:"mediaChatWindow__button",onClick:t.onAcceptClick},n(hx,{type:"accept",viewBox:"0 0 55 55"})),n("div",{className:"mediaChatWindow__button",onClick:t.onRefuseClick},n(hx,{type:"refuse",viewBox:"0 0 55 55"})))),n("div",{className:"mediaChatWindow__chatting",style:{display:r?"flex":"none"}},n("div",{className:"mediaChatWindow__chattingAgent"},n(Uk,{name:t.name,avatar:t.avatar}),n("div",{className:"mediaChatWindow__chattingTime"},n("span",{className:Bv("mediaChatWindow__iconfont icon",o&&"icon-voice",i&&"icon-video")}),n("div",{className:"mediaChatWindow__chatTypeText"},c),n("div",{className:"mediaChatWindow__chattingDuration"},a))),n("div",{style:{display:i?"block":"none",width:"100%"}},n("video",{ref:function(t){e.localVideo=t},id:"localVideo",className:"mediaChatWindow__localVideo"}),n("video",{ref:function(t){e.remoteVideo=t},id:"remoteVideo",className:"mediaChatWindow__remoteVideo"}),n(hx,{className:"mediaChatWindow__loading",type:"loading",viewBox:"0 0 110 110"})),n("div",{className:"mediaChatWindow__buttons"},n("div",{className:"mediaChatWindow__button",onClick:t.onRefuseClick},n(hx,{type:"refuse",viewBox:"0 0 55 55"})))))},t}(I);$k.protoTypes=yb({name:hb,avatar:hb,videoChatText:hb,audioChatText:hb,onAcceptClick:bb,onRefuseClick:bb,audioVideoChatStartTime:xb(Date),audioVideoChatStatus:wb(Object.keys(Bo).map(function(e){return Bo[e]}))}).isRequired;var Kk=function(e){return{name:Os(e),avatar:Ms(e),audioVideoChatStartTime:Xs(e),audioVideoChatStatus:Js(e),videoChatText:Cd(e,"videoChatCalling"),audioChatText:Cd(e,"audioChatCalling")}},eS=function(e){return{onAcceptClick:function(){e($f())},onRefuseClick:function(){e(Th())},onMounted:function(t,n){e(Zf(t,n))}}},tS=Jw(Kk,eS)($k),nS=function(e){return n("div",{style:{backgroundColor:"#ccc",display:"flex",position:"absolute",height:"100%",width:"100%"}},n("div",null," I am kb, ^^ "),n("div",null,e.text))};nS.protoTypes={text:lb.string};var iS,oS,rS=function(){return{text:"hello, how may I help you?"}},aS=Jw(rS,null)(nS),sS=function(e){var t,n=(t={},t.media=tS,t.voice=tS,t.kb=aS,t),i=Ca(e),o=bs(e),r=la(e),a=Yc(e,r),s=Ys(e),c=Us(e),d=Yo(e),l=[];return c&&c.forEach(function(e){e.isSystem?l.push({content:n[e.id],key:e.id,isSystem:e.isSystem}):l.push({callback:e.content,key:e.id,isSystem:e.isSystem,iconImg:e.icon})}),i&&l.push({key:"bubble",isSystem:!0}),{components:l,isMobile:i,unread:o,windowStyle:a,selectedTab:s,isPoppedOut:d}},cS=function(e){return{onTabSelect:function(t){e(Kf(t))}}},dS=Jw(sS,cS)(Fk),lS=function(e){function t(){zt(this,t);var n=Vt(this,e.call(this));return n.state={showIcon:!1,animated:!1},n.animated=function(){n.setState({animated:!0})},n}return qt(t,e),t.prototype.componentDidMount=function(){var e=this;this.timer=setTimeout(function(){return e.setState({showIcon:!0})},200),so(this.element,this.animated)},t.prototype.componentWillUnmount=function(){clearTimeout(this.timer),co(this.element,this.animated)},t.prototype.render=function(){var e=this,t=this.props;return n("div",{className:Bv("window__form",this.state.animated&&"window__form--animation"),ref:function(t){e.element=t}},t.errorMessage&&n("div",{className:"window__formError"},t.errorMessage),this.state.showIcon&&!t.errorMessage&&n(hx,{type:"loading",className:"svg--loadingChat",viewBox:"0 0 100 100"}))},t}(I),uS=Jw(function(e){return{errorMessage:fs(e)}})(lS),pS=(iS={},iS[ko]=ik,iS[Ao]=ok,iS[To]=rk,iS[So]=g_,iS[Co]=dk,iS.ssoLogin=hk,iS.loading=uS,iS),fS=(oS={},oS[ko]={timespan:0,duration:20},oS[Ao]={timespan:0,duration:20},oS[To]={timespan:0,duration:20},oS[So]={timespan:0,duration:2},oS[Co]=null,oS.ssoLogin=null,oS.loading=null,oS),hS=function(e){var t=Ua(e),i=pS[t],o=void 0,r=ha(e),a=r===Lo;o="ssoLogin"===t?[n(i)]:[n(tx,null),n(i),!a&&ys(e)&&n(Vk,null),!a&&n(k_,null)];var s=ja(e)===bo,c=Qc(e),d=hs(e),l=fs(e),u=bs(e),p=gs(e),f=void 0,h=Ps(e),m=void 0;p&&(f=p.content,"string"!=typeof f&&f&&(f=f.text||f.name),il(p)||(m=p.sender.name));var b=ld(e)&&c!==yo,g=od(e,u),w=rd(e),v=fS[t],y=Qs(e),x=0,_=Vs(e),C=_?dS:null;c===yo&&(x=Math.random());var k=Na(e),S=Ea(e),A=la(e),T=Sc(e,A),I=ec(e),R=Wa(e),M=hl(c,e,nc(e,A));return{isPoppedOut:Yo(e),fontCSS:Fd(Go(e),P(Ko,e)),mainColor:Qa(e),background:Ja(e),isFocused:Zs(e),children:o,windowTab:t,windowStatus:r,windowStyle:c,warning:d,error:l,isMobile:Ca(e),isIPad:ka(e),showChatWindowInExpandwindow:Gs(e),unread:u,lastMessage:f,avatar:b?h:void 0,agentName:m,title:s?g:void 0,seed:x,hOnline:v,writeReply:w,ifShowExpandWindow:_,expandWindow:C,customCss:y,width:k,height:S,isRightToLeft:I,iframeStyle:T,orientation:R,showAvatar:!!(M.avatars||M.avatar||M.agent&&M.agent.avatar)}},mS=function(e){return{dispatch:e,onMounted:function(){e(ch())},onMinimized:function(){e(ef())},onOpened:function(){e(nf())},onErrorClose:function(){e(Bf())},onWarningClose:function(){e(Of())},onFocusToggle:function(t){e(Mf(t))},onCloseBubble:function(){e(ih())}}},bS=function(){},gS=function(e,t){var n=e.windowTab,i=t.dispatch,o=bS,r=void 0;return n===So?(o=function(){return i(fh())},r="livechat.chat.restore"):n===ko?(o=function(){return i(Ch())},r="livechat.prechat.restore"):n===Ao?(o=function(){return i(fh())},r="livechat.postChat.restore"):n===To&&(o=function(){return i(kh())},r="livechat.offlineMessage.restore"),Object.assign({},e,t,{hCallback:o,onMaximize:function(){r&&sm(r),i(Zp())}})},wS=Jw(hS,mS,gS)(qy),vS=function(e){var t=Ho(e);return t?{isReady:t,enableGa:Gc(e),tab:Ua(e),invitation:O(e),guid:cs(e),ban:Qo(e),isCampaignReady:Fa(e),windowStatus:ha(e),isPoppedOut:Yo(e),customJs:vd(e),font:Ko(e,"/fonts/SourceSansPro-Regular.woff"),chatStatus:ja(e)}:{isReady:t}},yS=Jw(vS)(function(e){var t=e.isReady,i=e.windowStatus,o=e.tab,r=e.enableGa,a=e.customJs,s=e.font,c=e.chatStatus,d=e.invitation,l=e.guid,u=e.ban,p=e.isCampaignReady,f=e.isPoppedOut;if(!t)return null;if(u)return null;var h=d&&(d.type===Pc||d.type===Tc),m=i!==Fo;return n("div",null,a&&n(iv,{key:"js",textContent:a,name:"script",type:"text/javascript"}),n(iv,{key:"font",name:"link",rel:"prefetch",href:s,as:"font",crossOrigin:"anonymous"}),n(nv,{enableGa:r,windowTab:o,invitation:d,guid:l,chatStatus:c}),!f&&n(gy,null),h&&n(yy,null),p&&m&&n(wS,null))}),xS=function(e){var t=e.store;return n(sv,{getRender:rm},n(hw,{store:t},n(yS,null)))},_S=Ii.getElementById("comm100-container"),CS=_S||Ii.createElement("div");_S||(CS.id="comm100-container",Ii.body.appendChild(CS));var kS=function(e){return R(n(xS,{store:e}),CS),function(){CS.innerHTML=""}},SS=function(e){var t=function(){return{width:Ti.innerWidth||Ii.documentElement.clientWidth||Ii.body.clientWidth,height:Ti.innerHeight||Ii.documentElement.clientHeight||Ii.body.clientHeight}},n=function(e){return e&&e.indexOf("landscape")>=0},i=function(){var e=Ti.screen,t=e.msOrientation||e.mozOrientation||e.orientation,i=void 0===t?"undefined":Dt(t);return"undefined"===i?"orientation"in Ti&&90===Math.abs(Ti.orientation):n("string"===i?t:t.type)},o=function(){var n=e.getState(),i=Na(n),o=Ea(n),r=t();r.width===i&&r.height===o||e.dispatch(rf(r))},r=function(){i()?e.dispatch(sf()):e.dispatch(cf())};return Ti.addEventListener("resize",o),Ti.addEventListener("orientationchange",r),o(),r(),function(){Ti.removeEventListener("resize",o),Ti.removeEventListener("orientationchange",r)}},AS=[kS,Lh,lm,SS],TS=function(e){if(e){var t=e.standbyVisitorId,n=e.visitorId,i=e.visitorGuid;if(i)return{id:n,standbyId:t,guid:i}}return{id:zu(!0),standbyId:zu(!1),guid:Lu()}},IS=function(e){e.id>0&&ju(e.id,!0),e.standbyId>0&&ju(e.standbyId,!1),e.guid&&Vu(e.guid)},RS=function(e){if(e){return{title:e.title,url:e.url}}return Ld()},PS=function(e){return e&&e.isStandbyServer?"standby":"main"},MS=function(e){return e?qr(e.planId,{type:e.chatSource,page:RS(e),invitationId:e.invitationId},!1,e.ticketId,e.departmentId):null},OS=function(e){var t=e.siteId,n=e.chatGroup,i=e.mainCampaignId,o=e.campaignIds,r=e.isDynamicCampaign,a=e.serverUrl;rp();var s=Oi.popout,c=MS(s),d=RS(s),l=Qd(s),u=TS(s);IS(u);var p=PS(s),f=We({app:{isReady:!1,isActive:!0,server:p,isPoppedOut:!!s,isOpenerExists:!!Ti.opener,banned:Gu().isBanned},page:jt({siteId:t,isDynamicCampaign:r,campaignId:r?0:i,buttons:o.reduce(function(e,t){var n;return Object.assign({},e,(n={},n[t]=!1,n))},{}),platform:Yd(),chatGroup:n,visitor:u,windowStatus:Fo,requestChatAction:c},d),configuration:jt({},a,{customVariableResult:l})});return Et(f),f.dispatch(Rh()),f};!function(e){return function(t,n){Oi.loaded||(Oi.loaded=!0,W(Oi.chat_buttons),window.comm100store=e({siteId:ml,chatGroup:bl,mainCampaignId:yl,campaignIds:wl(),isDynamicCampaign:!!Oi.dynamic,serverUrl:{url:t,standbyUrl:n}}))}}(OS)(Oi.main,Oi.standby)}();
//# sourceMappingURL=http://localhost:8000/bundle.039e03f5e5a8b3d7502d57c26bad53c1.js.map
